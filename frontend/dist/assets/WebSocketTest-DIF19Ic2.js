import{r as c,j as e}from"./vendor-react-CCyQGCED.js";import{e as M,B as v,c as f,s as U}from"./index-D0023jFM.js";import{I as Me}from"./input-D8_g_dg9.js";import{S as ze,a as Oe,b as Ie,c as Pe,d as re}from"./select-DXT-lI-N.js";import{S as De}from"./switch-ByXWOYiO.js";import{ay as ae,Y as ne,az as Fe,aA as Ue,aB as oe,aC as ce,aD as ie,a0 as We,e as le,S as Le,X as Be,Z as Qe,av as qe,aE as Je,an as de,a2 as ue,n as Xe,c as He,a3 as Ke,ak as Ve,al as Ze,a1 as Ge}from"./vendor-icons-CCn_k3dF.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-router-Dzc1xxhr.js";import"./vendor-radix-CYVJEJRR.js";async function Ye(){return(await(await fetch("/auth/csrf-token",{credentials:"include"})).json()).csrf_token}const es=["NSE","NFO","BSE","BFO","CDS","MCX"];function L(a){return new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}function ss(a){return a>=1e7?`${(a/1e7).toFixed(2)}Cr`:a>=1e5?`${(a/1e5).toFixed(2)}L`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toString()}function ts(a){return a?new Date(a).toLocaleTimeString("en-IN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--:--:--"}function z({status:a,size:u="md"}){const N=u==="sm"?"w-2 h-2":"w-3 h-3";return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:f(N,"rounded-full transition-all duration-500",a==="success"&&"bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.8)]",a==="warning"&&"bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.8)]",a==="error"&&"bg-rose-400 shadow-[0_0_8px_rgba(251,113,133,0.8)]",a==="idle"&&"bg-muted")}),a!=="idle"&&e.jsx("div",{className:f("absolute inset-0 rounded-full animate-ping opacity-40",a==="success"&&"bg-emerald-400",a==="warning"&&"bg-amber-400",a==="error"&&"bg-rose-400")})]})}function W({label:a,value:u,icon:N,status:j,subtitle:w}){return e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-transparent rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative px-4 py-3 rounded-lg bg-card border border-border hover:border-border/60 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx(N,{className:"w-3.5 h-3.5 text-muted-foreground"}),j&&e.jsx(z,{status:j,size:"sm"})]}),e.jsx("div",{className:"text-lg font-bold font-mono text-foreground tracking-tight",children:u}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mt-0.5",children:a}),w&&e.jsx("div",{className:"text-[9px] text-muted-foreground/60 mt-1",children:w})]})]})}function me({price:a,quantity:u,maxQty:N,side:j}){const w=Math.min(u/N*100,100);return e.jsxs("div",{className:"relative flex items-center gap-2 py-1",children:[e.jsx("div",{className:"absolute inset-0 rounded overflow-hidden",children:e.jsx("div",{className:f("absolute top-0 bottom-0 transition-all duration-300",j==="buy"?"left-0 bg-gradient-to-r from-emerald-500/20 to-transparent":"right-0 bg-gradient-to-l from-rose-500/20 to-transparent"),style:{width:`${w}%`}})}),e.jsx("span",{className:"relative z-10 flex-1 font-mono text-xs text-muted-foreground",children:L(a)}),e.jsx("span",{className:f("relative z-10 font-mono text-xs font-medium",j==="buy"?"text-emerald-400":"text-rose-400"),children:u.toLocaleString()})]})}function ms({depthLevel:a=5}){const[u,N]=c.useState(!1),[j,w]=c.useState(!1),[S,O]=c.useState(!1),[B,xe]=c.useState(!0),g=c.useRef(null),A=c.useRef(null),[he,ge]=c.useState(0),[Q,fe]=c.useState(null),[b,y]=c.useState(new Map),[k,q]=c.useState(""),[I,pe]=c.useState(""),[J,P]=c.useState([]),[be,C]=c.useState(!1),[je,X]=c.useState(!1),[we,Ne]=c.useState(new Set),[ve,ye]=c.useState(new Set),[E,Se]=c.useState(!1),[T,H]=c.useState([]),[R,K]=c.useState([]),_=c.useRef(null),D=c.useRef(null),l=c.useCallback((s,t="info")=>{const r=new Date().toLocaleTimeString("en-IN",{hour12:!1});H(d=>[...d.slice(-199),{timestamp:r,message:s,type:t}])},[]),ke=c.useCallback(s=>{const t=new Date().toLocaleTimeString("en-IN",{hour12:!1});K(r=>[...r.slice(-99),`[${t}] ${s}`])},[]),V=c.useCallback(async()=>Ye(),[]),Z=async()=>{if(g.current?.readyState===WebSocket.OPEN){l("Already connected","warn");return}w(!0),l("Initiating connection...","info");try{const s=await V(),r=await(await fetch("/api/websocket/config",{headers:{"X-CSRFToken":s},credentials:"include"})).json();if(r.status!=="success")throw new Error("Config fetch failed");const d=r.websocket_url;l(`Connecting to ${d}`,"info");const o=new WebSocket(d);o.onopen=async()=>{l("Connection established","success"),N(!0),w(!1);try{const n=await V(),h=await(await fetch("/api/websocket/apikey",{headers:{"X-CSRFToken":n},credentials:"include"})).json();h.status==="success"&&h.api_key?(o.send(JSON.stringify({action:"authenticate",api_key:h.api_key})),l("Auth request sent","info")):l("No API key found - visit /apikey","error")}catch(n){l(`Auth error: ${n}`,"error")}},o.onclose=n=>{N(!1),w(!1),O(!1),l(`Disconnected (code: ${n.code})`,n.wasClean?"info":"error"),B&&!n.wasClean&&(l("Auto-reconnect in 3s...","warn"),A.current=setTimeout(Z,3e3))},o.onerror=()=>{l("Connection error","error"),w(!1)},o.onmessage=n=>{ge(m=>m+1),fe(Date.now()),ke(n.data);try{const m=JSON.parse(n.data);Ee(m)}catch{l("Parse error","error")}},g.current=o}catch(s){l(`Connection failed: ${s}`,"error"),w(!1)}},Ce=()=>{A.current&&(clearTimeout(A.current),A.current=null),g.current&&(g.current.close(1e3,"User disconnect"),g.current=null),N(!1),O(!1),l("Disconnected by user","info")},Ee=c.useCallback(s=>{switch(s.type||s.status){case"auth":s.status==="success"?(O(!0),l(`Authenticated: ${s.user_id} @ ${s.broker}`,"success")):l(`Auth failed: ${s.message}`,"error");break;case"market_data":{let r=s.symbol.toUpperCase();r=r.replace(/:(?:50|30|20)$/,"");const d=s.exchange,o=s.mode,n=s.data||{};y(m=>{const h=`${d}:${r}`,p=m.get(h);if(!p)return m;const i=new Map(m),x={...p.data};return(o===1||o===2)&&Object.assign(x,{ltp:n.ltp??x.ltp,open:n.open??x.open,high:n.high??x.high,low:n.low??x.low,close:n.close??x.close,volume:n.volume??x.volume,change:n.change??x.change,change_percent:n.change_percent??x.change_percent,timestamp:n.timestamp??x.timestamp}),o===3&&n.depth&&(x.depth=n.depth),i.set(h,{...p,data:x,lastUpdate:Date.now()}),i});break}case"subscribe":l(s.status==="success"?"Subscribed":`Sub error: ${s.message}`,s.status==="success"?"success":"error");break;case"unsubscribe":l("Unsubscribed","info");break;case"error":l(`Error: ${s.message}`,"error");break}},[l]),G=(s,t,r)=>{if(!g.current||g.current.readyState!==WebSocket.OPEN){U.error("Not connected");return}const d={action:"subscribe",symbols:[{symbol:r==="Depth"&&a===50?`${s}:50`:s,exchange:t}],mode:r};r==="Depth"&&a>5&&(d.depth=a),g.current.send(JSON.stringify(d)),y(o=>{const n=`${t}:${s}`,m=o.get(n);if(!m)return o;const h=new Map(o),p=new Set(m.subscriptions);return p.add(r),h.set(n,{...m,subscriptions:p}),h}),l(`Sub: ${t}:${s} [${r}]`,"info")},Y=(s,t,r)=>{if(!g.current||g.current.readyState!==WebSocket.OPEN)return;const d={LTP:1,Quote:2,Depth:3},o={action:"unsubscribe",symbols:[{symbol:r==="Depth"&&a===50?`${s}:50`:s,exchange:t,mode:d[r]}],mode:r};r==="Depth"&&a>5&&(o.depth=a),g.current.send(JSON.stringify(o)),y(n=>{const m=`${t}:${s}`,h=n.get(m);if(!h)return n;const p=new Map(n),i=new Set(h.subscriptions);return i.delete(r),p.set(m,{...h,subscriptions:i}),p})},F=s=>{if(b.size===0){U.error("Add symbols first");return}b.forEach((t,r)=>{const[d,o]=r.split(":");G(o,d,s)})},ee=()=>{!g.current||g.current.readyState!==WebSocket.OPEN||(g.current.send(JSON.stringify({action:"unsubscribe_all"})),y(s=>{const t=new Map(s);return t.forEach((r,d)=>t.set(d,{...r,subscriptions:new Set})),t}),l("Unsubscribed all","info"))},se=c.useCallback(async(s,t)=>{if(s.length<2){P([]),C(!1);return}X(!0);try{const r=new URLSearchParams({q:s});t&&t!=="_all"&&r.append("exchange",t);const o=await(await fetch(`/search/api/search?${r}`,{credentials:"include"})).json();P((o.results||[]).slice(0,8)),C(!0)}catch{P([])}finally{X(!1)}},[]);c.useEffect(()=>{const s=setTimeout(()=>{k.length>=2&&se(k,I)},200);return()=>clearTimeout(s)},[k,I,se]);const $e=(s,t)=>{const r=`${t}:${s}`;if(b.has(r)){U.error("Already added");return}y(d=>new Map(d).set(r,{symbol:s,exchange:t,data:{},subscriptions:new Set})),q(""),C(!1),l(`Added: ${r}`,"success")},Ae=(s,t)=>{const r=`${t}:${s}`;b.get(r)?.subscriptions.forEach(o=>Y(s,t,o)),y(o=>{const n=new Map(o);return n.delete(r),n}),l(`Removed: ${r}`,"info")},Te=()=>{ee(),y(new Map),l("Cleared all symbols","info")},Re=s=>{Ne(t=>{const r=new Set(t);return r.has(s)?r.delete(s):r.add(s),r})},_e=s=>{ye(t=>{const r=new Set(t);return r.has(s)?r.delete(s):r.add(s),r})};c.useEffect(()=>{const s=t=>{D.current&&!D.current.contains(t.target)&&C(!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]),c.useEffect(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[T,R]),c.useEffect(()=>{const s=localStorage.getItem("ws_test_symbols");if(s)try{const t=JSON.parse(s),r=new Map;t.forEach(d=>{const[o,n]=d.split(":");r.set(d,{symbol:n,exchange:o,data:{},subscriptions:new Set})}),y(r)}catch{}},[]),c.useEffect(()=>{localStorage.setItem("ws_test_symbols",JSON.stringify(Array.from(b.keys())))},[b]);const te=u?S?"success":"warning":j?"warning":"idle";return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx("div",{className:"fixed inset-0 opacity-[0.015] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative",children:[e.jsx("header",{className:"border-b border-border bg-background/80 backdrop-blur-xl sticky top-0 z-40",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 via-cyan-500/10 to-transparent border border-cyan-500/30 flex items-center justify-center",children:e.jsx(ae,{className:"w-6 h-6 text-cyan-400"})}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5",children:e.jsx(z,{status:te})})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold tracking-tight flex items-center gap-2",children:["WebSocket Console",e.jsx(M,{variant:"outline",className:"text-[9px] border-cyan-500/30 text-cyan-400 font-mono",children:a>5?`DEPTH ${a}`:"TEST"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a>5?`${a}-level market depth testing (broker dependent)`:"Real-time market data testing interface (independent connection)"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(De,{checked:B,onCheckedChange:xe}),e.jsx("span",{children:"Auto-reconnect"})]}),e.jsx("div",{className:"flex items-center gap-2",children:u?e.jsxs(v,{onClick:Ce,variant:"outline",className:"gap-2 border-rose-500/30 text-rose-400 hover:bg-rose-500/10",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Disconnect"]}):e.jsxs(v,{onClick:Z,disabled:j,className:"gap-2 bg-gradient-to-r from-cyan-600 to-cyan-500 hover:from-cyan-500 hover:to-cyan-400 text-white font-semibold shadow-lg shadow-cyan-500/20",children:[j?e.jsx(ne,{className:"w-4 h-4 animate-spin"}):e.jsx(Fe,{className:"w-4 h-4"}),j?"Connecting":"Connect"]})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-muted/50 border border-border",children:[S?e.jsx(oe,{className:"w-4 h-4 text-emerald-400"}):u?e.jsx(ce,{className:"w-4 h-4 text-amber-400"}):e.jsx(ie,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:f("text-sm font-medium",S?"text-emerald-400":u?"text-amber-400":"text-muted-foreground"),children:S?"Authenticated":u?"Connected":"Offline"})]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsx(W,{label:"Messages",value:he,icon:We,subtitle:Q?`${((Date.now()-Q)/1e3).toFixed(1)}s ago`:"--"}),e.jsx(W,{label:"Symbols",value:b.size,icon:le,subtitle:`${Array.from(b.values()).filter(s=>s.subscriptions.size>0).length} subscribed`}),e.jsx(W,{label:"Status",value:S?"Ready":u?"Pending":"Offline",icon:S?oe:u?ce:ie,status:te})]}),e.jsxs("div",{className:"rounded-xl bg-card border border-border p-5",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",ref:D,children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Me,{type:"text",placeholder:"Search symbols...",value:k,onChange:s=>q(s.target.value),onFocus:()=>k.length>=2&&C(!0),className:"pl-10 bg-muted/50 border-border/50 text-foreground placeholder:text-muted-foreground/60 focus:border-cyan-500/50 focus:ring-cyan-500/20"}),je&&e.jsx(ne,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground animate-spin"})]}),be&&J.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-2 rounded-lg border border-border/50 bg-card backdrop-blur-xl shadow-2xl overflow-hidden",children:J.map((s,t)=>e.jsx("div",{className:"px-4 py-3 border-b border-border/50 last:border-0 hover:bg-cyan-500/5 cursor-pointer transition-colors",onClick:()=>$e(s.symbol,s.exchange),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:s.symbol}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:s.name})]}),e.jsx(M,{variant:"outline",className:"text-[10px] border-border text-muted-foreground",children:s.exchange})]})},t))})]}),e.jsxs(ze,{value:I,onValueChange:pe,children:[e.jsx(Oe,{className:"w-full lg:w-40 bg-muted/50 border-border/50 text-foreground/80",children:e.jsx(Ie,{placeholder:"All Exchanges"})}),e.jsxs(Pe,{className:"bg-card border-border",children:[e.jsx(re,{value:"_all",children:"All Exchanges"}),es.map(s=>e.jsx(re,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[Array.from(b.entries()).map(([s,t])=>e.jsxs(M,{variant:"secondary",className:f("gap-1.5 py-1.5 px-3 border transition-colors",t.subscriptions.size>0?"bg-cyan-500/10 border-cyan-500/30 text-cyan-300":"bg-muted/50 border-border/50 text-muted-foreground"),children:[e.jsx("span",{className:"font-mono text-xs",children:s}),t.subscriptions.size>0&&e.jsx(z,{status:"success",size:"sm"}),e.jsx("button",{type:"button",onClick:()=>Ae(t.symbol,t.exchange),className:"ml-1 hover:text-rose-400 transition-colors",children:e.jsx(Be,{className:"h-3 w-3"})})]},s)),b.size===0&&e.jsx("span",{className:"text-sm text-muted-foreground/60",children:"No symbols. Search to add."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(v,{onClick:()=>F("LTP"),variant:"outline",disabled:!u,size:"sm",className:"border-amber-500/30 text-amber-400 hover:bg-amber-500/10 disabled:opacity-30",children:[e.jsx(Qe,{className:"w-3.5 h-3.5 mr-1.5"})," LTP All"]}),e.jsxs(v,{onClick:()=>F("Quote"),variant:"outline",disabled:!u,size:"sm",className:"border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 disabled:opacity-30",children:[e.jsx(qe,{className:"w-3.5 h-3.5 mr-1.5"})," Quote All"]}),e.jsxs(v,{onClick:()=>F("Depth"),variant:"outline",disabled:!u,size:"sm",className:"border-violet-500/30 text-violet-400 hover:bg-violet-500/10 disabled:opacity-30",children:[e.jsx(le,{className:"w-3.5 h-3.5 mr-1.5"})," Depth ",a>5?a:""," All"]}),e.jsxs(v,{onClick:ee,variant:"outline",disabled:!u,size:"sm",className:"border-rose-500/30 text-rose-400 hover:bg-rose-500/10 disabled:opacity-30",children:[e.jsx(Je,{className:"w-3.5 h-3.5 mr-1.5"})," Unsub All"]}),e.jsxs(v,{onClick:Te,variant:"outline",size:"sm",className:"border-border/50 text-muted-foreground hover:bg-muted/50",children:[e.jsx(de,{className:"w-3.5 h-3.5 mr-1.5"})," Clear All"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Array.from(b.entries()).map(([s,t])=>{const r=t.data.change??0,d=t.data.change_percent??0,o=r>=0,n=t.data.ltp!==void 0,m=!!(t.lastUpdate&&Date.now()-t.lastUpdate<5e3),h=ve.has(s),p=we.has(s);return e.jsxs("div",{className:f("rounded-xl border bg-card overflow-hidden transition-all",m?"border-cyan-500/40":"border-border"),children:[m&&e.jsx("div",{className:"h-0.5 bg-gradient-to-r from-cyan-500 via-emerald-500 to-cyan-500"}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>_e(s),className:"hover:text-cyan-400 transition-colors",children:h?e.jsx(ue,{className:"w-4 h-4"}):e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold font-mono text-lg",children:s}),m&&e.jsx(z,{status:"success",size:"sm"})]}),e.jsx("div",{className:"flex gap-1",children:["LTP","Quote","Depth"].map(i=>{const x=t.subscriptions.has(i),$=i==="Depth"&&a>5?`D${a}`:i;return e.jsx("button",{type:"button",onClick:()=>x?Y(t.symbol,t.exchange,i):G(t.symbol,t.exchange,i),className:f("px-2.5 py-1 text-[10px] font-bold rounded-md transition-all",x?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/40":"bg-muted/50 text-muted-foreground border border-border/50 hover:text-foreground"),children:$},i)})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-end justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mb-1",children:"LTP"}),e.jsx("div",{className:"text-3xl font-bold font-mono tracking-tight",children:n?`â‚¹${L(t.data.ltp)}`:"---"})]}),n&&e.jsxs("div",{className:f("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-sm font-semibold",o?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"),children:[o?e.jsx(He,{className:"w-4 h-4"}):e.jsx(Ke,{className:"w-4 h-4"}),o?"+":"",d.toFixed(2),"%"]})]}),(h||n)&&e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[{label:"Open",value:t.data.open},{label:"High",value:t.data.high,color:"text-emerald-400"},{label:"Low",value:t.data.low,color:"text-rose-400"},{label:"Close",value:t.data.close},{label:"Vol",value:t.data.volume,format:"volume"}].map(i=>e.jsxs("div",{className:"bg-muted/50 rounded-lg px-2 py-1.5",children:[e.jsx("div",{className:"text-[8px] uppercase tracking-wider text-muted-foreground",children:i.label}),e.jsx("div",{className:f("text-xs font-mono font-semibold mt-0.5",i.color||"text-foreground/80"),children:i.value!==void 0?i.format==="volume"?ss(i.value):L(i.value):"--"})]},i.label))}),t.data.depth&&e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>Re(s),className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ue,{className:f("w-3 h-3 transition-transform",p&&"rotate-180")}),"Market Depth (",t.data.depth.buy.length,"/",t.data.depth.sell.length,")"]}),p&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 bg-muted/30 rounded-lg border border-border/40 max-h-[400px] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-[9px] uppercase tracking-wider text-emerald-400 mb-2 flex items-center gap-1 sticky top-0 bg-muted/30 py-1",children:[e.jsx(Ve,{className:"w-3 h-3"})," Bids"]}),t.data.depth.buy.slice(0,a).map((i,x)=>e.jsx(me,{price:i.price,quantity:i.quantity,maxQty:Math.max(1,...t.data.depth.buy.map($=>$.quantity)),side:"buy"},x))]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-[9px] uppercase tracking-wider text-rose-400 mb-2 flex items-center gap-1 sticky top-0 bg-muted/30 py-1",children:[e.jsx(Ze,{className:"w-3 h-3"})," Asks"]}),t.data.depth.sell.slice(0,a).map((i,x)=>e.jsx(me,{price:i.price,quantity:i.quantity,maxQty:Math.max(1,...t.data.depth.sell.map($=>$.quantity)),side:"sell"},x))]})]})]}),e.jsx("div",{className:"text-[10px] text-muted-foreground/60 mt-3 font-mono",children:ts(t.data.timestamp)})]})]},s)})}),e.jsxs("div",{className:"rounded-xl bg-card border border-border overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Console"}),e.jsx(M,{variant:"outline",className:"text-[9px] border-border text-muted-foreground",children:E?R.length:T.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>Se(!E),className:f("h-7 px-2 text-xs",E?"text-cyan-400":"text-muted-foreground"),children:[e.jsx(Ge,{className:"w-3.5 h-3.5 mr-1"}),E?"Parsed":"Raw"]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>{H([]),K([])},className:"h-7 px-2 text-muted-foreground hover:text-foreground",children:e.jsx(de,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("div",{ref:_,className:"h-56 overflow-y-auto p-4 font-mono text-xs space-y-0.5",children:E?R.length===0?e.jsx("div",{className:"text-muted-foreground/60",children:"No raw messages..."}):R.map((s,t)=>e.jsx("div",{className:"text-muted-foreground break-all",children:s},t)):T.length===0?e.jsx("div",{className:"text-muted-foreground/60",children:"Waiting for events..."}):T.map((s,t)=>e.jsxs("div",{className:f("py-0.5",s.type==="success"&&"text-emerald-400",s.type==="error"&&"text-rose-400",s.type==="warn"&&"text-amber-400",s.type==="data"&&"text-cyan-400",s.type==="info"&&"text-muted-foreground"),children:[e.jsxs("span",{className:"text-muted-foreground/60",children:["[",s.timestamp,"]"]})," ",s.message]},t))})]})]})]})]})}export{ms as default};
