import{r as t,j as e}from"./vendor-react-RhKMXzW9.js";import{c as C,w as S,t as n,B as u}from"./index-DF0kztgS.js";import{C as i,b as o,c as l,d as p,a as c}from"./card-C5F8XFV1.js";import{I as E}from"./input-Bh0DHZLu.js";import{L as g}from"./label-q5iZXQ9c.js";import{Y as _,Z as B}from"./vendor-radix-hRiDuY7W.js";import{A as R,i as D,K as F,r as V,E as O,s as Y,af as G}from"./vendor-icons-Vls1I20C.js";import{L as M}from"./vendor-router-DdyOoyPF.js";import"./vendor-syntax-D6hV6JR3.js";const L=t.forwardRef(({className:r,...d},m)=>e.jsx(_,{className:C("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...d,ref:m,children:e.jsx(B,{className:C("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));L.displayName=_.displayName;function J(){const[r,d]=t.useState(null),[m,T]=t.useState(!0),[f,j]=t.useState(!1),[h,b]=t.useState(""),[x,I]=t.useState(!1),[N,v]=t.useState(!0),[k,y]=t.useState(10);t.useEffect(()=>{w()},[]);const w=async()=>{try{const a=(await S.get("/telegram/api/config")).data.data;d(a),v(a.broadcast_enabled),y(a.rate_limit_per_minute)}catch(s){console.error("Error fetching config:",s),n.error("Failed to load configuration")}finally{T(!1)}},A=async()=>{j(!0);try{const s={broadcast_enabled:N,rate_limit_per_minute:k};h&&(s.token=h);const a=await S.post("/telegram/config",s);a.data.status==="success"?(n.success("Configuration saved successfully"),b(""),w()):n.error(a.data.message||"Failed to save configuration")}catch(s){const a=s;n.error(a.response?.data?.message||"Failed to save configuration")}finally{j(!1)}};return m?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(M,{to:"/telegram",className:"text-muted-foreground hover:text-foreground",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(D,{className:"h-6 w-6"}),"Bot Configuration"]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure your Telegram bot settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(o,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Bot Token"]}),e.jsx(p,{children:"Your Telegram Bot API token from @BotFather"})]}),e.jsxs(c,{className:"space-y-4",children:[r?.has_token&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[e.jsx(V,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Token is configured"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:r?.has_token?"Update Token (optional)":"Bot Token"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(E,{type:x?"text":"password",placeholder:r?.has_token?"Enter new token to update":"Enter your bot token",value:h,onChange:s=>b(s.target.value),className:"pr-10"}),e.jsx(u,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>I(!x),children:x?e.jsx(O,{className:"h-4 w-4"}):e.jsx(Y,{className:"h-4 w-4"})})]})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get your token from @BotFather on Telegram"})]})]})]}),e.jsxs(i,{children:[e.jsxs(o,{children:[e.jsx(l,{children:"Settings"}),e.jsx(p,{children:"Configure bot behavior and limits"})]}),e.jsxs(c,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Broadcast Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow sending broadcast messages to all users"})]}),e.jsx(L,{checked:N,onCheckedChange:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Rate Limit (messages per minute)"}),e.jsx(E,{type:"number",value:k,onChange:s=>y(parseInt(s.target.value,10)||10),min:1,max:60}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum messages per minute per user (1-60)"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3",children:[e.jsx("a",{href:"https://docs.openalgo.in/trading-platform/telegram",target:"_blank",rel:"noopener noreferrer",children:e.jsxs(u,{variant:"outline",className:"w-full sm:w-auto",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),"View Documentation"]})}),e.jsxs(u,{onClick:A,disabled:f,children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),f?"Saving...":"Save Configuration"]})]}),e.jsxs(i,{children:[e.jsx(o,{children:e.jsx(l,{children:"Quick Setup Guide"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Need detailed instructions?"})," Visit our complete"," ",e.jsx("a",{href:"https://docs.openalgo.in/trading-platform/telegram",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-semibold",children:"Telegram Bot Setup Guide"})," ","for step-by-step instructions with screenshots."]})}),e.jsxs("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[e.jsx("h4",{className:"text-base font-semibold mb-2",children:"Quick Steps:"}),e.jsxs("ol",{className:"text-muted-foreground space-y-1 list-decimal list-inside text-sm",children:[e.jsxs("li",{children:["Get a bot token from ",e.jsx("strong",{children:"@BotFather"})," on Telegram"]}),e.jsx("li",{children:'Paste the token above and click "Save Configuration"'}),e.jsx("li",{children:"Start the bot from the dashboard"}),e.jsxs("li",{children:["Open your bot in Telegram and send"," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"/start"})]}),e.jsxs("li",{children:["Link your account:"," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"/link YOUR_API_KEY YOUR_HOST_URL"})]})]})]})]})]}),e.jsxs(i,{children:[e.jsxs(o,{children:[e.jsx(l,{children:"Bot Commands Available"}),e.jsx(p,{children:"Commands users can send to your bot"})]}),e.jsx(c,{children:e.jsxs("div",{className:"bg-muted rounded-lg p-4 font-mono text-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Account Management"}),e.jsx("p",{children:"/start - Initialize bot"}),e.jsx("p",{children:"/link <api_key> <host_url> - Link account"}),e.jsx("p",{children:"/unlink - Unlink account"}),e.jsx("p",{children:"/status - Check connection"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Trading Information"}),e.jsx("p",{children:"/menu - Interactive menu"}),e.jsx("p",{children:"/orderbook - View orders"}),e.jsx("p",{children:"/tradebook - View trades"}),e.jsx("p",{children:"/positions - Open positions"}),e.jsx("p",{children:"/holdings - View holdings"}),e.jsx("p",{children:"/funds - Account funds"}),e.jsx("p",{children:"/pnl - P&L summary"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Market Data"}),e.jsx("p",{children:"/quote RELIANCE - Get NSE quote"}),e.jsx("p",{children:"/quote NIFTY NSE_INDEX - Index quote"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Charts (default: 5m intraday)"}),e.jsx("p",{children:"/chart RELIANCE - 5min chart"}),e.jsx("p",{children:"/chart RELIANCE NSE daily - Daily chart"}),e.jsx("p",{children:"/chart RELIANCE NSE intraday 15m 10 - Custom"}),e.jsx("p",{children:"/chart RELIANCE NSE both - Both charts"})]}),e.jsx("div",{children:e.jsx("p",{children:"/help - Show all commands"})})]})})]})]})}export{J as default};
