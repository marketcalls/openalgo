import{r as j,j as e}from"./vendor-react-RhKMXzW9.js";import{c as g,B as p,e as s,t as I}from"./index-BLJkMYoy.js";import{A as f,b as y,a as N}from"./alert-DFEtW27i.js";import{C as d,b as o,c as m,d as w,a as h}from"./card-CJ7BKj_f.js";import{_ as L,$ as P,a0 as U,a1 as T,a2 as O}from"./vendor-radix-CK1Y6OF4.js";import{Y as B,A as G,m as v,aE as u,a2 as A,aK as S,aO as R,ao as D,ai as b,T as E,P as k,aP as M,w as Y,aw as H,aL as W}from"./vendor-icons-D08EYFn4.js";import{L as c}from"./vendor-router-DdyOoyPF.js";const F=L,a=j.forwardRef(({className:l,...r},n)=>e.jsx(P,{ref:n,className:g("border-b",l),...r}));a.displayName="AccordionItem";const t=j.forwardRef(({className:l,children:r,...n},x)=>e.jsx(U,{className:"flex",children:e.jsxs(T,{ref:x,className:g("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",l),...n,children:[r,e.jsx(B,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));t.displayName=T.displayName;const i=j.forwardRef(({className:l,children:r,...n},x)=>e.jsx(O,{ref:x,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:e.jsx("div",{className:g("pb-4 pt-0",l),children:r})}));i.displayName=O.displayName;const _=`"""
Sample EMA Crossover Strategy using OpenAlgo SDK
This strategy buys when fast EMA crosses above slow EMA
and sells when fast EMA crosses below slow EMA.
"""

from openalgo import api
import time

# Configuration
SYMBOL = "RELIANCE"
EXCHANGE = "NSE"
QUANTITY = 1
FAST_EMA = 9
SLOW_EMA = 21

# Initialize OpenAlgo client
client = api(
    api_key="YOUR_OPENALGO_API_KEY",
    host="http://127.0.0.1:5000"
)

def calculate_ema(prices, period):
    """Calculate Exponential Moving Average"""
    if len(prices) < period:
        return None
    multiplier = 2 / (period + 1)
    ema = sum(prices[:period]) / period
    for price in prices[period:]:
        ema = (price * multiplier) + (ema * (1 - multiplier))
    return ema

def get_ltp():
    """Get Last Traded Price"""
    try:
        quotes = client.quotes(symbol=SYMBOL, exchange=EXCHANGE)
        if quotes.get('status') == 'success':
            return quotes.get('data', {}).get('ltp')
    except Exception as e:
        print(f"Error fetching quotes: {e}")
    return None

def main():
    print(f"Starting EMA Crossover Strategy for {SYMBOL}")
    print(f"Fast EMA: {FAST_EMA}, Slow EMA: {SLOW_EMA}")

    prices = []
    position = None  # 'long', 'short', or None

    while True:
        try:
            ltp = get_ltp()
            if ltp:
                prices.append(ltp)
                # Keep only last 100 prices
                prices = prices[-100:]

                fast_ema = calculate_ema(prices, FAST_EMA)
                slow_ema = calculate_ema(prices, SLOW_EMA)

                if fast_ema and slow_ema:
                    print(f"LTP: {ltp:.2f} | Fast EMA: {fast_ema:.2f} | Slow EMA: {slow_ema:.2f}")

                    # Buy signal: Fast EMA crosses above Slow EMA
                    if fast_ema > slow_ema and position != 'long':
                        print("BUY SIGNAL!")
                        response = client.placeorder(
                            symbol=SYMBOL,
                            exchange=EXCHANGE,
                            action="BUY",
                            quantity=QUANTITY,
                            price_type="MARKET",
                            product_type="MIS"
                        )
                        print(f"Order response: {response}")
                        position = 'long'

                    # Sell signal: Fast EMA crosses below Slow EMA
                    elif fast_ema < slow_ema and position == 'long':
                        print("SELL SIGNAL!")
                        response = client.placeorder(
                            symbol=SYMBOL,
                            exchange=EXCHANGE,
                            action="SELL",
                            quantity=QUANTITY,
                            price_type="MARKET",
                            product_type="MIS"
                        )
                        print(f"Order response: {response}")
                        position = None

            time.sleep(5)  # Check every 5 seconds

        except KeyboardInterrupt:
            print("Strategy stopped by user")
            break
        except Exception as e:
            print(f"Error: {e}")
            time.sleep(5)

if __name__ == "__main__":
    main()
`,C=l=>{navigator.clipboard.writeText(l),I.success("Copied to clipboard")};function V(){return e.jsxs("div",{className:"container mx-auto py-6 space-y-6 max-w-4xl",children:[e.jsx(p,{variant:"ghost",asChild:!0,children:e.jsxs(c,{to:"/python",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Back to Python Strategies"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(v,{className:"h-6 w-6"}),"Python Strategy Guide"]}),e.jsx("p",{className:"text-muted-foreground",children:"Learn how to create, upload, and run automated trading strategies using Python"})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-green-500"}),"Quick Start"]}),e.jsx(w,{children:"Get your first strategy running in 5 minutes"})]}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Install OpenAlgo SDK"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("code",{className:"bg-muted px-2 py-1 rounded text-sm",children:"pip install openalgo"}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>C("pip install openalgo"),children:e.jsx(A,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Get your API Key"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Go to ",e.jsx(c,{to:"/apikey",className:"text-primary hover:underline",children:"API Key"})," page and copy your OpenAlgo API key"]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Write your strategy"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a Python file (.py) with your trading logic using the OpenAlgo SDK"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Upload and run"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Upload your strategy file on the ",e.jsx(c,{to:"/python",className:"text-primary hover:underline",children:"Python Strategies"})," page and click Start"]})]})]})]})})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Sample Strategy: EMA Crossover"]}),e.jsx(w,{children:"A simple moving average crossover strategy you can use as a template"})]}),e.jsx(h,{children:e.jsxs("div",{className:"relative",children:[e.jsxs(p,{variant:"outline",size:"sm",className:"absolute top-2 right-2 z-10",onClick:()=>C(_),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Copy"]}),e.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-xs max-h-96 overflow-y-auto",children:e.jsx("code",{children:_})})]})})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Frequently Asked Questions"]})}),e.jsx(h,{children:e.jsxs(F,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(a,{value:"logs",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"How do I see my strategy logs?"]})}),e.jsxs(i,{className:"text-muted-foreground space-y-2",children:[e.jsxs("p",{children:["All ",e.jsx("code",{children:"print()"})," statements in your strategy are captured in log files."]}),e.jsx("p",{children:"To view logs:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:["Click the ",e.jsx("strong",{children:"Logs"})," button on your strategy card"]}),e.jsx("li",{children:"Select a log file from the list (newest first)"}),e.jsxs("li",{children:["Enable ",e.jsx("strong",{children:"Auto-refresh"})," to see live updates while running"]})]}),e.jsxs("p",{className:"text-sm",children:["Log files are stored in: ",e.jsx("code",{children:"log/strategies/"})]})]})]}),e.jsxs(a,{value:"scheduling",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),"How does scheduling work?"]})}),e.jsxs(i,{className:"text-muted-foreground space-y-2",children:[e.jsx("p",{children:"You can schedule strategies to automatically start and stop at specific times:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Start Time:"})," When the strategy should begin (e.g., 9:15 AM)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stop Time:"})," When to stop (e.g., 3:30 PM) - optional"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Days:"})," Which days to run (Mon-Fri typical)"]})]}),e.jsxs(f,{className:"mt-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(y,{children:"Holiday Protection"}),e.jsx(N,{children:"Scheduled strategies will NOT start on market holidays or weekends, even if scheduled. This prevents unnecessary resource usage."})]})]})]}),e.jsxs(a,{value:"special-trading",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),"What about special trading sessions (Budget Day, Muhurat)?"]})}),e.jsxs(i,{className:"text-muted-foreground space-y-3",children:[e.jsx("p",{children:"Exchanges occasionally conduct special trading sessions on holidays/weekends:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Budget Day:"})," Live trading on Union Budget day (e.g., Feb 1, 2026 - Sunday)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Muhurat Trading:"})," Diwali day special session (usually 1 hour evening)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Special Saturday:"})," Occasional Saturday trading sessions"]})]}),e.jsxs("div",{className:"bg-primary/10 border border-primary/20 p-4 rounded-lg mt-3",children:[e.jsx("p",{className:"font-semibold text-primary mb-3",children:"Step-by-Step: Trading on Special Sessions"}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Update Holiday Calendar (Optional but Recommended)"}),e.jsxs("p",{className:"text-muted-foreground",children:["Go to ",e.jsx(c,{to:"/admin/holidays",className:"text-primary hover:underline",children:"Admin → Holidays"})]}),e.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 text-muted-foreground",children:[e.jsx("li",{children:"Find the special session date (e.g., Feb 1, 2026)"}),e.jsx("li",{children:"Delete it from holidays OR add special session timing"}),e.jsx("li",{children:"This enables the scheduler to auto-start if configured"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Update Market Timings (If Different Hours)"}),e.jsxs("p",{className:"text-muted-foreground",children:["Go to ",e.jsx(c,{to:"/admin/market-timings",className:"text-primary hover:underline",children:"Admin → Market Timings"})]}),e.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 text-muted-foreground",children:[e.jsx("li",{children:"Muhurat: Usually 6:00 PM - 7:00 PM (not regular hours)"}),e.jsx("li",{children:"Budget Day: Usually 9:00 AM - 3:30 PM"}),e.jsx("li",{children:"Update the timings for NSE/BSE/NFO as announced"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Update Your Strategy Schedule (If Using Scheduler)"}),e.jsx("p",{className:"text-muted-foreground",children:"Go to your strategy → Schedule"}),e.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 text-muted-foreground",children:[e.jsx("li",{children:'Add the special day (e.g., add "Sun" for Sunday Budget Day)'}),e.jsx("li",{children:"Update start/stop time to match special session hours"}),e.jsx("li",{children:"Remember to remove after the special session!"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(s,{className:"h-6 w-6 rounded-full flex items-center justify-center shrink-0",children:"4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"OR Simply Start Manually"}),e.jsx("p",{className:"text-muted-foreground",children:"The easiest approach:"}),e.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 text-muted-foreground",children:[e.jsx("li",{children:"Login to OpenAlgo before the special session"}),e.jsx("li",{children:"Wait for master contracts to download"}),e.jsxs("li",{children:["Click ",e.jsx(u,{className:"h-3 w-3 inline"})," Start on your strategy"]}),e.jsx("li",{children:"Click Stop when session ends"})]})]})]})]})]}),e.jsxs(f,{className:"mt-3",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(y,{children:"Important: Revert Changes After Special Session"}),e.jsx(N,{children:"If you modified holiday calendar, market timings, or schedule settings for a special session, remember to revert them back to normal after the session ends. Otherwise, your strategy might run on actual holidays!"})]})]})]}),e.jsxs(a,{value:"market-hours",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"What happens on weekends and after market hours?"]})}),e.jsxs(i,{className:"text-muted-foreground space-y-2",children:[e.jsx("p",{children:"OpenAlgo is aware of market timings and handles non-trading periods:"}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg mt-2 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{variant:"outline",className:"text-red-500 border-red-500",children:"Weekends"}),e.jsx("span",{children:"Scheduled strategies will NOT auto-start on Sat/Sun"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{variant:"outline",className:"text-yellow-500 border-yellow-500",children:"Holidays"}),e.jsx("span",{children:"Scheduled strategies skip market holidays automatically"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{variant:"outline",className:"text-blue-500 border-blue-500",children:"After Hours"}),e.jsx("span",{children:"Running strategies continue until stop time or manual stop"})]})]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Note:"})," If your strategy is already running when market closes, it will continue running. Use the scheduled stop time or manually stop it."]})]})]}),e.jsxs(a,{value:"master-contract",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Why does my strategy need master contracts?"]})}),e.jsxs(i,{className:"text-muted-foreground space-y-2",children:[e.jsx("p",{children:"Master contracts contain the symbol mappings required by your broker. Strategies cannot start until master contracts are downloaded."}),e.jsx("p",{children:"Master contracts are automatically downloaded when you:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Log in to OpenAlgo"}),e.jsx("li",{children:"Wait for the download to complete (shown in header)"})]}),e.jsx("p",{className:"text-sm",children:'If you see "Waiting for master contracts", just wait a moment after login.'})]})]}),e.jsxs(a,{value:"resource-limits",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Are there any resource limits?"]})}),e.jsxs(i,{className:"text-muted-foreground space-y-2",children:[e.jsx("p",{children:"Yes, to prevent buggy strategies from crashing OpenAlgo, the following limits are enforced (Linux/Mac only):"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-sm",children:[e.jsxs("div",{className:"bg-muted p-2 rounded",children:[e.jsx(H,{className:"h-4 w-4 inline mr-1"}),"Memory: 512 MB max"]}),e.jsxs("div",{className:"bg-muted p-2 rounded",children:[e.jsx(k,{className:"h-4 w-4 inline mr-1"}),"CPU Time: 1 hour max"]}),e.jsxs("div",{className:"bg-muted p-2 rounded",children:[e.jsx(W,{className:"h-4 w-4 inline mr-1"}),"Open Files: 256 max"]}),e.jsxs("div",{className:"bg-muted p-2 rounded",children:[e.jsx(M,{className:"h-4 w-4 inline mr-1"}),"Processes: 64 max"]})]})]})]}),e.jsxs(a,{value:"restart",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"What happens if I restart OpenAlgo?"]})}),e.jsxs(i,{className:"text-muted-foreground space-y-2",children:[e.jsx("p",{children:"OpenAlgo handles restarts gracefully:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Strategy configurations are saved to disk"}),e.jsx("li",{children:"Running strategies are detected and restored if still alive"}),e.jsx("li",{children:"Schedules are automatically re-created"}),e.jsx("li",{children:"If a strategy crashed, it will show an error state"})]}),e.jsx("p",{className:"text-sm",children:"Note: Strategies that were running will attempt to restart automatically after master contracts are downloaded."})]})]}),e.jsxs(a,{value:"best-practices",children:[e.jsx(t,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Best practices for writing strategies"]})}),e.jsx(i,{className:"text-muted-foreground space-y-2",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Use print() for logging"})," - All output goes to log files"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Handle exceptions"})," - Wrap critical code in try/except"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Add sleep intervals"})," - Don't spam API calls, use time.sleep()"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Use infinite loops carefully"})," - Always have a way to exit"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Test with small quantities"})," - Start with 1 share/lot"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Monitor logs initially"})," - Watch the first few runs closely"]})]})})]})]})})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"OpenAlgo SDK Quick Reference"]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Initialize Client"}),e.jsx("code",{className:"text-xs",children:'client = api(api_key="YOUR_KEY", host="http://127.0.0.1:5000")'})]}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Place Order"}),e.jsx("code",{className:"text-xs",children:"client.placeorder(symbol, exchange, action, quantity, price_type, product_type)"})]}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Get Quotes"}),e.jsx("code",{className:"text-xs",children:'client.quotes(symbol="RELIANCE", exchange="NSE")'})]}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Get Positions"}),e.jsx("code",{className:"text-xs",children:"client.positionbook()"})]}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Get Holdings"}),e.jsx("code",{className:"text-xs",children:"client.holdings()"})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["For complete SDK documentation, visit:"," ",e.jsx("a",{href:"https://docs.openalgo.in",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"docs.openalgo.in"})]})]})]})]})}export{V as default};
