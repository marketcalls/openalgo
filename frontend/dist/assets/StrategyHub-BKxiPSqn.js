import{r as x,j as e,c as le}from"./vendor-react-Df-MYEHc.js";import{d as f}from"./strategy-dashboard-BdMkqh6u.js";import{s as z}from"./strategy-D1On98u6.js";import{Z as oe,d as ce,l as de,e as w,B as y,s as j,S as xe,b as ue,_ as me,$ as pe}from"./index-Bd6js41n.js";import{C as b,d as v,a as H,b as X}from"./card-CC-hOcpD.js";import{a as ge}from"./useMarketStatus-B-LZSON4.js";import{aw as he,a$ as je,c as fe,b0 as be,a8 as ve,l as Ne,b1 as _e,X as J,b2 as ye,T as U,b3 as ke,aL as we,a4 as Se,H as Ce,b4 as Te,aZ as Pe,b5 as Le,an as Ee,a3 as De,aX as $e,e as Fe,g as Re}from"./vendor-icons-nFj7rtAi.js";import{T as Me,a as Ae,b as S,c as C}from"./tabs-Ct44Qaax.js";import{T as q,a as Y,b as T,c as p,d as W,e as g}from"./table-CIpPgAyB.js";import{R as Be,A as Oe,C as Ge,X as ze,Y as He,T as Ue,e as qe}from"./vendor-charts-DPXZ0pfV.js";import{P as Ye}from"./progress-BTDl04tw.js";import{S as We}from"./scroll-area-DLwf-lJa.js";import{I as ee}from"./input-DJQENBZF.js";import{L as te}from"./label-DqJSyuUm.js";import{S as Ie,a as Ve,b as Xe,c as Ze,d as Ke}from"./select-B7fGBsLz.js";import{D as Qe,b as Je,c as et,d as tt}from"./dialog-DXc49685.js";import{a as st}from"./vendor-router-4BT-EZah.js";import"./vendor-radix-IoylIoim.js";import"./useQuery-v_5DZ0OA.js";const Z={overview:null,strategies:new Map,positions:new Map,summary:new Map,riskEvents:new Map,positionGroups:new Map,circuitBreakerStatus:new Map,orders:new Map},I=oe()(s=>({...Z,setDashboardData:a=>s({overview:a}),setStrategies:a=>s(()=>{const r=new Map;for(const i of a)r.set(i.id,i);return{strategies:r}}),setPositions:(a,r)=>s(i=>{const t=new Map(i.positions);return t.set(a,r),{positions:t}}),updatePosition:(a,r)=>s(i=>{const t=new Map(i.positions),o=t.get(a)||[],n=o.findIndex(l=>l.id===r.id);if(n>=0){const l=[...o];l[n]=r,t.set(a,l)}else t.set(a,[...o,r]);return{positions:t}}),removePosition:(a,r)=>s(i=>{const t=new Map(i.positions),o=t.get(a)||[];return t.set(a,o.filter(n=>n.id!==r)),{positions:t}}),setSummary:(a,r)=>s(i=>{const t=new Map(i.summary);return t.set(a,r),{summary:t}}),addRiskEvent:(a,r)=>s(i=>{const t=new Map(i.riskEvents),o=t.get(a)||[];return t.set(a,[r,...o].slice(0,100)),{riskEvents:t}}),setRiskEvents:(a,r)=>s(i=>{const t=new Map(i.riskEvents);return t.set(a,r),{riskEvents:t}}),setPositionGroups:(a,r)=>s(i=>{const t=new Map(i.positionGroups);return t.set(a,r),{positionGroups:t}}),updateGroup:(a,r)=>s(i=>{const t=new Map(i.positionGroups),o=t.get(a)||[],n=o.findIndex(l=>l.id===r.id);if(n>=0){const l=[...o];l[n]=r,t.set(a,l)}else t.set(a,[...o,r]);return{positionGroups:t}}),updateCircuitBreaker:(a,r)=>s(i=>{const t=new Map(i.circuitBreakerStatus);return t.set(a,r),{circuitBreakerStatus:t}}),updateOrder:(a,r)=>s(i=>{const t=new Map(i.orders),o=t.get(a)||[],n=o.findIndex(l=>l.id===r.id);if(n>=0){const l=[...o];l[n]=r,t.set(a,l)}else t.set(a,[...o,r]);return{orders:t}}),reset:()=>s(Z)}));function at(){const{isAuthenticated:s}=ce(),a=x.useRef(null),r=I();return x.useEffect(()=>{if(!s)return;const i=window.location.protocol,t=window.location.hostname,o=window.location.port;a.current=de(`${i}//${t}:${o}`,{transports:["polling"],upgrade:!1,reconnectionAttempts:5,reconnectionDelay:1e3,timeout:2e4,forceNew:!1});const n=a.current;return n.on("strategy_position_opened",l=>{l.position&&r.updatePosition(l.strategy_id,l.position)}),n.on("strategy_position_closed",l=>{l.strategy_id&&l.position_id&&r.removePosition(l.strategy_id,l.position_id)}),n.on("strategy_order_filled",l=>{l.position&&r.updatePosition(l.strategy_id,l.position)}),n.on("strategy_order_update",l=>{l.order&&r.updateOrder(l.strategy_id,l.order)}),n.on("strategy_position_update",l=>{l.position&&r.updatePosition(l.strategy_id,l.position)}),n.on("strategy_risk_event",l=>{l.event&&r.addRiskEvent(l.strategy_id,l.event)}),n.on("strategy_circuit_breaker",l=>{r.updateCircuitBreaker(l.strategy_id,{status:l.status,reason:l.reason})}),n.on("strategy_group_update",l=>{l.group&&r.updateGroup(l.strategy_id,l.group)}),n.on("strategy_pnl_update",l=>{if(l.summary){const d=r.summary.get(l.strategy_id);d&&r.setSummary(l.strategy_id,{...d,total_unrealized_pnl:l.summary.total_unrealized_pnl,today_realized_pnl:l.summary.today_realized_pnl})}}),n.on("strategy_order_placed",l=>{l.order&&r.updateOrder(l.strategy_id,l.order)}),n.on("strategy_order_cancelled",l=>{l.order&&r.updateOrder(l.strategy_id,l.order)}),n.on("strategy_trailstop_moved",l=>{l.position&&r.updatePosition(l.strategy_id,l.position)}),n.on("builder_leg_update",()=>{}),n.on("builder_execution_complete",()=>{}),()=>{n.disconnect()}},[s,r]),a.current}const K={market_open:{label:"Market Open",dot:"bg-green-500 animate-pulse",bg:"bg-green-50 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-800"},pre_market:{label:"Pre-Market",dot:"bg-yellow-500",bg:"bg-yellow-50 text-yellow-700 border-yellow-200 dark:bg-yellow-950 dark:text-yellow-300 dark:border-yellow-800"},post_market:{label:"Post-Market",dot:"bg-amber-500",bg:"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-950 dark:text-amber-300 dark:border-amber-800"},market_closed:{label:"Market Closed",dot:"bg-gray-400",bg:"bg-gray-50 text-gray-600 border-gray-200 dark:bg-gray-900 dark:text-gray-400 dark:border-gray-700"},weekend:{label:"Weekend",dot:"bg-gray-400",bg:"bg-gray-50 text-gray-600 border-gray-200 dark:bg-gray-900 dark:text-gray-400 dark:border-gray-700"},holiday:{label:"Holiday",dot:"bg-purple-400",bg:"bg-purple-50 text-purple-600 border-purple-200 dark:bg-purple-950 dark:text-purple-400 dark:border-purple-800"}};function rt(){const{data:s,isLoading:a}=ge();if(a||!s)return e.jsx(w,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500",children:"Loading..."});const r=K[s.phase]||K.market_closed;return e.jsxs(w,{variant:"outline",className:`text-xs gap-1.5 ${r.bg}`,children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${r.dot}`}),r.label]})}function Q(s){return s>0?"text-green-600":s<0?"text-red-600":"text-muted-foreground"}function it({overview:s,todayPnl:a,onCreateStrategy:r}){const i=s?.total_active_positions||0,t=s?.total_unrealized_pnl||0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Strategy Hub"}),e.jsx(rt,{})]}),e.jsx(y,{onClick:r,children:"Create Strategy"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsx(b,{children:e.jsxs(v,{className:"flex items-center gap-3 p-4",children:[e.jsx(he,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Positions"}),e.jsx("p",{className:"text-lg font-semibold",children:i})]})]})}),e.jsx(b,{children:e.jsxs(v,{className:"flex items-center gap-3 p-4",children:[e.jsx(je,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unrealized P&L"}),e.jsxs("p",{className:`text-lg font-semibold ${Q(t)}`,children:[t>0?"+":"",t.toFixed(2)]})]})]})}),e.jsx(b,{children:e.jsxs(v,{className:"flex items-center gap-3 p-4",children:[e.jsx(fe,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Today's P&L"}),e.jsxs("p",{className:`text-lg font-semibold ${Q(a||0)}`,children:[(a||0)>0?"+":"",(a||0).toFixed(2)]})]})]})})]})]})}function nt({strategy:s,mappings:a,strategyType:r,riskConfig:i,onOpenRiskConfig:t}){const o=`${window.location.origin}/strategy/webhook/${s.webhook_id}`,n=()=>{navigator.clipboard.writeText(o),j.success("Webhook URL copied")},l=async()=>{try{const d=await f.cloneStrategy(s.id,r);j.success(`Strategy cloned (ID: ${d.strategy_id})`)}catch{j.error("Failed to clone strategy")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Platform"}),e.jsx("p",{className:"text-sm font-medium capitalize",children:s.platform})]})}),e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mode"}),e.jsx("p",{className:"text-sm font-medium",children:s.trading_mode})]})}),e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-sm font-medium",children:s.is_intraday?"Intraday":"Positional"})]})}),e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Status"}),e.jsx(w,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]})})]}),e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Webhook URL"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded flex-1 truncate",children:o}),e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:e.jsx(ve,{className:"h-3.5 w-3.5"})})]})]})}),a.length>0&&e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Symbol Mappings (",a.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.map(d=>e.jsxs(w,{variant:"outline",className:"text-xs",children:[d.symbol," (",d.exchange,") x",d.quantity," ",d.product_type]},d.id))})]})}),i&&e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Risk Configuration"}),e.jsxs(y,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:t,children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SL: "}),i.default_stoploss_type?`${i.default_stoploss_value} ${i.default_stoploss_type}`:"Disabled"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"TGT: "}),i.default_target_type?`${i.default_target_value} ${i.default_target_type}`:"Disabled"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"TSL: "}),i.default_trailstop_type?`${i.default_trailstop_value} ${i.default_trailstop_type}`:"Disabled"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"BE: "}),i.default_breakeven_type?`${i.default_breakeven_threshold} ${i.default_breakeven_type}`:"Disabled"]})]})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(y,{variant:"outline",size:"sm",onClick:l,children:[e.jsx(_e,{className:"h-3.5 w-3.5 mr-1"}),"Clone Strategy"]})})]})}const lt={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",pending_entry:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",exiting:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",closed:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400",stoploss:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",target:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",trailstop:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",manual:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",squareoff:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",group_close:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",breakeven:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",complete:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",open:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",cancelled:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"},ot={pending_entry:"Pending",stoploss:"SL Hit",target:"TGT Hit",trailstop:"TSL Hit",squareoff:"Squared Off",group_close:"Group Close",breakeven:"Breakeven"};function F({value:s}){if(!s)return null;const a=s.toLowerCase(),r=lt[a]||"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400",i=ot[a]||s.charAt(0).toUpperCase()+s.slice(1);return e.jsx(w,{variant:"outline",className:`text-xs font-medium ${r}`,children:i})}function ct(s){const{ltp:a,stoploss_price:r,target_price:i,trailstop_price:t,action:o}=s,n=o==="BUY",l=(d,m)=>{if(!d||d===0||!a||a===0)return null;const c=m?n?d-a:a-d:n?a-d:d-a;return{points:Math.abs(c),pct:Math.abs(c)/a*100}};return{sl:l(r,!1),tgt:l(i,!0),tsl:l(t,!1)}}function A(s){return s===null||s>10?"safe":s>=5?"warning":"danger"}const B={safe:"text-muted-foreground",warning:"text-amber-500",danger:"text-destructive animate-pulse font-bold"};function O(s){return s?`${s.points.toFixed(1)} (${s.pct.toFixed(1)}%)`:"—"}const se=le.memo(function({position:a,onClose:r,closing:i}){const t=ct(a),o=(a.unrealized_pnl||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return e.jsxs("tr",{className:"border-b text-xs",children:[e.jsx("td",{className:"py-2 px-2 font-medium",children:a.symbol}),e.jsxs("td",{className:`py-2 px-1 ${a.action==="BUY"?"text-green-600":"text-red-600"}`,children:[a.action==="BUY"?"+":"-",a.quantity]}),e.jsx("td",{className:"py-2 px-1",children:a.average_entry_price?.toFixed(2)??"—"}),e.jsx("td",{className:"py-2 px-1",children:a.ltp?.toFixed(2)??"—"}),e.jsx("td",{className:`py-2 px-1 font-medium ${o}`,children:a.unrealized_pnl?.toFixed(2)??"0.00"}),e.jsx("td",{className:"py-2 px-1",children:a.stoploss_price?.toFixed(2)??"—"}),e.jsx("td",{className:`py-2 px-1 ${B[A(t.sl?.pct??null)]}`,children:O(t.sl)}),e.jsx("td",{className:"py-2 px-1",children:a.target_price?.toFixed(2)??"—"}),e.jsx("td",{className:`py-2 px-1 ${B[A(t.tgt?.pct??null)]}`,children:O(t.tgt)}),e.jsx("td",{className:"py-2 px-1",children:a.trailstop_price?.toFixed(2)??"—"}),e.jsx("td",{className:`py-2 px-1 ${B[A(t.tsl?.pct??null)]}`,children:O(t.tsl)}),e.jsx("td",{className:"py-2 px-1",children:a.breakeven_activated&&e.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 px-1 rounded",children:"BE"})}),e.jsx("td",{className:"py-2 px-1",children:e.jsx(F,{value:a.position_state})}),e.jsx("td",{className:"py-2 px-1",children:e.jsx(y,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>r(a.id),disabled:i,children:e.jsx(J,{className:"h-3 w-3"})})})]})});function dt({group:s,legCount:a,combinedPnl:r,onCloseGroup:i}){const t=r>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",o=s.group_status==="complete"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":s.group_status==="partial"?"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300";return e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-muted/50 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-medium",children:["Group (",a,"/",s.expected_legs," legs)"]}),e.jsx(w,{variant:"outline",className:`text-[10px] ${o}`,children:s.group_status})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-sm font-semibold ${t}`,children:[r>=0?"+":"",r.toFixed(2)]}),e.jsxs(y,{variant:"ghost",size:"sm",className:"h-6 text-xs gap-1",onClick:i,children:[e.jsx(J,{className:"h-3 w-3"}),"Close Group"]})]})]})}function xt({group:s,positions:a,onCloseGroup:r,onClosePosition:i}){const t=a.reduce((o,n)=>o+(n.unrealized_pnl||0),0);return e.jsxs("div",{className:"border rounded-lg overflow-hidden border-l-2 border-l-blue-500",children:[e.jsx(dt,{group:s,legCount:a.length,combinedPnl:t,onCloseGroup:()=>r(s.id)}),e.jsx("table",{className:"w-full text-xs",children:e.jsx("tbody",{children:a.map(o=>e.jsx(se,{position:o,onClose:i},o.id))})})]})}function L({title:s="No data",description:a="Nothing to display yet.",icon:r}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-muted-foreground",children:[r||e.jsx(ye,{className:"h-10 w-10 mb-3 opacity-40"}),e.jsx("p",{className:"text-sm font-medium",children:s}),e.jsx("p",{className:"text-xs mt-1",children:a})]})}const ut=["Symbol","Qty","Entry","LTP","P&L","SL","SL Dist","TGT","TGT Dist","TSL","TSL Dist","BE","Status",""];function mt({strategyId:s,strategyType:a,positions:r,groups:i,onRefresh:t}){const[o,n]=x.useState(null);if(r.length===0)return e.jsx(L,{title:"No positions",description:"No active positions for this strategy."});const l=async u=>{n(u);try{await f.closePosition(s,u,a),j.success("Exit order placed"),t()}catch{j.error("Failed to close position")}finally{n(null)}},d=async u=>{try{await f.closePositionGroup(s,u,a),j.success("Group close orders placed"),t()}catch{j.error("Failed to close group")}},m=new Set,c=new Map;if(i&&i.length>0){for(const u of i)m.add(u.id),c.set(u.id,[]);for(const u of r)u.position_group_id&&c.has(u.position_group_id)&&c.get(u.position_group_id).push(u)}const k=r.filter(u=>!u.position_group_id||!m.has(u.position_group_id));return e.jsxs("div",{className:"space-y-3",children:[i&&i.map(u=>{const _=c.get(u.id)||[];return _.length===0?null:e.jsx(xt,{group:u,positions:_,onCloseGroup:d,onClosePosition:l},u.id)}),k.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b",children:ut.map((u,_)=>e.jsx("th",{className:"py-2 px-2 text-left font-medium text-muted-foreground",children:u},_))})}),e.jsx("tbody",{children:k.map(u=>e.jsx(se,{position:u,onClose:l,closing:o===u.id},u.id))})]})})]})}function pt({strategyId:s,strategyType:a}){const[r,i]=x.useState([]),[t,o]=x.useState(!0);return x.useEffect(()=>{let n=!1;return o(!0),f.getOrders(s,a,{limit:50}).then(l=>{n||i(l)}).catch(()=>{}).finally(()=>{n||o(!1)}),()=>{n=!0}},[s,a]),t?e.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"Loading orders..."}):r.length===0?e.jsx(L,{title:"No orders",description:"No orders recorded for this strategy."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(T,{children:[e.jsx(p,{children:"Order ID"}),e.jsx(p,{children:"Symbol"}),e.jsx(p,{children:"Action"}),e.jsx(p,{children:"Type"}),e.jsx(p,{className:"text-right",children:"Qty"}),e.jsx(p,{className:"text-right",children:"Price"}),e.jsx(p,{children:"Status"}),e.jsx(p,{children:"Time"})]})}),e.jsx(W,{children:r.map(n=>e.jsxs(T,{children:[e.jsx(g,{className:"text-xs font-mono",children:n.orderid}),e.jsx(g,{className:"text-xs",children:n.symbol}),e.jsx(g,{children:e.jsx("span",{className:`text-xs font-medium ${n.action==="BUY"?"text-green-600":"text-red-600"}`,children:n.action})}),e.jsxs(g,{className:"text-xs",children:[n.is_entry?"Entry":"Exit",n.exit_reason&&` (${n.exit_reason})`]}),e.jsx(g,{className:"text-right text-xs",children:n.quantity}),e.jsx(g,{className:"text-right text-xs",children:n.average_price?n.average_price.toFixed(2):n.price.toFixed(2)}),e.jsx(g,{children:e.jsx(F,{value:n.order_status})}),e.jsx(g,{className:"text-xs text-muted-foreground",children:n.created_at?new Date(n.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"-"})]},n.id))})]})})}function gt(s){return s?s>0?"text-green-600":s<0?"text-red-600":"":""}function ht({strategyId:s,strategyType:a}){const[r,i]=x.useState([]),[t,o]=x.useState(!0);return x.useEffect(()=>{let n=!1;return o(!0),f.getTrades(s,a,{limit:50}).then(l=>{n||i(l)}).catch(()=>{}).finally(()=>{n||o(!1)}),()=>{n=!0}},[s,a]),t?e.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"Loading trades..."}):r.length===0?e.jsx(L,{title:"No trades",description:"No trade history for this strategy."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(T,{children:[e.jsx(p,{children:"Symbol"}),e.jsx(p,{children:"Action"}),e.jsx(p,{children:"Type"}),e.jsx(p,{className:"text-right",children:"Qty"}),e.jsx(p,{className:"text-right",children:"Price"}),e.jsx(p,{className:"text-right",children:"P&L"}),e.jsx(p,{children:"Exit Reason"}),e.jsx(p,{children:"Time"})]})}),e.jsx(W,{children:r.map(n=>e.jsxs(T,{children:[e.jsx(g,{className:"text-xs font-medium",children:n.symbol}),e.jsx(g,{children:e.jsx("span",{className:`text-xs font-medium ${n.action==="BUY"?"text-green-600":"text-red-600"}`,children:n.action})}),e.jsx(g,{className:"text-xs capitalize",children:n.trade_type}),e.jsx(g,{className:"text-right text-xs",children:n.quantity}),e.jsx(g,{className:"text-right text-xs",children:n.price.toFixed(2)}),e.jsx(g,{className:`text-right text-xs font-medium ${gt(n.pnl)}`,children:n.pnl!=null?n.pnl.toFixed(2):"-"}),e.jsx(g,{children:n.exit_reason&&e.jsx(F,{value:n.exit_reason})}),e.jsx(g,{className:"text-xs text-muted-foreground",children:n.created_at?new Date(n.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"-"})]},n.id))})]})})}function N({label:s,value:a,sub:r,color:i}){return e.jsx(b,{children:e.jsxs(v,{className:"p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:s}),e.jsx("p",{className:`text-lg font-semibold ${i||""}`,children:a}),r&&e.jsx("p",{className:"text-[10px] text-muted-foreground",children:r})]})})}function jt({summary:s}){const a=r=>r>0?"text-green-600":r<0?"text-red-600":"";return e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:[e.jsx(N,{label:"Win Rate",value:`${s.win_rate.toFixed(1)}%`,sub:`${s.winning_trades}W / ${s.losing_trades}L`}),e.jsx(N,{label:"Profit Factor",value:s.profit_factor.toFixed(2),color:s.profit_factor>1?"text-green-600":"text-red-600"}),e.jsx(N,{label:"Expectancy",value:s.expectancy.toFixed(2),color:a(s.expectancy)}),e.jsx(N,{label:"Risk:Reward",value:s.risk_reward_ratio.toFixed(2)}),e.jsx(N,{label:"Avg Win",value:s.avg_win.toFixed(2),color:"text-green-600"}),e.jsx(N,{label:"Avg Loss",value:s.avg_loss.toFixed(2),color:"text-red-600"}),e.jsx(N,{label:"Best Streak",value:`${s.max_consecutive_wins} wins`,color:"text-green-600"}),e.jsx(N,{label:"Worst Streak",value:`${s.max_consecutive_losses} losses`,color:"text-red-600"}),e.jsx(N,{label:"Cumulative P&L",value:s.cumulative_pnl.toFixed(2),color:a(s.cumulative_pnl)}),e.jsx(N,{label:"Max Drawdown",value:s.max_drawdown.toFixed(2),sub:`${s.max_drawdown_pct.toFixed(1)}%`,color:"text-red-600"}),e.jsx(N,{label:"Total Trades",value:s.total_trades}),e.jsx(N,{label:"Active Positions",value:s.active_positions})]})}function ft({data:s}){if(s.length===0)return e.jsx("div",{className:"h-[250px] flex items-center justify-center text-sm text-muted-foreground",children:"No P&L data to display"});const a=s.map(t=>({date:t.date,pnl:t.cumulative_pnl,daily:t.total_pnl})),i=(a[a.length-1]?.pnl||0)>=0?"#16a34a":"#dc2626";return e.jsx(Be,{width:"100%",height:250,children:e.jsxs(Oe,{data:a,margin:{top:5,right:10,left:10,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"pnlGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:i,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:i,stopOpacity:0})]})}),e.jsx(Ge,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ze,{dataKey:"date",tick:{fontSize:10},tickFormatter:t=>{const o=t.split("-");return`${o[2]}/${o[1]}`}}),e.jsx(He,{tick:{fontSize:10}}),e.jsx(Ue,{contentStyle:{fontSize:12,borderRadius:8},formatter:(t,o)=>[typeof t=="number"?t.toFixed(2):String(t??"0.00"),o==="pnl"?"Cumulative":"Daily"],labelFormatter:t=>`Date: ${String(t)}`}),e.jsx(qe,{type:"monotone",dataKey:"pnl",stroke:i,fill:"url(#pnlGradient)",strokeWidth:2})]})})}function bt({breakdown:s}){const a=Object.entries(s).sort((i,t)=>t[1]-i[1]),r=a.reduce((i,[,t])=>i+t,0);return a.length===0?null:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(T,{children:[e.jsx(p,{children:"Exit Reason"}),e.jsx(p,{className:"text-right",children:"Count"}),e.jsx(p,{className:"text-right",children:"% of Total"})]})}),e.jsx(W,{children:a.map(([i,t])=>e.jsxs(T,{children:[e.jsx(g,{children:e.jsx(F,{value:i})}),e.jsx(g,{className:"text-right text-xs",children:t}),e.jsxs(g,{className:"text-right text-xs",children:[r>0?(t/r*100).toFixed(1):0,"%"]})]},i))})]})}function vt({strategyId:s,strategyType:a}){const[r,i]=x.useState(null),[t,o]=x.useState([]),[n,l]=x.useState(!0);return x.useEffect(()=>{let d=!1;return l(!0),f.getPnL(s,a).then(m=>{d||(i(m.summary),o(m.daily))}).catch(()=>{}).finally(()=>{d||l(!1)}),()=>{d=!0}},[s,a]),n?e.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"Loading P&L data..."}):r?e.jsxs("div",{className:"space-y-4",children:[e.jsx(jt,{summary:r}),e.jsxs(b,{children:[e.jsx(H,{className:"pb-2",children:e.jsx(X,{className:"text-sm",children:"Equity Curve"})}),e.jsx(v,{children:e.jsx(ft,{data:t})})]}),Object.keys(r.exit_breakdown).length>0&&e.jsxs(b,{children:[e.jsx(H,{className:"pb-2",children:e.jsx(X,{className:"text-sm",children:"Exit Breakdown"})}),e.jsx(v,{children:e.jsx(bt,{breakdown:r.exit_breakdown})})]})]}):e.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"No P&L data available"})}function G({label:s,currentPrice:a,entryPrice:r,triggerPrice:i,action:t,type:o}){const n=Math.abs(i-r),l=t==="BUY"?o==="sl"||o==="tsl"?r-a:a-r:o==="sl"||o==="tsl"?a-r:r-a,d=n>0?Math.max(0,Math.min(100,l/n*100)):0;let m="";o==="sl"||o==="tsl"?d<50?m="[&>div]:bg-green-500":d<80?m="[&>div]:bg-amber-500":m="[&>div]:bg-red-500":d<50?m="[&>div]:bg-red-300":d<80?m="[&>div]:bg-amber-500":m="[&>div]:bg-green-500";const c=Math.abs(a-i).toFixed(2),k=r>0?(Math.abs(a-i)/r*100).toFixed(1):"0.0";return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"font-medium",children:s}),e.jsxs("span",{className:"text-muted-foreground",children:[c," pts (",k,"%)"]})]}),e.jsx(Ye,{value:d,className:`h-2 ${m}`}),e.jsxs("div",{className:"flex justify-between text-[10px] text-muted-foreground",children:[e.jsxs("span",{children:["Entry: ",r.toFixed(2)]}),e.jsxs("span",{children:["Trigger: ",i.toFixed(2)]})]})]})}const Nt={stoploss_triggered:e.jsx(Se,{className:"h-3.5 w-3.5 text-red-500"}),target_triggered:e.jsx(we,{className:"h-3.5 w-3.5 text-green-500"}),trailstop_triggered:e.jsx(U,{className:"h-3.5 w-3.5 text-amber-500"}),circuit_breaker:e.jsx(ke,{className:"h-3.5 w-3.5 text-red-600"})};function _t({strategyId:s,strategyType:a}){const[r,i]=x.useState([]),[t,o]=x.useState(!0);return x.useEffect(()=>{let n=!1;return o(!0),f.getRiskEvents(s,a,{limit:50}).then(l=>{n||i(l)}).catch(()=>{}).finally(()=>{n||o(!1)}),()=>{n=!0}},[s,a]),t?e.jsx("div",{className:"py-4 text-center text-sm text-muted-foreground",children:"Loading events..."}):r.length===0?e.jsx(L,{title:"No risk events",description:"No risk alerts have been triggered."}):e.jsx(We,{className:"h-[300px]",children:e.jsx("div",{className:"space-y-2 pr-4",children:r.map(n=>e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-md border text-xs",children:[e.jsx("div",{className:"mt-0.5",children:Nt[n.alert_type]||e.jsx(U,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n.symbol&&e.jsx("span",{className:"font-medium",children:n.symbol}),e.jsx("span",{className:"text-muted-foreground",children:n.trigger_reason||n.alert_type})]}),n.message&&e.jsx("p",{className:"text-muted-foreground mt-0.5 truncate",children:n.message})]}),e.jsx("div",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:n.created_at?new Date(n.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):""})]},n.id))})})}function yt({strategyId:s,strategyType:a,positions:r}){const i=r.filter(t=>t.position_state==="active"&&t.ltp);return e.jsxs("div",{className:"space-y-6",children:[i.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Active Position Risk Distances"}),i.map(t=>e.jsxs("div",{className:"p-3 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"text-xs font-medium",children:[t.symbol," ",e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action})," ","@ ",t.average_entry_price.toFixed(2)," | LTP: ",t.ltp?.toFixed(2)]}),t.stoploss_price&&t.ltp&&e.jsx(G,{label:"Stop Loss",currentPrice:t.ltp,entryPrice:t.average_entry_price,triggerPrice:t.stoploss_price,action:t.action,type:"sl"}),t.target_price&&t.ltp&&e.jsx(G,{label:"Target",currentPrice:t.ltp,entryPrice:t.average_entry_price,triggerPrice:t.target_price,action:t.action,type:"tgt"}),t.trailstop_price&&t.ltp&&e.jsx(G,{label:"Trailing Stop",currentPrice:t.ltp,entryPrice:t.average_entry_price,triggerPrice:t.trailstop_price,action:t.action,type:"tsl"})]},t.id))]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Risk Events"}),e.jsx(_t,{strategyId:s,strategyType:a})]})]})}const kt=[{value:"",label:"Disabled"},{value:"percentage",label:"Percentage"},{value:"points",label:"Points"}];function $({label:s,typeValue:a,numValue:r,onTypeChange:i,onNumChange:t}){return e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(te,{className:"text-xs",children:s}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{value:a||"",onValueChange:i,children:[e.jsx(Ve,{className:"w-[120px] h-8 text-xs",children:e.jsx(Xe,{placeholder:"Disabled"})}),e.jsx(Ze,{children:kt.map(o=>e.jsx(Ke,{value:o.value,children:o.label},o.value))})]}),e.jsx(ee,{type:"number",step:"0.01",className:"h-8 text-xs",value:r??"",disabled:!a,onChange:o=>t(o.target.value?Number(o.target.value):null)})]})]})}function wt({open:s,onClose:a,strategyId:r,strategyType:i}){const[t,o]=x.useState(null),[n,l]=x.useState(!1);x.useEffect(()=>{s&&f.getRiskConfig(r,i).then(o).catch(()=>{})},[s,r,i]);const d=(c,k)=>{t&&o({...t,[c]:k||null})},m=async()=>{if(t){l(!0);try{await f.updateRiskConfig(r,i,t),j.success("Risk config updated"),a()}catch{j.error("Failed to save risk config")}finally{l(!1)}}};return e.jsx(xe,{open:s,onOpenChange:c=>!c&&a(),children:e.jsxs(ue,{className:"w-[360px] sm:w-[400px]",children:[e.jsx(me,{children:e.jsx(pe,{children:"Risk Configuration"})}),t?e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx($,{label:"Stop Loss",typeValue:t.default_stoploss_type,numValue:t.default_stoploss_value,onTypeChange:c=>d("default_stoploss_type",c),onNumChange:c=>d("default_stoploss_value",c)}),e.jsx($,{label:"Target",typeValue:t.default_target_type,numValue:t.default_target_value,onTypeChange:c=>d("default_target_type",c),onNumChange:c=>d("default_target_value",c)}),e.jsx($,{label:"Trailing Stop",typeValue:t.default_trailstop_type,numValue:t.default_trailstop_value,onTypeChange:c=>d("default_trailstop_type",c),onNumChange:c=>d("default_trailstop_value",c)}),e.jsx($,{label:"Breakeven",typeValue:t.default_breakeven_type,numValue:t.default_breakeven_threshold,onTypeChange:c=>d("default_breakeven_type",c),onNumChange:c=>d("default_breakeven_threshold",c)}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(te,{className:"text-xs",children:"Auto Squareoff Time"}),e.jsx(ee,{type:"time",className:"h-8 text-xs",value:t.auto_squareoff_time||"15:15",onChange:c=>d("auto_squareoff_time",c.target.value)})]}),e.jsx("div",{className:"pt-4",children:e.jsx(y,{onClick:m,disabled:n,className:"w-full",children:n?"Saving...":"Save Changes"})})]}):e.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"Loading..."})]})})}function St({reason:s}){return e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-destructive/10 border-l-4 border-destructive text-destructive text-xs",children:[e.jsx(U,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"font-medium",children:"Circuit Breaker Tripped"}),s&&e.jsxs("span",{className:"text-muted-foreground",children:["— ",s]})]})}function Ct(s){return s>0?"text-green-600":s<0?"text-red-600":"text-muted-foreground"}function Tt({strategy:s,strategyType:a,dashboardData:r}){const[i,t]=x.useState(!1),[o,n]=x.useState([]),[l,d]=x.useState([]),[m,c]=x.useState(null),[k,u]=x.useState(!1),[_,ae]=x.useState(s.is_active),[R,M]=x.useState("active"),E=x.useCallback(()=>{f.getPositions(s.id,a).then(n).catch(()=>{})},[s.id,a]);x.useEffect(()=>{i&&(E(),z.getStrategy(s.id).then(h=>d(h.mappings||[])).catch(()=>{}),f.getRiskConfig(s.id,a).then(h=>{c(h),M(h.risk_monitoring)}).catch(()=>{}))},[i,s.id,a,E]);const re=async()=>{try{const h=await z.toggleStrategy(s.id);ae(h.data?.is_active??!_),j.success(h.data?.is_active?"Strategy activated":"Strategy deactivated")}catch{j.error("Failed to toggle strategy")}},ie=async()=>{try{const h=await f.closeAllPositions(s.id,a);j.success(`Closed ${h.closed}/${h.total} positions`),E()}catch{j.error("Failed to close positions")}},ne=async()=>{try{R==="active"?(await f.deactivateRisk(s.id,a),M("paused"),j.success("Risk monitoring paused")):(await f.activateRisk(s.id,a),M("active"),j.success("Risk monitoring activated"))}catch{j.error("Failed to toggle risk monitoring")}},V=I(h=>h.circuitBreakerStatus.get(s.id)),P=r?.active_positions||o.filter(h=>h.position_state==="active").length,D=r?.total_unrealized_pnl||0;return e.jsxs(b,{children:[V?.status==="tripped"&&e.jsx(St,{reason:V.reason}),e.jsx(H,{className:"cursor-pointer py-3 px-4",onClick:()=>t(!i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold",children:s.name}),e.jsx(w,{variant:"outline",className:"text-[10px] capitalize",children:s.platform}),a==="chartink"&&e.jsx(w,{variant:"secondary",className:"text-[10px]",children:"Chartink"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-0.5 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[P," position",P!==1?"s":""]}),D!==0&&e.jsxs("span",{className:Ct(D),children:[D>0?"+":"",D.toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",onClick:h=>h.stopPropagation(),children:[e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:ne,title:R==="active"?"Pause risk monitoring":"Activate risk monitoring",children:R==="active"?e.jsx(Ce,{className:"h-4 w-4 text-green-600"}):e.jsx(Te,{className:"h-4 w-4 text-amber-500"})}),e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:re,title:_?"Deactivate strategy":"Activate strategy",children:e.jsx(Pe,{className:`h-4 w-4 ${_?"text-green-600":"text-muted-foreground"}`})}),P>0&&e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:ie,title:"Close all positions",children:e.jsx(Le,{className:"h-4 w-4 text-red-500"})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>t(!i),children:i?e.jsx(Ee,{className:"h-4 w-4"}):e.jsx(De,{className:"h-4 w-4"})})]})]})}),i&&e.jsx(v,{className:"pt-0 px-4 pb-4",children:e.jsxs(Me,{defaultValue:"positions",className:"w-full",children:[e.jsxs(Ae,{className:"w-full justify-start h-8",children:[e.jsx(S,{value:"overview",className:"text-xs",children:"Overview"}),e.jsxs(S,{value:"positions",className:"text-xs",children:["Positions ",P>0&&`(${P})`]}),e.jsx(S,{value:"orders",className:"text-xs",children:"Orders"}),e.jsx(S,{value:"trades",className:"text-xs",children:"Trades"}),e.jsx(S,{value:"pnl",className:"text-xs",children:"P&L"}),e.jsx(S,{value:"risk",className:"text-xs",children:"Risk"})]}),e.jsx(C,{value:"overview",className:"mt-3",children:e.jsx(nt,{strategy:s,mappings:l,strategyType:a,riskConfig:m,onOpenRiskConfig:()=>u(!0)})}),e.jsx(C,{value:"positions",className:"mt-3",children:e.jsx(mt,{strategyId:s.id,strategyType:a,positions:o,onRefresh:E})}),e.jsx(C,{value:"orders",className:"mt-3",children:e.jsx(pt,{strategyId:s.id,strategyType:a})}),e.jsx(C,{value:"trades",className:"mt-3",children:e.jsx(ht,{strategyId:s.id,strategyType:a})}),e.jsx(C,{value:"pnl",className:"mt-3",children:e.jsx(vt,{strategyId:s.id,strategyType:a})}),e.jsx(C,{value:"risk",className:"mt-3",children:e.jsx(yt,{strategyId:s.id,strategyType:a,positions:o})})]})}),e.jsx(wt,{open:k,onClose:()=>u(!1),strategyId:s.id,strategyType:a})]})}const Pt=[{id:"webhook",icon:$e,title:"Webhook Strategy",description:"For equity and signal-based trading",route:"/strategy/new"},{id:"builder",icon:Fe,title:"F&O Strategy Builder",description:"For multi-leg options and futures",route:"/strategy/builder"},{id:"template",icon:Re,title:"From Template",description:"Start with a pre-built strategy",route:"/strategy/templates"}];function Lt({open:s,onClose:a}){const r=st(),i=t=>{a(),r(t)};return e.jsx(Qe,{open:s,onOpenChange:t=>!t&&a(),children:e.jsxs(Je,{className:"sm:max-w-[400px]",children:[e.jsx(et,{children:e.jsx(tt,{children:"Create New Strategy"})}),e.jsx("div",{className:"space-y-3 py-2",children:Pt.map(t=>e.jsxs("button",{onClick:()=>i(t.route),className:"w-full flex items-start gap-3 p-3 rounded-lg border hover:bg-accent transition-colors text-left",children:[e.jsx(t.icon,{className:"h-5 w-5 mt-0.5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:t.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.description})]})]},t.id))})]})})}function Zt(){const[s,a]=x.useState(null),[r,i]=x.useState([]),[t,o]=x.useState(!0),[n,l]=x.useState(!1),d=I(c=>c.setDashboardData);at(),x.useEffect(()=>{let c=!1;return(async()=>{try{const[u,_]=await Promise.all([f.getDashboard().catch(()=>null),z.getStrategies().catch(()=>[])]);c||(a(u),u&&d(u),i(_))}finally{c||o(!1)}})(),()=>{c=!0}},[d]);const m=new Map;if(s)for(const c of s.strategies)m.set(c.strategy_id,{active_positions:c.active_positions,total_unrealized_pnl:c.total_unrealized_pnl});return t?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 w-48 bg-muted rounded"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map(c=>e.jsx("div",{className:"h-20 bg-muted rounded"},c))}),e.jsx("div",{className:"space-y-3",children:[1,2].map(c=>e.jsx("div",{className:"h-16 bg-muted rounded"},c))})]})}):e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(it,{overview:s,onCreateStrategy:()=>l(!0)}),r.length===0?e.jsx(L,{title:"No strategies",description:"Create your first strategy to get started with position tracking and risk management."}):e.jsx("div",{className:"space-y-3",children:r.map(c=>e.jsx(Tt,{strategy:c,strategyType:"webhook",dashboardData:m.get(c.id)},c.id))}),e.jsx(Lt,{open:n,onClose:()=>l(!1)})]})}export{Zt as default};
