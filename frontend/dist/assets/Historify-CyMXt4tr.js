import{r as i,j as e}from"./vendor-react-CCyQGCED.js";import{u as fa,d as _t,z as kt,e as u,c as O,B as c,D as Dt,j as Tt,k as $t,p as Ft,m as cs,n as Et,s as r,q as zt}from"./index-NHrG-O_Z.js";import{A as os,b as ds,c as hs,d as ms,e as xs,f as us,g as fs,h as ps}from"./alert-dialog-DP5Vbj8e.js";import{C as R,d as X,a as js,b as gs}from"./card-Cn20bp_v.js";import{D as Ne,b as be,c as we,d as Se,e as Ce,f as _e}from"./dialog-DA9GnjaJ.js";import{I as F}from"./input-BylzFlgY.js";import{L as m}from"./label-_1WWiomg.js";import{P as At}from"./progress-B1t1mGW6.js";import{S as ke}from"./scroll-area-Cb-vfl57.js";import{S as b,a as w,b as S,c as C,d as o}from"./select-DcHsBqkV.js";import{T as ys,a as vs,b as L,c as _,d as Ns,e as j}from"./table-Crau903Y.js";import{T as Ot,a as It,b as De,c as Te}from"./tabs-DnjOpX1p.js";import{T as Mt}from"./textarea-BXWfH68I.js";import{C as q}from"./checkbox-CdehzPk_.js";import{S as pa}from"./switch-DETUyPBc.js";import{D as ja,aJ as Pt,i as $e,c as Rt,Z as bs,L as J,q as Lt,r as Jt,ao as ws,R as Vt,p as Ut,s as Bt,aK as ga,Y as Fe,aL as Ss,aI as Ee,aM as ya,an as ne,aN as Wt,aO as Xt,k as va,X as Cs,z as Ht,a5 as Yt,$ as Na,aP as ba,aQ as wa}from"./vendor-icons-CCn_k3dF.js";import{a as qt,L as ze}from"./vendor-router-Dzc1xxhr.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-radix-CYVJEJRR.js";async function g(){return(await(await fetch("/auth/csrf-token",{credentials:"include"})).json()).csrf_token}const Qt=[{label:"1M",months:1},{label:"3M",months:3},{label:"6M",months:6},{label:"1Y",months:12},{label:"2Y",months:24},{label:"5Y",months:60}];function _s(D){const H=new Date;return H.setMonth(H.getMonth()-D),H.toISOString().split("T")[0]}function jl(){const{appMode:D,toggleAppMode:H,mode:ks,toggleMode:Sa,isTogglingMode:Ds}=fa(),{user:Ae,logout:Ts}=_t(),Oe=qt(),[f,Ca]=i.useState([]),[Ie,_a]=i.useState([]),[Zt,ka]=i.useState(null),[Me,Da]=i.useState(null),[re,Ta]=i.useState(["NSE","BSE","NFO","BFO","MCX","CDS","BCD","NSE_INDEX","BSE_INDEX"]),[Pe,$a]=i.useState({database_size_mb:0,total_records:0,total_symbols:0,watchlist_count:0}),[Fa,$s]=i.useState("watchlist"),[V,Q]=i.useState(""),[Z,ie]=i.useState("NSE"),[ce,Re]=i.useState([]),[Fs,G]=i.useState(!1),oe=i.useRef(null),[Es,Ea]=i.useState("D"),[Le,zs]=i.useState(()=>_s(1)),[As,Os]=i.useState(()=>new Date().toISOString().split("T")[0]),[Is,za]=i.useState(!1),[de,he]=i.useState([]),[Aa,Oa]=i.useState(null),[Ia,Je]=i.useState({}),[Ms,Ps]=i.useState(!1),[me,Ma]=i.useState([]),[Pa,Rs]=i.useState(!1),[Ra,xe]=i.useState(!1),[U,Ls]=i.useState(null),[Ve,La]=i.useState({}),[Y,Js]=i.useState(null),[Ue,Be]=i.useState(""),[Vs,We]=i.useState(""),[ue,Xe]=i.useState("daily"),[Us,He]=i.useState(5),[Bs,Ye]=i.useState("minutes"),[B,K]=i.useState("09:15"),[Ws,qe]=i.useState("D"),[Xs,Qe]=i.useState(1),[Hs,Ys]=i.useState(!1),[Ja,ee]=i.useState(!1),[qs,Qs]=i.useState(""),[Zs,Gs]=i.useState(!1),[Va,fe]=i.useState(!1),[Ze,Ks]=i.useState(""),[ea,Ua]=i.useState("NSE"),[sa,Ba]=i.useState("D"),[pe,aa]=i.useState(null),[ta,la]=i.useState(!1),Ge=i.useRef(null),[Wa,Ke]=i.useState(!1),[je,na]=i.useState(null),[Xa,es]=i.useState(!1),[ss,ra]=i.useState(!1),[Ha,as]=i.useState(!1),[ts,ia]=i.useState(!1),[Ya,ge]=i.useState(!1),[ls,qa]=i.useState("csv"),[I,Qa]=i.useState("all"),[E,ye]=i.useState(new Set(["D"])),[v,M]=i.useState(new Set),[ca,oa]=i.useState(!1),[ns,Za]=i.useState("25"),[se,Ga]=i.useState("m"),[d,W]=i.useState(new Set),[k,rs]=i.useState({exchange:"",interval:"",search:""}),{socket:x}=kt(),z=i.useMemo(()=>{const s=new Map;for(const a of Ie){const t=`${a.symbol}:${a.exchange}`;s.has(t)||s.set(t,{symbol:a.symbol,exchange:a.exchange,intervals:[],total_records:0,earliest_date:a.first_date,latest_date:a.last_date});const l=s.get(t);l.intervals.push({interval:a.interval,record_count:a.record_count,first_date:a.first_date,last_date:a.last_date}),l.total_records+=a.record_count,a.first_date&&(!l.earliest_date||a.first_date<l.earliest_date)&&(l.earliest_date=a.first_date),a.last_date&&(!l.latest_date||a.last_date>l.latest_date)&&(l.latest_date=a.last_date)}for(const a of s.values())a.intervals.sort((t,l)=>{const n=["1m","5m","15m","30m","1h","D","W","M"];return n.indexOf(t.interval)-n.indexOf(l.interval)});return Array.from(s.values()).sort((a,t)=>a.symbol.localeCompare(t.symbol))},[Ie]),ae=i.useMemo(()=>z.filter(s=>!(k.exchange&&k.exchange!=="__all__"&&s.exchange!==k.exchange||k.interval&&k.interval!=="__all__"&&!s.intervals.some(a=>a.interval===k.interval)||k.search&&!s.symbol.toLowerCase().includes(k.search.toLowerCase()))),[z,k]);i.useEffect(()=>{te(),le(),Ka(),et(),P(),st(),T(),A()},[]),i.useEffect(()=>{if(!x)return;const s=h=>{Je($=>({...$,[h.job_id]:h})),he($=>$.map(N=>N.id===h.job_id?{...N,completed_symbols:h.current,status:"running"}:N))},a=h=>{Je($=>{const N={...$};return delete N[h.job_id],N}),T(),le(),P(),r.success(`Job completed: ${h.completed} success, ${h.failed} failed`,"historify")},t=h=>{he($=>$.map(N=>N.id===h.job_id?{...N,status:"paused"}:N))},l=h=>{he($=>$.map(N=>N.id===h.job_id?{...N,status:"cancelled"}:N)),Je($=>{const N={...$};return delete N[h.job_id],N}),r.info("Job cancelled","historify")};x.on("historify_progress",s),x.on("historify_job_complete",a),x.on("historify_job_paused",t),x.on("historify_job_cancelled",l);const n=()=>{A()},p=h=>{r.info("Schedule execution started","historify"),A(),T(),Y===h.schedule_id&&is(h.schedule_id)},y=h=>{A(),Y===h.schedule_id&&is(h.schedule_id)};return x.on("historify_schedule_created",n),x.on("historify_schedule_updated",n),x.on("historify_schedule_deleted",n),x.on("historify_schedule_execution_started",p),x.on("historify_schedule_execution_complete",y),()=>{x.off("historify_progress",s),x.off("historify_job_complete",a),x.off("historify_job_paused",t),x.off("historify_job_cancelled",l),x.off("historify_schedule_created",n),x.off("historify_schedule_updated",n),x.off("historify_schedule_deleted",n),x.off("historify_schedule_execution_started",p),x.off("historify_schedule_execution_complete",y)}},[x,Y]),i.useEffect(()=>{const s=a=>{oe.current&&!oe.current.contains(a.target)&&G(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),i.useEffect(()=>{const s=setTimeout(()=>{V.length>=2?ot(V):(Re([]),G(!1))},300);return()=>clearTimeout(s)},[V]);const te=async()=>{try{const a=await(await fetch("/historify/api/watchlist",{credentials:"include"})).json();a.status==="success"&&Ca(a.data||[])}catch{}},le=async()=>{try{const a=await(await fetch("/historify/api/catalog",{credentials:"include"})).json();a.status==="success"&&_a(a.data||[])}catch{}},Ka=async()=>{try{const a=await(await fetch("/historify/api/intervals",{credentials:"include"})).json();a.status==="success"&&ka(a.data)}catch{}},et=async()=>{try{const a=await(await fetch("/historify/api/historify-intervals",{credentials:"include"})).json();a.status==="success"&&Da({storage_intervals:a.storage_intervals,computed_intervals:a.computed_intervals,all_intervals:a.all_intervals})}catch{}},P=async()=>{try{const a=await(await fetch("/historify/api/stats",{credentials:"include"})).json();a.status==="success"&&$a(a.data)}catch{}},st=async()=>{try{const a=await(await fetch("/historify/api/exchanges",{credentials:"include"})).json();a.status==="success"&&a.data?.length>0&&Ta(a.data)}catch{}},T=async()=>{Ps(!0);try{const a=await(await fetch("/historify/api/jobs?limit=50",{credentials:"include"})).json();a.status==="success"&&he(a.data||[])}catch{}finally{Ps(!1)}},A=async()=>{Rs(!0);try{const a=await(await fetch("/historify/api/schedules",{credentials:"include"})).json();a.status==="success"&&Ma(a.data||[])}catch{}finally{Rs(!1)}},is=async s=>{try{const t=await(await fetch(`/historify/api/schedules/${s}/executions?limit=10`,{credentials:"include"})).json();t.status==="success"&&La(l=>({...l,[s]:t.data||[]}))}catch{}},ve=()=>{Be(""),We(""),Xe("daily"),He(5),Ye("minutes"),K("09:15"),qe("D"),Qe(1),Ls(null)},da=s=>{s?(Ls(s),Be(s.name),We(s.description||""),Xe(s.schedule_type),He(s.interval_value||5),Ye(s.interval_unit||"minutes"),K(s.time_of_day||"09:15"),qe(s.data_interval),Qe(s.lookback_days)):ve(),xe(!0)},at=async()=>{if(!Ue.trim()){r.warning("Please enter a schedule name","historify");return}Ys(!0);try{const s=await g(),a={name:Ue.trim(),description:Vs.trim()||void 0,schedule_type:ue,data_interval:Ws,lookback_days:Xs};ue==="interval"?(a.interval_value=Us,a.interval_unit=Bs):a.time_of_day=B;const t=U?`/historify/api/schedules/${U.id}`:"/historify/api/schedules",p=await(await fetch(t,{method:U?"PUT":"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify(a)})).json();p.status==="success"?(r.success(U?"Schedule updated":"Schedule created","historify"),xe(!1),ve(),A()):r.error(p.message||"Failed to save schedule","historify")}catch{r.error("Failed to save schedule","historify")}finally{Ys(!1)}},tt=async s=>{try{const a=await g(),l=await(await fetch(`/historify/api/schedules/${s}`,{method:"DELETE",headers:{"X-CSRFToken":a},credentials:"include"})).json();l.status==="success"?(r.success("Schedule deleted","historify"),A()):r.error(l.message||"Failed to delete schedule","historify")}catch{r.error("Failed to delete schedule","historify")}},lt=async s=>{try{const a=await g(),t=s.is_enabled?"disable":"enable",n=await(await fetch(`/historify/api/schedules/${s.id}/${t}`,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include"})).json();n.status==="success"?(r.success(`Schedule ${s.is_enabled?"disabled":"enabled"}`,"historify"),A()):r.error(n.message||"Failed to toggle schedule","historify")}catch{r.error("Failed to toggle schedule","historify")}},nt=async s=>{try{const a=await g(),t=s.is_paused?"resume":"pause",n=await(await fetch(`/historify/api/schedules/${s.id}/${t}`,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include"})).json();n.status==="success"?(r.success(`Schedule ${s.is_paused?"resumed":"paused"}`,"historify"),A()):r.error(n.message||"Failed to pause/resume schedule","historify")}catch{r.error("Failed to pause/resume schedule","historify")}},rt=async s=>{try{const a=await g(),l=await(await fetch(`/historify/api/schedules/${s}/trigger`,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include"})).json();l.status==="success"?(r.success("Schedule triggered","historify"),A(),T()):r.error(l.message||"Failed to trigger schedule","historify")}catch{r.error("Failed to trigger schedule","historify")}},it=s=>s.is_enabled?s.is_paused?e.jsx(u,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Paused"}):s.status==="running"?e.jsx(u,{variant:"default",className:"bg-blue-500",children:"Running"}):e.jsx(u,{variant:"default",className:"bg-green-500",children:"Active"}):e.jsx(u,{variant:"secondary",children:"Disabled"}),ct=s=>{if(s.schedule_type==="interval")return`Every ${s.interval_value} ${s.interval_unit}`;const[a,t]=(s.time_of_day||"09:15").split(":").map(Number),l=a===0?12:a>12?a-12:a,n=a>=12?"PM":"AM";return`Daily at ${l}:${t.toString().padStart(2,"0")} ${n} IST`},ot=async s=>{if(!(s.length<2))try{const a=new URLSearchParams({q:s});Z&&a.append("exchange",Z);const l=await(await fetch(`/search/api/search?${a}`,{credentials:"include"})).json();Re((l.results||[]).slice(0,10)),G(!0)}catch{Re([])}},ha=async()=>{if(!V.trim()){r.warning("Please enter a symbol","historify");return}try{const s=await g(),t=await(await fetch("/historify/api/watchlist",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({symbol:V.trim().toUpperCase(),exchange:Z})})).json();t.status==="success"?(r.success(t.message,"historify"),Q(""),te(),P()):r.error(t.message||"Failed to add symbol","historify")}catch{r.error("Failed to add symbol","historify")}},dt=async(s,a)=>{try{const t=await g(),n=await(await fetch("/historify/api/watchlist",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include",body:JSON.stringify({symbol:s,exchange:a})})).json();n.status==="success"?(r.success(n.message,"historify"),te(),P()):r.error(n.message||"Failed to remove symbol","historify")}catch{r.error("Failed to remove symbol","historify")}},ht=async()=>{const a=qs.trim().split(`
`).map(t=>{const[l,n]=t.split(",").map(p=>p.trim().toUpperCase());return{symbol:l,exchange:n||"NSE"}}).filter(t=>t.symbol);if(a.length===0){r.warning("No valid symbols found","historify");return}Gs(!0);try{const t=await g(),n=await(await fetch("/historify/api/watchlist/bulk",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include",body:JSON.stringify({symbols:a})})).json();n.status==="success"?(r.success(`Added ${n.added} symbols`,"historify"),ee(!1),Qs(""),te(),P()):r.error(n.message||"Failed to bulk add symbols","historify")}catch{r.error("Failed to bulk add symbols","historify")}finally{Gs(!1)}},ma=async(s,a="custom")=>{if(s.length===0){r.warning("No symbols selected","historify");return}try{const t=await g(),n=await(await fetch("/historify/api/jobs",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include",body:JSON.stringify({job_type:a,symbols:s,interval:Es,start_date:Le,end_date:As,incremental:Is})})).json();n.status==="success"?(r.success(`Job started: ${n.total_symbols} symbols`,"historify"),T(),$s("jobs")):r.error(n.message||"Failed to create job","historify")}catch{r.error("Failed to create job","historify")}},mt=async()=>{if(f.length===0){r.warning("Watchlist is empty","historify");return}const s=f.map(a=>({symbol:a.symbol,exchange:a.exchange}));await ma(s,"watchlist")},xt=async s=>{try{const a=await g(),l=await(await fetch(`/historify/api/jobs/${s}/pause`,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include"})).json();l.status==="success"?(r.success("Job paused","historify"),T()):r.error(l.message||"Failed to pause job","historify")}catch{r.error("Failed to pause job","historify")}},ut=async s=>{try{const a=await g(),l=await(await fetch(`/historify/api/jobs/${s}/resume`,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include"})).json();l.status==="success"?(r.success("Job resumed","historify"),T()):r.error(l.message||"Failed to resume job","historify")}catch{r.error("Failed to resume job","historify")}},xa=async s=>{try{const a=await g(),l=await(await fetch(`/historify/api/jobs/${s}/cancel`,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include"})).json();l.status==="success"?(r.success("Job cancellation requested","historify"),T()):r.error(l.message||"Failed to cancel job","historify")}catch{r.error("Failed to cancel job","historify")}},ft=async s=>{try{const a=await g(),l=await(await fetch(`/historify/api/jobs/${s}/retry`,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include"})).json();l.status==="success"?(r.success(`Retrying ${l.retry_count} failed items`,"historify"),T()):r.error(l.message||"Failed to retry job","historify")}catch{r.error("Failed to retry job","historify")}},pt=async s=>{try{const a=await g(),l=await(await fetch(`/historify/api/jobs/${s}`,{method:"DELETE",headers:{"X-CSRFToken":a},credentials:"include"})).json();l.status==="success"?(r.success("Job deleted","historify"),T(),Aa?.id===s&&Oa(null)):r.error(l.message||"Failed to delete job","historify")}catch{r.error("Failed to delete job","historify")}},jt=async()=>{if(je)try{const s=await g(),t=await(await fetch("/historify/api/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify(je)})).json();t.status==="success"?(r.success(t.message,"historify"),le(),P()):r.error(t.message||"Failed to delete data","historify")}catch{r.error("Failed to delete data","historify")}finally{Ke(!1),na(null)}},gt=async()=>{if(v.size!==0){ra(!0);try{const s=await g(),a=Array.from(v).map(n=>{const[p,y]=n.split(":");return{symbol:p,exchange:y}}),l=await(await fetch("/historify/api/delete/bulk",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({symbols:a})})).json();l.status==="success"?(r.success(l.message,"historify"),M(new Set),le(),P()):r.error(l.message||"Failed to delete data","historify")}catch{r.error("Failed to delete data","historify")}finally{ra(!1),es(!1)}}},yt=async()=>{if(d.size!==0){ia(!0);try{const s=await g(),a=Array.from(d).map(n=>{const[p,y]=n.split(":");return{symbol:p,exchange:y}}),l=await(await fetch("/historify/api/watchlist/bulk/delete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({symbols:a})})).json();l.status==="success"?(r.success(l.message,"historify"),W(new Set),te()):r.error(l.message||"Failed to remove from watchlist","historify")}catch{r.error("Failed to remove from watchlist","historify")}finally{ia(!1),as(!1)}}},vt=s=>{const a=s.target.files?.[0];if(a){const t=a.name.toLowerCase();if(!t.endsWith(".csv")&&!t.endsWith(".parquet")){r.error("Please select a CSV or Parquet file","historify");return}aa(a)}},Nt=async()=>{if(!pe){r.warning("Please select a CSV or Parquet file","historify");return}if(!Ze.trim()){r.warning("Please enter a symbol","historify");return}la(!0);try{const s=await g(),a=new FormData;a.append("file",pe),a.append("symbol",Ze.trim().toUpperCase()),a.append("exchange",ea),a.append("interval",sa);const l=await(await fetch("/historify/api/upload",{method:"POST",headers:{"X-CSRFToken":s},credentials:"include",body:a})).json();l.status==="success"?(r.success(`${l.message}`,"historify"),fe(!1),aa(null),Ks(""),Ge.current&&(Ge.current.value=""),le(),P()):r.error(l.message||"Failed to upload data","historify")}catch{r.error("Failed to upload CSV","historify")}finally{la(!1)}},bt=async()=>{oa(!0);try{const s=await g(),a=I==="selected"?Array.from(v).map(p=>{const[y,h]=p.split(":");return{symbol:y,exchange:h}}):null,t=Array.from(E),n=await(await fetch("/historify/api/export/bulk",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({format:ls==="csv"&&t.length>1?"zip":ls,symbols:a,intervals:t,compression:"zstd"})})).json();n.status==="success"?(r.success(`${n.message}`,"historify"),window.location.href="/historify/api/export/bulk/download",ge(!1)):r.error(n.message||"Failed to export data","historify")}catch{r.error("Failed to export data","historify")}finally{oa(!1)}},wt=(s,a)=>{const t=`${s}:${a}`;M(l=>{const n=new Set(l);return n.has(t)?n.delete(t):n.add(t),n})},St=s=>{switch(s){case"running":return"bg-blue-500";case"paused":return"bg-yellow-500";case"completed":return"bg-green-500";case"completed_with_errors":return"bg-orange-500";case"failed":return"bg-red-500";case"cancelled":return"bg-gray-500";default:return"bg-gray-400"}},ua=async()=>{const s=await H();if(s.success){const a=fa.getState().appMode;r.success(`Switched to ${a==="live"?"Live":"Analyze"} mode`,"system")}else r.error(s.message||"Failed to toggle mode","system")},Ct=async()=>{try{await zt.logout(),Ts(),Oe("/login"),r.success("Logged out successfully","system")}catch{Ts(),Oe("/login")}};return e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsx("div",{className:"border-b border-border bg-card/50",children:e.jsxs("div",{className:"px-4 py-3 flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ja,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Historify"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"Historical Data Management"})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-lg",children:[e.jsx(Pt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[Pe.database_size_mb.toFixed(1)," MB"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-lg",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:Pe.total_records.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-lg",children:[e.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:Pe.total_symbols})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Ae?.broker&&e.jsx(u,{variant:"outline",className:"text-xs font-medium",children:Ae.broker.toUpperCase()}),e.jsxs(u,{variant:D==="live"?"default":"secondary",className:O("text-xs cursor-pointer",D==="analyzer"&&"bg-purple-500 hover:bg-purple-600 text-white"),onClick:ua,children:[D==="live"?e.jsx(bs,{className:"h-3 w-3 mr-1"}):e.jsx($e,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:D==="live"?"Live Mode":"Analyze Mode"}),e.jsx("span",{className:"sm:hidden",children:D==="live"?"Live":"Analyze"})]}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:ua,disabled:Ds,title:`Switch to ${D==="live"?"Analyze":"Live"} mode`,children:Ds?e.jsx(J,{className:"h-4 w-4 animate-spin"}):D==="live"?e.jsx(bs,{className:"h-4 w-4"}):e.jsx($e,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Sa,disabled:D!=="live",title:ks==="light"?"Switch to dark mode":"Switch to light mode",children:ks==="light"?e.jsx(Lt,{className:"h-4 w-4"}):e.jsx(Jt,{className:"h-4 w-4"})}),e.jsx(ze,{to:f.length>0?`/historify/charts/${f[0].symbol}?exchange=${f[0].exchange}&interval=D`:z.length>0?`/historify/charts/${z[0].symbol}?exchange=${z[0].exchange}&interval=D`:"/historify/charts",children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(ws,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Charts"})]})}),e.jsx(ze,{to:"/dashboard",children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]})}),e.jsxs(Dt,{children:[e.jsx(Tt,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full bg-primary text-primary-foreground",children:e.jsx("span",{className:"text-sm font-medium",children:Ae?.username?.[0]?.toUpperCase()||"O"})})}),e.jsxs($t,{align:"end",className:"w-56",children:[Ft.map(s=>e.jsxs(cs,{onSelect:()=>Oe(s.href),className:"cursor-pointer",children:[e.jsx(s.icon,{className:"h-4 w-4 mr-2"}),s.label]},s.href)),e.jsx(cs,{asChild:!0,children:e.jsxs("a",{href:"https://docs.openalgo.in",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Docs"]})}),e.jsx(Et,{}),e.jsxs(cs,{onClick:Ct,className:"text-destructive focus:text-destructive",children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs(Ot,{value:Fa,onValueChange:$s,className:"h-full flex flex-col",children:[e.jsx("div",{className:"border-b border-border px-4 overflow-x-auto",children:e.jsxs(It,{className:"h-10 bg-transparent w-max min-w-full sm:w-auto",children:[e.jsxs(De,{value:"watchlist",className:"gap-1.5 data-[state=active]:bg-muted",children:[e.jsx(ga,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Watchlist"}),e.jsx("span",{className:"sm:hidden",children:"Watch"}),f.length>0&&e.jsx(u,{variant:"secondary",className:"ml-1 h-5 min-w-5 text-xs",children:f.length})]}),e.jsxs(De,{value:"scheduler",className:"gap-1.5 data-[state=active]:bg-muted",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Scheduler"}),e.jsx("span",{className:"sm:hidden",children:"Sched"}),me.filter(s=>s.is_enabled&&!s.is_paused).length>0&&e.jsx(u,{variant:"default",className:"ml-1 h-5 min-w-5 text-xs bg-green-500",children:me.filter(s=>s.is_enabled&&!s.is_paused).length})]}),e.jsxs(De,{value:"jobs",className:"gap-1.5 data-[state=active]:bg-muted",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Download Jobs"}),e.jsx("span",{className:"sm:hidden",children:"Jobs"}),de.filter(s=>s.status==="running"||s.status==="paused").length>0&&e.jsx(u,{variant:"default",className:"ml-1 h-5 min-w-5 text-xs bg-blue-500",children:de.filter(s=>s.status==="running"||s.status==="paused").length})]}),e.jsxs(De,{value:"catalog",className:"gap-1.5 data-[state=active]:bg-muted",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export/Import"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx(Te,{value:"catalog",className:"h-full m-0 p-4 overflow-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",ref:oe,children:[e.jsx(F,{placeholder:"Quick add symbol to watchlist...",value:V,onChange:s=>Q(s.target.value.toUpperCase()),className:"h-9"}),Fs&&ce.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-50 max-h-60 overflow-auto",children:ce.map(s=>e.jsxs("div",{className:"px-3 py-2 hover:bg-muted cursor-pointer",onClick:()=>{Q(s.symbol),ie(s.exchange),G(!1)},children:[e.jsx("div",{className:"font-medium",children:s.symbol}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.name," - ",s.exchange]})]},`${s.symbol}-${s.exchange}`))})]}),e.jsxs(b,{value:Z,onValueChange:ie,children:[e.jsx(w,{className:"w-full sm:w-28 h-9",children:e.jsx(S,{})}),e.jsx(C,{children:re.map(s=>e.jsx(o,{value:s,children:s},s))})]}),e.jsxs(c,{onClick:ha,className:"h-9",size:"sm",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"Add to Watchlist"]}),e.jsxs(c,{variant:"outline",onClick:()=>ee(!0),className:"h-9",size:"sm",children:[e.jsx(ya,{className:"h-4 w-4 mr-1"}),"Bulk"]})]})})}),e.jsx(R,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(F,{placeholder:"Filter symbols...",value:k.search,onChange:s=>rs(a=>({...a,search:s.target.value})),className:"h-9"})}),e.jsxs(b,{value:k.exchange||"__all__",onValueChange:s=>rs(a=>({...a,exchange:s})),children:[e.jsx(w,{className:"w-full sm:w-32 h-9",children:e.jsx(S,{placeholder:"Exchange"})}),e.jsxs(C,{children:[e.jsx(o,{value:"__all__",children:"All"}),re.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),e.jsxs(b,{value:k.interval||"__all__",onValueChange:s=>rs(a=>({...a,interval:s})),children:[e.jsx(w,{className:"w-full sm:w-32 h-9",title:"Filter symbols that have this interval",children:e.jsx(S,{placeholder:"Has Interval"})}),e.jsxs(C,{children:[e.jsx(o,{value:"__all__",children:"All Intervals"}),(Me?.storage_intervals||["1m","D"]).map(s=>e.jsxs(o,{value:s,children:["Has ",s]},s))]})]}),e.jsxs("div",{className:"flex gap-2",children:[v.size>0&&e.jsxs(c,{variant:"destructive",size:"sm",onClick:()=>es(!0),className:"h-9",children:[e.jsx(ne,{className:"h-4 w-4 mr-1"}),"Delete (",v.size,")"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>ge(!0),disabled:Ie.length===0,className:"h-9",children:[e.jsx(Wt,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>fe(!0),className:"h-9",children:[e.jsx(Xt,{className:"h-4 w-4 mr-1"}),"Import"]})]})]})})}),e.jsx(R,{children:e.jsx(ke,{className:"h-[calc(100vh-380px)]",children:e.jsxs(ys,{children:[e.jsx(vs,{children:e.jsxs(L,{children:[e.jsx(_,{className:"w-10",children:e.jsx(q,{checked:v.size===ae.length&&ae.length>0,onCheckedChange:s=>{M(s?new Set(ae.map(a=>`${a.symbol}:${a.exchange}`)):new Set)}})}),e.jsx(_,{children:"Symbol"}),e.jsx(_,{className:"hidden sm:table-cell",children:"Exchange"}),e.jsx(_,{children:"Available Intervals"}),e.jsx(_,{className:"text-right hidden sm:table-cell",children:"Total Records"}),e.jsx(_,{className:"hidden md:table-cell",children:"Date Range"}),e.jsx(_,{className:"w-20"})]})}),e.jsx(Ns,{children:ae.length===0?e.jsx(L,{children:e.jsx(j,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No data available. Add symbols to watchlist and download data."})}):ae.map(s=>e.jsxs(L,{children:[e.jsx(j,{children:e.jsx(q,{checked:v.has(`${s.symbol}:${s.exchange}`),onCheckedChange:()=>wt(s.symbol,s.exchange)})}),e.jsx(j,{className:"font-medium",children:e.jsxs("div",{children:[s.symbol,e.jsxs("span",{className:"sm:hidden text-xs text-muted-foreground ml-1",children:["(",s.exchange,")"]})]})}),e.jsx(j,{className:"hidden sm:table-cell",children:e.jsx(u,{variant:"outline",children:s.exchange})}),e.jsx(j,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.intervals.map(a=>e.jsxs(u,{variant:a.interval==="1m"?"default":a.interval==="D"?"secondary":"outline",className:"text-xs cursor-pointer hover:bg-primary/80",title:`${a.record_count.toLocaleString()} records (${a.first_date} - ${a.last_date})`,onClick:()=>{window.location.href=`/historify/charts/${s.symbol}?exchange=${s.exchange}&interval=${a.interval}`},children:[a.interval,e.jsx("span",{className:"ml-1 opacity-70",children:a.record_count>1e3?`${Math.round(a.record_count/1e3)}k`:a.record_count})]},a.interval))})}),e.jsx(j,{className:"text-right hidden sm:table-cell",children:s.total_records.toLocaleString()}),e.jsxs(j,{className:"hidden md:table-cell text-muted-foreground text-sm",children:[s.earliest_date," - ",s.latest_date]}),e.jsx(j,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"h-7 w-7",asChild:!0,children:e.jsx(ze,{to:`/historify/charts/${s.symbol}?exchange=${s.exchange}&interval=${s.intervals[0]?.interval||"D"}`,children:e.jsx(ws,{className:"h-3.5 w-3.5"})})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>{na({symbol:s.symbol,exchange:s.exchange}),Ke(!0)},children:e.jsx(ne,{className:"h-3.5 w-3.5"})})]})})]},`${s.symbol}-${s.exchange}`))})]})})})]})}),e.jsxs(Te,{value:"watchlist",className:"h-full m-0 p-4 overflow-auto",children:[e.jsx(R,{className:"mb-4",children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",ref:oe,children:[e.jsx(F,{placeholder:"Search symbol to add...",value:V,onChange:s=>Q(s.target.value.toUpperCase()),className:"h-9"}),Fs&&ce.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-50 max-h-60 overflow-auto",children:ce.map(s=>e.jsxs("div",{className:"px-3 py-2 hover:bg-muted cursor-pointer",onClick:()=>{Q(s.symbol),ie(s.exchange),G(!1)},children:[e.jsx("div",{className:"font-medium",children:s.symbol}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.name," - ",s.exchange]})]},`${s.symbol}-${s.exchange}`))})]}),e.jsxs(b,{value:Z,onValueChange:ie,children:[e.jsx(w,{className:"w-full sm:w-28 h-9",children:e.jsx(S,{})}),e.jsx(C,{children:re.map(s=>e.jsx(o,{value:s,children:s},s))})]}),e.jsxs(c,{onClick:ha,className:"h-9",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"Add"]}),e.jsxs(c,{variant:"outline",onClick:()=>ee(!0),className:"h-9",children:[e.jsx(ya,{className:"h-4 w-4 mr-1"}),"Bulk"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 h-[calc(100vh-240px)]",children:[e.jsxs(R,{className:"flex flex-col",children:[e.jsx(js,{className:"pb-3",children:e.jsxs(gs,{className:"text-base flex items-center gap-2",children:[e.jsx(va,{className:"h-4 w-4"}),"Download Settings"]})}),e.jsx(X,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-muted-foreground mb-2 block",children:"Quick Date Range"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Qt.map(s=>{const a=Le===_s(s.months);return e.jsx(c,{variant:a?"default":"outline",size:"sm",className:O("h-8 min-w-[3rem]",a&&"ring-2 ring-primary ring-offset-2 ring-offset-background"),onClick:()=>{zs(_s(s.months)),Os(new Date().toISOString().split("T")[0])},children:s.label},s.label)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-muted-foreground",children:"From"}),e.jsx(F,{type:"date",value:Le,onChange:s=>zs(s.target.value),className:"h-9 mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-muted-foreground",children:"To"}),e.jsx(F,{type:"date",value:As,onChange:s=>Os(s.target.value),className:"h-9 mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-muted-foreground",children:"Interval"}),e.jsxs(b,{value:Es,onValueChange:Ea,children:[e.jsx(w,{className:"h-9 mt-1",children:e.jsx(S,{})}),e.jsx(C,{children:(Me?.storage_intervals||["1m","D"]).map(s=>e.jsx(o,{value:s,children:s==="1m"?"1 Minute":s==="D"?"Daily":s},s))})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Other timeframes (5m, 15m, 30m, 1h) computed from 1m data"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(m,{className:"font-medium",children:"Incremental Download"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Only download new data after last timestamp"})]}),e.jsx(pa,{checked:Is,onCheckedChange:za})]}),e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsxs(c,{className:"w-full h-10",onClick:()=>{if(d.size===0)mt();else{const s=f.filter(a=>d.has(`${a.symbol}:${a.exchange}`)).map(a=>({symbol:a.symbol,exchange:a.exchange}));ma(s,"watchlist")}},disabled:f.length===0,children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),d.size>0?`Download Selected (${d.size})`:`Download All (${f.length})`]}),d.size>0&&e.jsx(c,{variant:"outline",className:"w-full h-9",onClick:()=>W(new Set),children:"Clear Selection"})]})]})})]}),e.jsxs(R,{className:"flex flex-col",children:[e.jsx(js,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(gs,{className:"text-base",children:["Symbols (",f.length,")",d.size>0&&e.jsxs(u,{className:"ml-2",children:[d.size," selected"]})]}),e.jsxs("div",{className:"flex gap-2",children:[d.size>0&&e.jsxs(c,{variant:"destructive",size:"sm",onClick:()=>as(!0),children:[e.jsx(ne,{className:"h-4 w-4 mr-1"}),"Delete (",d.size,")"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{d.size===f.length?W(new Set):W(new Set(f.map(s=>`${s.symbol}:${s.exchange}`)))},children:d.size===f.length?"Deselect All":"Select All"})]})]})}),e.jsx(X,{className:"flex-1 p-0 overflow-hidden",children:e.jsx(ke,{className:"h-full",children:e.jsxs(ys,{children:[e.jsx(vs,{children:e.jsxs(L,{children:[e.jsx(_,{className:"w-10",children:e.jsx(q,{checked:d.size===f.length&&f.length>0,onCheckedChange:s=>{W(s?new Set(f.map(a=>`${a.symbol}:${a.exchange}`)):new Set)}})}),e.jsx(_,{children:"Symbol"}),e.jsx(_,{className:"hidden sm:table-cell",children:"Exchange"}),e.jsx(_,{className:"hidden md:table-cell",children:"Added"}),e.jsx(_,{className:"w-20 text-right",children:"Actions"})]})}),e.jsx(Ns,{children:f.length===0?e.jsx(L,{children:e.jsxs(j,{colSpan:5,className:"text-center py-12 text-muted-foreground",children:[e.jsx(ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No symbols in watchlist"}),e.jsx("p",{className:"text-sm mt-1",children:"Add symbols using the search above"})]})}):f.map(s=>e.jsxs(L,{className:O(d.has(`${s.symbol}:${s.exchange}`)&&"bg-muted/50"),children:[e.jsx(j,{children:e.jsx(q,{checked:d.has(`${s.symbol}:${s.exchange}`),onCheckedChange:()=>{W(a=>{const t=new Set(a),l=`${s.symbol}:${s.exchange}`;return t.has(l)?t.delete(l):t.add(l),t})}})}),e.jsxs(j,{className:"font-medium",children:[s.symbol,e.jsxs("span",{className:"sm:hidden text-xs text-muted-foreground ml-1",children:["(",s.exchange,")"]})]}),e.jsx(j,{className:"hidden sm:table-cell",children:e.jsx(u,{variant:"outline",children:s.exchange})}),e.jsx(j,{className:"hidden md:table-cell text-muted-foreground text-sm",children:new Date(s.added_at).toLocaleDateString()}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"h-7 w-7",asChild:!0,title:"View chart",children:e.jsx(ze,{to:`/historify/charts/${s.symbol}?exchange=${s.exchange}&interval=D`,children:e.jsx(ws,{className:"h-4 w-4"})})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>dt(s.symbol,s.exchange),title:"Remove from watchlist",children:e.jsx(Cs,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})]})]}),e.jsx(Te,{value:"jobs",className:"h-full m-0 p-4 overflow-auto",children:e.jsx("div",{className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(js,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(gs,{className:"text-base",children:"Download Jobs"}),e.jsxs(c,{variant:"outline",size:"sm",onClick:T,disabled:Ms,children:[e.jsx(Fe,{className:O("h-4 w-4 mr-1",Ms&&"animate-spin")}),"Refresh"]})]})}),e.jsx(X,{className:"p-0",children:e.jsx(ke,{className:"h-[calc(100vh-280px)]",children:de.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Ss,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No download jobs yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Start a download from the Watchlist tab"})]}):e.jsx("div",{className:"divide-y divide-border",children:de.map(s=>{const a=Ia[s.id],t=a?.percent||(s.total_symbols>0?Math.round(s.completed_symbols/s.total_symbols*100):0);return e.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:O("w-2 h-2 rounded-full",St(s.status))}),e.jsxs("span",{className:"font-medium truncate",children:["Job ",s.id]}),e.jsx(u,{variant:"outline",className:"text-xs",children:s.job_type}),e.jsx(u,{variant:s.status==="running"?"default":s.status==="paused"?"secondary":"outline",className:"text-xs",children:s.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.interval," | ",s.start_date," to ",s.end_date]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"h-3.5 w-3.5 text-green-500"}),s.completed_symbols]}),s.failed_symbols>0&&e.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(Yt,{className:"h-3.5 w-3.5"}),s.failed_symbols]}),e.jsxs("span",{className:"text-muted-foreground",children:["/ ",s.total_symbols," total"]})]}),(s.status==="running"||s.status==="paused")&&e.jsxs("div",{className:"mt-2",children:[e.jsx(At,{value:t,className:"h-1.5"}),a&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Downloading: ",a.symbol," (",t,"%)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="running"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>xt(s.id),children:e.jsx(Na,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",className:"text-destructive",onClick:()=>xa(s.id),children:e.jsx(ba,{className:"h-4 w-4"})})]}),s.status==="paused"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>ut(s.id),children:e.jsx(wa,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",className:"text-destructive",onClick:()=>xa(s.id),children:e.jsx(ba,{className:"h-4 w-4"})})]}),(s.status==="completed_with_errors"||s.status==="failed")&&s.failed_symbols>0&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>ft(s.id),children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Retry"]}),s.status!=="running"&&s.status!=="paused"&&e.jsx(c,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>pt(s.id),children:e.jsx(ne,{className:"h-4 w-4"})})]})]})},s.id)})})})})]})})}),e.jsx(Te,{value:"scheduler",className:"h-full m-0 p-4 overflow-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Scheduled Downloads"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automate data downloads on a schedule"})]}),e.jsxs(c,{onClick:()=>da(),children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"Create Schedule"]})]}),e.jsx(R,{children:e.jsx(X,{className:"p-0",children:Pa?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(J,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):me.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Fe,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No schedules created yet"}),e.jsx("p",{className:"text-sm",children:"Create a schedule to automate data downloads"})]}):e.jsx("div",{className:"divide-y divide-border",children:me.map(s=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium",children:s.name}),it(s),e.jsx(u,{variant:"outline",children:s.data_interval==="1m"?"1 Min":"Daily"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[ct(s),s.description&&` - ${s.description}`]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[s.next_run_at&&e.jsxs("span",{children:["Next: ",new Date(s.next_run_at).toLocaleString()]}),s.last_run_at&&e.jsxs("span",{children:["Last: ",new Date(s.last_run_at).toLocaleString()]}),e.jsxs("span",{children:["Runs: ",s.total_runs," (",s.successful_runs," ok, ",s.failed_runs," failed)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pa,{checked:s.is_enabled,onCheckedChange:()=>lt(s),title:s.is_enabled?"Disable schedule":"Enable schedule"}),s.is_enabled&&e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>nt(s),title:s.is_paused?"Resume":"Pause",children:s.is_paused?e.jsx(wa,{className:"h-4 w-4"}):e.jsx(Na,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>rt(s.id),disabled:!s.is_enabled||s.status==="running",title:"Run now",children:e.jsx(bs,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>da(s),title:"Edit",children:e.jsx(va,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{Y===s.id?Js(null):(Js(s.id),is(s.id))},title:"View history",children:Y===s.id?e.jsx(Cs,{className:"h-4 w-4"}):e.jsx($e,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>tt(s.id),title:"Delete",children:e.jsx(ne,{className:"h-4 w-4"})})]})]}),Y===s.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Recent Executions"}),!Ve[s.id]||Ve[s.id].length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No executions yet"}):e.jsxs(ys,{children:[e.jsx(vs,{children:e.jsxs(L,{children:[e.jsx(_,{children:"Time"}),e.jsx(_,{children:"Status"}),e.jsx(_,{className:"text-right",children:"Symbols"}),e.jsx(_,{className:"text-right",children:"Records"}),e.jsx(_,{children:"Error"})]})}),e.jsx(Ns,{children:Ve[s.id].map(a=>e.jsxs(L,{children:[e.jsx(j,{className:"text-sm",children:new Date(a.started_at).toLocaleString()}),e.jsx(j,{children:e.jsx(u,{variant:a.status==="completed"?"default":a.status==="running"?"secondary":"destructive",className:a.status==="completed"?"bg-green-500":a.status==="running"?"bg-blue-500":"",children:a.status})}),e.jsxs(j,{className:"text-right text-sm",children:[a.symbols_success,"/",a.symbols_processed,a.symbols_failed>0&&e.jsxs("span",{className:"text-destructive ml-1",children:["(",a.symbols_failed," failed)"]})]}),e.jsx(j,{className:"text-right text-sm",children:a.records_downloaded.toLocaleString()}),e.jsx(j,{className:"text-sm text-destructive max-w-[200px] truncate",children:a.error_message})]},a.id))})]})]})]},s.id))})})})]})})]})]})}),e.jsx(Ne,{open:Ra,onOpenChange:s=>{xe(s),s||ve()},children:e.jsxs(be,{className:"sm:max-w-lg",children:[e.jsxs(we,{children:[e.jsx(Se,{children:U?"Edit Schedule":"Create Schedule"}),e.jsx(Ce,{children:U?"Update schedule configuration":"Set up automated data downloads"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Name"}),e.jsx(F,{value:Ue,onChange:s=>Be(s.target.value),placeholder:"Daily Watchlist Update",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Description (optional)"}),e.jsx(F,{value:Vs,onChange:s=>We(s.target.value),placeholder:"Downloads daily data for all watchlist symbols",className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Schedule Type"}),e.jsxs(b,{value:ue,onValueChange:s=>Xe(s),children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(o,{value:"interval",children:"Interval"}),e.jsx(o,{value:"daily",children:"Daily"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Data Interval"}),e.jsxs(b,{value:Ws,onValueChange:s=>qe(s),children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(o,{value:"1m",children:"1 Minute"}),e.jsx(o,{value:"D",children:"Daily"})]})]})]})]}),ue==="interval"?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Every"}),e.jsxs(b,{value:String(Us),onValueChange:s=>He(parseInt(s)),children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(o,{value:"1",children:"1"}),e.jsx(o,{value:"5",children:"5"}),e.jsx(o,{value:"15",children:"15"}),e.jsx(o,{value:"30",children:"30"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Unit"}),e.jsxs(b,{value:Bs,onValueChange:s=>Ye(s),children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(o,{value:"minutes",children:"Minutes"}),e.jsx(o,{value:"hours",children:"Hours"})]})]})]})]}):e.jsxs("div",{children:[e.jsx(m,{children:"Time of Day (IST)"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs(b,{value:(()=>{const[s]=B.split(":").map(Number);return(s===0?12:s>12?s-12:s).toString()})(),onValueChange:s=>{const[a,t]=B.split(":").map(Number),l=a>=12;let n=parseInt(s);l?n=n===12?12:n+12:n=n===12?0:n,K(`${n.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`)},children:[e.jsx(w,{className:"w-20",children:e.jsx(S,{})}),e.jsx(C,{children:[12,1,2,3,4,5,6,7,8,9,10,11].map(s=>e.jsx(o,{value:s.toString(),children:s},s))})]}),e.jsx("span",{className:"flex items-center",children:":"}),e.jsxs(b,{value:B.split(":")[1]||"00",onValueChange:s=>{const[a]=B.split(":").map(Number);K(`${a.toString().padStart(2,"0")}:${s}`)},children:[e.jsx(w,{className:"w-20",children:e.jsx(S,{})}),e.jsx(C,{children:["00","15","30","45"].map(s=>e.jsx(o,{value:s,children:s},s))})]}),e.jsxs(b,{value:parseInt(B.split(":")[0])>=12?"PM":"AM",onValueChange:s=>{const[a,t]=B.split(":").map(Number),l=a===0?12:a>12?a-12:a;let n;s==="PM"?n=l===12?12:l+12:n=l===12?0:l,K(`${n.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`)},children:[e.jsx(w,{className:"w-20",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(o,{value:"AM",children:"AM"}),e.jsx(o,{value:"PM",children:"PM"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Lookback Days"}),e.jsx(F,{type:"number",min:"1",max:"30",value:Xs,onChange:s=>Qe(parseInt(s.target.value)||1),className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Incremental download from watchlist. Lookback used only for new symbols."})]})]}),e.jsxs(_e,{children:[e.jsx(c,{variant:"outline",onClick:()=>{xe(!1),ve()},children:"Cancel"}),e.jsxs(c,{onClick:at,disabled:Hs,children:[Hs&&e.jsx(J,{className:"h-4 w-4 animate-spin mr-1"}),U?"Update":"Create"]})]})]})}),e.jsx(Ne,{open:Ja,onOpenChange:ee,children:e.jsxs(be,{className:"sm:max-w-md",children:[e.jsxs(we,{children:[e.jsx(Se,{children:"Bulk Add Symbols"}),e.jsx(Ce,{children:"Add multiple symbols at once. One per line: SYMBOL,EXCHANGE"})]}),e.jsx(Mt,{placeholder:`RELIANCE,NSE
INFY,NSE
NIFTY24DEC25000CE,NFO`,value:qs,onChange:s=>Qs(s.target.value),rows:8}),e.jsxs(_e,{children:[e.jsx(c,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"}),e.jsxs(c,{onClick:ht,disabled:Zs,children:[Zs&&e.jsx(J,{className:"h-4 w-4 animate-spin mr-1"}),"Add Symbols"]})]})]})}),e.jsx(Ne,{open:Va,onOpenChange:fe,children:e.jsxs(be,{className:"sm:max-w-md",children:[e.jsxs(we,{children:[e.jsx(Se,{children:"Import Data"}),e.jsx(Ce,{children:"Upload a CSV or Parquet file with OHLCV data"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Symbol"}),e.jsx(F,{value:Ze,onChange:s=>Ks(s.target.value.toUpperCase()),placeholder:"RELIANCE",className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Exchange"}),e.jsxs(b,{value:ea,onValueChange:Ua,children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsx(C,{children:re.map(s=>e.jsx(o,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Interval"}),e.jsxs(b,{value:sa,onValueChange:Ba,children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsx(C,{children:(Me?.storage_intervals||["1m","D"]).map(s=>e.jsx(o,{value:s,children:s==="1m"?"1 Minute":s==="D"?"Daily":s},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Only 1min and Daily data can be stored"})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Data File"}),e.jsx(F,{ref:Ge,type:"file",accept:".csv,.parquet",onChange:vt,className:"mt-1"}),pe&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Selected: ",pe.name]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Download sample: "," ",e.jsx("a",{href:"/historify/api/sample/csv",className:"text-primary hover:underline",children:"CSV"})," | ",e.jsx("a",{href:"/historify/api/sample/parquet",className:"text-primary hover:underline",children:"Parquet"})]})]})]}),e.jsxs(_e,{children:[e.jsx(c,{variant:"outline",onClick:()=>fe(!1),children:"Cancel"}),e.jsxs(c,{onClick:Nt,disabled:ta,children:[ta&&e.jsx(J,{className:"h-4 w-4 animate-spin mr-1"}),"Upload"]})]})]})}),e.jsx(Ne,{open:Ya,onOpenChange:ge,children:e.jsxs(be,{className:"sm:max-w-xl",children:[e.jsxs(we,{children:[e.jsx(Se,{children:"Export Data"}),e.jsx(Ce,{children:"Export historical data with multiple timeframes"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Export Format"}),e.jsxs(b,{value:ls,onValueChange:s=>qa(s),children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(o,{value:"zip",children:"ZIP Archive (Recommended)"}),e.jsx(o,{value:"csv",children:"CSV (Single file)"}),e.jsx(o,{value:"parquet",children:"Parquet (ZSTD)"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Symbols to Export"}),e.jsxs(b,{value:I,onValueChange:s=>Qa(s),children:[e.jsx(w,{className:"mt-1",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsxs(o,{value:"all",children:["All (",z.length," symbols)"]}),e.jsxs(o,{value:"selected",children:["Selected (",v.size,")"]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"mb-2 block",children:"Select Timeframes to Export"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Intraday computed from 1m data. W/M/Q/Y computed from Daily data."}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:["1m","5m","15m","30m","1h","D","W","M","Q","Y"].map(s=>{const a=["5m","15m","30m","1h"].includes(s),t=["W","M","Q","Y"].includes(s),l=a||t,n=E.has(s);return e.jsxs("div",{className:O("flex flex-col items-center p-2 rounded-lg border cursor-pointer transition-colors",n?"bg-primary text-primary-foreground border-primary":"bg-muted/50 hover:bg-muted"),onClick:()=>{ye(p=>{const y=new Set(p);return y.has(s)?y.delete(s):y.add(s),y})},children:[e.jsx(q,{checked:n,className:O("mb-1",n&&"border-primary-foreground"),onClick:p=>p.stopPropagation(),onCheckedChange:()=>{ye(p=>{const y=new Set(p);return y.has(s)?y.delete(s):y.add(s),y})}}),e.jsx("span",{className:"font-medium text-sm",children:s}),e.jsx("span",{className:O("text-[10px]",n?"opacity-80":"text-muted-foreground"),children:l?"Computed":"Stored"})]},s)})}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Custom:"}),e.jsx(F,{type:"number",min:"1",max:"999",value:ns,onChange:s=>Za(s.target.value),className:"h-8 w-14 text-center",placeholder:"1"}),e.jsxs(b,{value:se,onValueChange:s=>Ga(s),children:[e.jsx(w,{className:"w-20 h-8",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(o,{value:"m",children:"min"}),e.jsx(o,{value:"h",children:"hr"}),e.jsx(o,{value:"W",children:"Week"}),e.jsx(o,{value:"M",children:"Month"}),e.jsx(o,{value:"Q",children:"Qtr"}),e.jsx(o,{value:"Y",children:"Year"})]})]}),e.jsxs(c,{variant:"outline",size:"sm",className:"h-8",onClick:()=>{const s=parseInt(ns)||1;let a;["W","M","Q","Y"].includes(se)?a=s===1?se:`${s}${se}`:a=`${ns}${se}`,s>0&&ye(t=>new Set([...t,a]))},children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"Add"]})]}),Array.from(E).filter(s=>!["1m","5m","15m","30m","1h","D","W","M","Q","Y"].includes(s)).length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Array.from(E).filter(s=>!["1m","5m","15m","30m","1h","D","W","M","Q","Y"].includes(s)).map(s=>e.jsxs(u,{variant:"secondary",className:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:()=>{ye(a=>{const t=new Set(a);return t.delete(s),t})},children:[s," ",e.jsx(Cs,{className:"h-3 w-3 ml-1"})]},s))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(m,{className:"text-sm",children:[I==="selected"?"Selected Symbols":"All Symbols"," (",I==="selected"?v.size:z.length,")"]}),I==="selected"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{const s=z.map(a=>`${a.symbol}:${a.exchange}`);M(new Set(s))},children:"Select All"}),e.jsx(c,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>M(new Set),children:"Clear"})]})]}),e.jsx(ke,{className:"h-40 border rounded-md p-2",children:e.jsx("div",{className:"space-y-1",children:z.map(s=>{const a=`${s.symbol}:${s.exchange}`,t=v.has(a);return I==="all"?e.jsxs("div",{className:"flex items-center justify-between text-sm py-1 border-b border-border/50 last:border-0",children:[e.jsx("span",{className:"font-medium",children:s.symbol}),e.jsx(u,{variant:"outline",className:"text-xs",children:s.exchange})]},a):e.jsxs("div",{className:O("flex items-center gap-2 text-sm py-1.5 px-2 rounded cursor-pointer transition-colors border-b border-border/50 last:border-0",t?"bg-primary/10":"hover:bg-muted/50"),onClick:()=>{M(l=>{const n=new Set(l);return n.has(a)?n.delete(a):n.add(a),n})},children:[e.jsx(q,{checked:t,onCheckedChange:()=>{M(l=>{const n=new Set(l);return n.has(a)?n.delete(a):n.add(a),n})},onClick:l=>l.stopPropagation()}),e.jsx("span",{className:"font-medium flex-1",children:s.symbol}),e.jsx(u,{variant:"outline",className:"text-xs",children:s.exchange})]},a)})})})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Export Summary:"}),e.jsxs("span",{className:"font-medium",children:[I==="selected"?v.size:z.length," symbols x ",E.size," timeframe",E.size!==1?"s":""]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Files: ",Array.from(E).sort().join(", ")]})]})]}),e.jsxs(_e,{children:[e.jsx(c,{variant:"outline",onClick:()=>ge(!1),children:"Cancel"}),e.jsxs(c,{onClick:bt,disabled:ca||E.size===0||I==="selected"&&v.size===0,children:[ca&&e.jsx(J,{className:"h-4 w-4 animate-spin mr-1"}),"Export (",E.size," timeframe",E.size!==1?"s":"",")"]})]})]})}),e.jsx(os,{open:Wa,onOpenChange:Ke,children:e.jsxs(ds,{children:[e.jsxs(hs,{children:[e.jsx(ms,{children:"Delete Data"}),e.jsxs(xs,{children:["Are you sure you want to delete all data for ",je?.symbol," (",je?.exchange,")? This action cannot be undone."]})]}),e.jsxs(us,{children:[e.jsx(fs,{children:"Cancel"}),e.jsx(ps,{onClick:jt,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})}),e.jsx(os,{open:Xa,onOpenChange:es,children:e.jsxs(ds,{children:[e.jsxs(hs,{children:[e.jsxs(ms,{children:["Delete ",v.size," Symbol(s)"]}),e.jsxs(xs,{children:["Are you sure you want to delete all data for the selected symbols? This will remove all historical data for:",e.jsxs("div",{className:"mt-2 max-h-32 overflow-y-auto text-sm",children:[Array.from(v).slice(0,10).map(s=>e.jsx("div",{className:"text-foreground",children:s.replace(":"," - ")},s)),v.size>10&&e.jsxs("div",{className:"text-muted-foreground",children:["...and ",v.size-10," more"]})]}),e.jsx("div",{className:"mt-2 font-medium text-destructive",children:"This action cannot be undone."})]})]}),e.jsxs(us,{children:[e.jsx(fs,{disabled:ss,children:"Cancel"}),e.jsx(ps,{onClick:gt,className:"bg-destructive text-destructive-foreground",disabled:ss,children:ss?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):`Delete ${v.size} Symbol(s)`})]})]})}),e.jsx(os,{open:Ha,onOpenChange:as,children:e.jsxs(ds,{children:[e.jsxs(hs,{children:[e.jsxs(ms,{children:["Remove ",d.size," Symbol(s) from Watchlist"]}),e.jsxs(xs,{children:["Are you sure you want to remove the selected symbols from your watchlist?",e.jsxs("div",{className:"mt-2 max-h-32 overflow-y-auto text-sm",children:[Array.from(d).slice(0,10).map(s=>e.jsx("div",{className:"text-foreground",children:s.replace(":"," - ")},s)),d.size>10&&e.jsxs("div",{className:"text-muted-foreground",children:["...and ",d.size-10," more"]})]}),e.jsx("div",{className:"mt-2 text-muted-foreground text-sm",children:"This will not delete any downloaded historical data."})]})]}),e.jsxs(us,{children:[e.jsx(fs,{disabled:ts,children:"Cancel"}),e.jsx(ps,{onClick:yt,className:"bg-destructive text-destructive-foreground",disabled:ts,children:ts?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Removing..."]}):`Remove ${d.size} Symbol(s)`})]})]})})]})}export{jl as default};
