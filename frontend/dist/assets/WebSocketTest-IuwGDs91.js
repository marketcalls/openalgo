import{r as c,j as e}from"./vendor-react--vsXx8_n.js";import{e as T,B as N,c as g,t as F}from"./index-6Vx6gL6o.js";import{I as _e}from"./input-IwpFITL6.js";import{S as Le,a as Me,b as Oe,c as ze,d as te}from"./select-CIBWFFd4.js";import{S as Ie}from"./switch-BhH5oxe7.js";import{as as re,R as ae,at as Pe,au as Fe,av as ne,aw as oe,ax as ce,V as Ue,e as ie,S as We,X as Qe,Z as qe,ap as Be,ay as De,ag as le,_ as de,j as Je,c as Ve,$ as Xe,ad as Ke,ae as He,Y as Ze}from"./vendor-icons-BPoFgeym.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-router-CclZ5Z6W.js";import"./vendor-radix-DIebA-qg.js";async function Ge(){return(await(await fetch("/auth/csrf-token",{credentials:"include"})).json()).csrf_token}const Ye=["NSE","NFO","BSE","BFO","CDS","MCX"];function W(a){return new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}function es(a){return a>=1e7?`${(a/1e7).toFixed(2)}Cr`:a>=1e5?`${(a/1e5).toFixed(2)}L`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toString()}function ss(a){return a?new Date(a).toLocaleTimeString("en-IN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--:--:--"}function _({status:a,size:f="md"}){const v=f==="sm"?"w-2 h-2":"w-3 h-3";return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:g(v,"rounded-full transition-all duration-500",a==="success"&&"bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.8)]",a==="warning"&&"bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.8)]",a==="error"&&"bg-rose-400 shadow-[0_0_8px_rgba(251,113,133,0.8)]",a==="idle"&&"bg-muted")}),a!=="idle"&&e.jsx("div",{className:g("absolute inset-0 rounded-full animate-ping opacity-40",a==="success"&&"bg-emerald-400",a==="warning"&&"bg-amber-400",a==="error"&&"bg-rose-400")})]})}function U({label:a,value:f,icon:v,status:p,subtitle:b}){return e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-transparent rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative px-4 py-3 rounded-lg bg-card border border-border hover:border-border/60 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx(v,{className:"w-3.5 h-3.5 text-muted-foreground"}),p&&e.jsx(_,{status:p,size:"sm"})]}),e.jsx("div",{className:"text-lg font-bold font-mono text-foreground tracking-tight",children:f}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mt-0.5",children:a}),b&&e.jsx("div",{className:"text-[9px] text-muted-foreground/60 mt-1",children:b})]})]})}function ue({price:a,quantity:f,maxQty:v,side:p}){const b=Math.min(f/v*100,100);return e.jsxs("div",{className:"relative flex items-center gap-2 py-1",children:[e.jsx("div",{className:"absolute inset-0 rounded overflow-hidden",children:e.jsx("div",{className:g("absolute top-0 bottom-0 transition-all duration-300",p==="buy"?"left-0 bg-gradient-to-r from-emerald-500/20 to-transparent":"right-0 bg-gradient-to-l from-rose-500/20 to-transparent"),style:{width:`${b}%`}})}),e.jsx("span",{className:"relative z-10 flex-1 font-mono text-xs text-muted-foreground",children:W(a)}),e.jsx("span",{className:g("relative z-10 font-mono text-xs font-medium",p==="buy"?"text-emerald-400":"text-rose-400"),children:f.toLocaleString()})]})}function us(){const[a,f]=c.useState(!1),[v,p]=c.useState(!1),[b,L]=c.useState(!1),[Q,me]=c.useState(!0),h=c.useRef(null),E=c.useRef(null),[xe,he]=c.useState(0),[q,ge]=c.useState(null),[j,y]=c.useState(new Map),[S,B]=c.useState(""),[M,fe]=c.useState(""),[D,O]=c.useState([]),[pe,k]=c.useState(!1),[be,J]=c.useState(!1),[je,ve]=c.useState(new Set),[we,Ne]=c.useState(new Set),[C,ye]=c.useState(!1),[A,V]=c.useState([]),[R,X]=c.useState([]),$=c.useRef(null),z=c.useRef(null),l=c.useCallback((s,t="info")=>{const r=new Date().toLocaleTimeString("en-IN",{hour12:!1});V(i=>[...i.slice(-199),{timestamp:r,message:s,type:t}])},[]),Se=c.useCallback(s=>{const t=new Date().toLocaleTimeString("en-IN",{hour12:!1});X(r=>[...r.slice(-99),`[${t}] ${s}`])},[]),K=c.useCallback(async()=>Ge(),[]),H=async()=>{if(h.current?.readyState===WebSocket.OPEN){l("Already connected","warn");return}p(!0),l("Initiating connection...","info");try{const s=await K(),r=await(await fetch("/api/websocket/config",{headers:{"X-CSRFToken":s},credentials:"include"})).json();if(r.status!=="success")throw new Error("Config fetch failed");const i=r.websocket_url;l(`Connecting to ${i}`,"info");const o=new WebSocket(i);o.onopen=async()=>{l("Connection established","success"),f(!0),p(!1);try{const n=await K(),x=await(await fetch("/api/websocket/apikey",{headers:{"X-CSRFToken":n},credentials:"include"})).json();x.status==="success"&&x.api_key?(o.send(JSON.stringify({action:"authenticate",api_key:x.api_key})),l("Auth request sent","info")):l("No API key found - visit /apikey","error")}catch(n){l(`Auth error: ${n}`,"error")}},o.onclose=n=>{f(!1),p(!1),L(!1),l(`Disconnected (code: ${n.code})`,n.wasClean?"info":"error"),Q&&!n.wasClean&&(l("Auto-reconnect in 3s...","warn"),E.current=setTimeout(H,3e3))},o.onerror=()=>{l("Connection error","error"),p(!1)},o.onmessage=n=>{he(u=>u+1),ge(Date.now()),Se(n.data);try{const u=JSON.parse(n.data);Ce(u)}catch{l("Parse error","error")}},h.current=o}catch(s){l(`Connection failed: ${s}`,"error"),p(!1)}},ke=()=>{E.current&&(clearTimeout(E.current),E.current=null),h.current&&(h.current.close(1e3,"User disconnect"),h.current=null),f(!1),L(!1),l("Disconnected by user","info")},Ce=c.useCallback(s=>{switch(s.type||s.status){case"auth":s.status==="success"?(L(!0),l(`Authenticated: ${s.user_id} @ ${s.broker}`,"success")):l(`Auth failed: ${s.message}`,"error");break;case"market_data":{const r=s.symbol.toUpperCase(),i=s.exchange,o=s.mode,n=s.data||{};y(u=>{const x=`${i}:${r}`,w=u.get(x);if(!w)return u;const d=new Map(u),m={...w.data};return(o===1||o===2)&&Object.assign(m,{ltp:n.ltp??m.ltp,open:n.open??m.open,high:n.high??m.high,low:n.low??m.low,close:n.close??m.close,volume:n.volume??m.volume,change:n.change??m.change,change_percent:n.change_percent??m.change_percent,timestamp:n.timestamp??m.timestamp}),o===3&&n.depth&&(m.depth=n.depth),d.set(x,{...w,data:m,lastUpdate:Date.now()}),d});break}case"subscribe":l(s.status==="success"?"Subscribed":`Sub error: ${s.message}`,s.status==="success"?"success":"error");break;case"unsubscribe":l("Unsubscribed","info");break;case"error":l(`Error: ${s.message}`,"error");break}},[l]),Z=(s,t,r)=>{if(!h.current||h.current.readyState!==WebSocket.OPEN){F.error("Not connected");return}h.current.send(JSON.stringify({action:"subscribe",symbols:[{symbol:s,exchange:t}],mode:r})),y(i=>{const o=`${t}:${s}`,n=i.get(o);if(!n)return i;const u=new Map(i),x=new Set(n.subscriptions);return x.add(r),u.set(o,{...n,subscriptions:x}),u}),l(`Sub: ${t}:${s} [${r}]`,"info")},G=(s,t,r)=>{if(!h.current||h.current.readyState!==WebSocket.OPEN)return;const i={LTP:1,Quote:2,Depth:3};h.current.send(JSON.stringify({action:"unsubscribe",symbols:[{symbol:s,exchange:t,mode:i[r]}],mode:r})),y(o=>{const n=`${t}:${s}`,u=o.get(n);if(!u)return o;const x=new Map(o),w=new Set(u.subscriptions);return w.delete(r),x.set(n,{...u,subscriptions:w}),x})},I=s=>{if(j.size===0){F.error("Add symbols first");return}j.forEach((t,r)=>{const[i,o]=r.split(":");Z(o,i,s)})},Y=()=>{!h.current||h.current.readyState!==WebSocket.OPEN||(h.current.send(JSON.stringify({action:"unsubscribe_all"})),y(s=>{const t=new Map(s);return t.forEach((r,i)=>t.set(i,{...r,subscriptions:new Set})),t}),l("Unsubscribed all","info"))},ee=c.useCallback(async(s,t)=>{if(s.length<2){O([]),k(!1);return}J(!0);try{const r=new URLSearchParams({q:s});t&&t!=="_all"&&r.append("exchange",t);const o=await(await fetch(`/search/api/search?${r}`,{credentials:"include"})).json();O((o.results||[]).slice(0,8)),k(!0)}catch(r){console.debug("Symbol search failed:",r),O([])}finally{J(!1)}},[]);c.useEffect(()=>{const s=setTimeout(()=>{S.length>=2&&ee(S,M)},200);return()=>clearTimeout(s)},[S,M,ee]);const Ee=(s,t)=>{const r=`${t}:${s}`;if(j.has(r)){F.error("Already added");return}y(i=>new Map(i).set(r,{symbol:s,exchange:t,data:{},subscriptions:new Set})),B(""),k(!1),l(`Added: ${r}`,"success")},Ae=(s,t)=>{const r=`${t}:${s}`;j.get(r)?.subscriptions.forEach(o=>G(s,t,o)),y(o=>{const n=new Map(o);return n.delete(r),n}),l(`Removed: ${r}`,"info")},Re=()=>{Y(),y(new Map),l("Cleared all symbols","info")},$e=s=>{ve(t=>{const r=new Set(t);return r.has(s)?r.delete(s):r.add(s),r})},Te=s=>{Ne(t=>{const r=new Set(t);return r.has(s)?r.delete(s):r.add(s),r})};c.useEffect(()=>{const s=t=>{z.current&&!z.current.contains(t.target)&&k(!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]),c.useEffect(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[A,R]),c.useEffect(()=>{const s=localStorage.getItem("ws_test_symbols");if(s)try{const t=JSON.parse(s),r=new Map;t.forEach(i=>{const[o,n]=i.split(":");r.set(i,{symbol:n,exchange:o,data:{},subscriptions:new Set})}),y(r)}catch(t){console.debug("Failed to load saved symbols:",t)}},[]),c.useEffect(()=>{localStorage.setItem("ws_test_symbols",JSON.stringify(Array.from(j.keys())))},[j]);const se=a?b?"success":"warning":v?"warning":"idle";return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx("div",{className:"fixed inset-0 opacity-[0.015] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative",children:[e.jsx("header",{className:"border-b border-border bg-background/80 backdrop-blur-xl sticky top-0 z-40",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/20 via-cyan-500/10 to-transparent border border-cyan-500/30 flex items-center justify-center",children:e.jsx(re,{className:"w-6 h-6 text-cyan-400"})}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5",children:e.jsx(_,{status:se})})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold tracking-tight flex items-center gap-2",children:["WebSocket Console",e.jsx(T,{variant:"outline",className:"text-[9px] border-cyan-500/30 text-cyan-400 font-mono",children:"TEST"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Real-time market data testing interface"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ie,{checked:Q,onCheckedChange:me}),e.jsx("span",{children:"Auto-reconnect"})]}),e.jsx("div",{className:"flex items-center gap-2",children:a?e.jsxs(N,{onClick:ke,variant:"outline",className:"gap-2 border-rose-500/30 text-rose-400 hover:bg-rose-500/10",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Disconnect"]}):e.jsxs(N,{onClick:H,disabled:v,className:"gap-2 bg-gradient-to-r from-cyan-600 to-cyan-500 hover:from-cyan-500 hover:to-cyan-400 text-white font-semibold shadow-lg shadow-cyan-500/20",children:[v?e.jsx(ae,{className:"w-4 h-4 animate-spin"}):e.jsx(Pe,{className:"w-4 h-4"}),v?"Connecting":"Connect"]})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-muted/50 border border-border",children:[b?e.jsx(ne,{className:"w-4 h-4 text-emerald-400"}):a?e.jsx(oe,{className:"w-4 h-4 text-amber-400"}):e.jsx(ce,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:g("text-sm font-medium",b?"text-emerald-400":a?"text-amber-400":"text-muted-foreground"),children:b?"Authenticated":a?"Connected":"Offline"})]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsx(U,{label:"Messages",value:xe,icon:Ue,subtitle:q?`${((Date.now()-q)/1e3).toFixed(1)}s ago`:"--"}),e.jsx(U,{label:"Symbols",value:j.size,icon:ie,subtitle:`${Array.from(j.values()).filter(s=>s.subscriptions.size>0).length} subscribed`}),e.jsx(U,{label:"Status",value:b?"Ready":a?"Pending":"Offline",icon:b?ne:a?oe:ce,status:se})]}),e.jsxs("div",{className:"rounded-xl bg-card border border-border p-5",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",ref:z,children:[e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(_e,{type:"text",placeholder:"Search symbols...",value:S,onChange:s=>B(s.target.value),onFocus:()=>S.length>=2&&k(!0),className:"pl-10 bg-muted/50 border-border/50 text-foreground placeholder:text-muted-foreground/60 focus:border-cyan-500/50 focus:ring-cyan-500/20"}),be&&e.jsx(ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground animate-spin"})]}),pe&&D.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-2 rounded-lg border border-border/50 bg-card backdrop-blur-xl shadow-2xl overflow-hidden",children:D.map((s,t)=>e.jsx("div",{className:"px-4 py-3 border-b border-border/50 last:border-0 hover:bg-cyan-500/5 cursor-pointer transition-colors",onClick:()=>Ee(s.symbol,s.exchange),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:s.symbol}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:s.name})]}),e.jsx(T,{variant:"outline",className:"text-[10px] border-border text-muted-foreground",children:s.exchange})]})},t))})]}),e.jsxs(Le,{value:M,onValueChange:fe,children:[e.jsx(Me,{className:"w-full lg:w-40 bg-muted/50 border-border/50 text-foreground/80",children:e.jsx(Oe,{placeholder:"All Exchanges"})}),e.jsxs(ze,{className:"bg-card border-border",children:[e.jsx(te,{value:"_all",children:"All Exchanges"}),Ye.map(s=>e.jsx(te,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[Array.from(j.entries()).map(([s,t])=>e.jsxs(T,{variant:"secondary",className:g("gap-1.5 py-1.5 px-3 border transition-colors",t.subscriptions.size>0?"bg-cyan-500/10 border-cyan-500/30 text-cyan-300":"bg-muted/50 border-border/50 text-muted-foreground"),children:[e.jsx("span",{className:"font-mono text-xs",children:s}),t.subscriptions.size>0&&e.jsx(_,{status:"success",size:"sm"}),e.jsx("button",{type:"button",onClick:()=>Ae(t.symbol,t.exchange),className:"ml-1 hover:text-rose-400 transition-colors",children:e.jsx(Qe,{className:"h-3 w-3"})})]},s)),j.size===0&&e.jsx("span",{className:"text-sm text-muted-foreground/60",children:"No symbols. Search to add."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{onClick:()=>I("LTP"),variant:"outline",disabled:!a,size:"sm",className:"border-amber-500/30 text-amber-400 hover:bg-amber-500/10 disabled:opacity-30",children:[e.jsx(qe,{className:"w-3.5 h-3.5 mr-1.5"})," LTP All"]}),e.jsxs(N,{onClick:()=>I("Quote"),variant:"outline",disabled:!a,size:"sm",className:"border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 disabled:opacity-30",children:[e.jsx(Be,{className:"w-3.5 h-3.5 mr-1.5"})," Quote All"]}),e.jsxs(N,{onClick:()=>I("Depth"),variant:"outline",disabled:!a,size:"sm",className:"border-violet-500/30 text-violet-400 hover:bg-violet-500/10 disabled:opacity-30",children:[e.jsx(ie,{className:"w-3.5 h-3.5 mr-1.5"})," Depth All"]}),e.jsxs(N,{onClick:Y,variant:"outline",disabled:!a,size:"sm",className:"border-rose-500/30 text-rose-400 hover:bg-rose-500/10 disabled:opacity-30",children:[e.jsx(De,{className:"w-3.5 h-3.5 mr-1.5"})," Unsub All"]}),e.jsxs(N,{onClick:Re,variant:"outline",size:"sm",className:"border-border/50 text-muted-foreground hover:bg-muted/50",children:[e.jsx(le,{className:"w-3.5 h-3.5 mr-1.5"})," Clear All"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Array.from(j.entries()).map(([s,t])=>{const r=t.data.change??0,i=t.data.change_percent??0,o=r>=0,n=t.data.ltp!==void 0,u=!!(t.lastUpdate&&Date.now()-t.lastUpdate<5e3),x=we.has(s),w=je.has(s);return e.jsxs("div",{className:g("rounded-xl border bg-card overflow-hidden transition-all",u?"border-cyan-500/40":"border-border"),children:[u&&e.jsx("div",{className:"h-0.5 bg-gradient-to-r from-cyan-500 via-emerald-500 to-cyan-500"}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>Te(s),className:"hover:text-cyan-400 transition-colors",children:x?e.jsx(de,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold font-mono text-lg",children:s}),u&&e.jsx(_,{status:"success",size:"sm"})]}),e.jsx("div",{className:"flex gap-1",children:["LTP","Quote","Depth"].map(d=>{const m=t.subscriptions.has(d);return e.jsx("button",{type:"button",onClick:()=>m?G(t.symbol,t.exchange,d):Z(t.symbol,t.exchange,d),className:g("px-2.5 py-1 text-[10px] font-bold rounded-md transition-all",m?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/40":"bg-muted/50 text-muted-foreground border border-border/50 hover:text-foreground"),children:d},d)})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-end justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mb-1",children:"LTP"}),e.jsx("div",{className:"text-3xl font-bold font-mono tracking-tight",children:n?`â‚¹${W(t.data.ltp)}`:"---"})]}),n&&e.jsxs("div",{className:g("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-sm font-semibold",o?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"),children:[o?e.jsx(Ve,{className:"w-4 h-4"}):e.jsx(Xe,{className:"w-4 h-4"}),o?"+":"",i.toFixed(2),"%"]})]}),(x||n)&&e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[{label:"Open",value:t.data.open},{label:"High",value:t.data.high,color:"text-emerald-400"},{label:"Low",value:t.data.low,color:"text-rose-400"},{label:"Close",value:t.data.close},{label:"Vol",value:t.data.volume,format:"volume"}].map(d=>e.jsxs("div",{className:"bg-muted/50 rounded-lg px-2 py-1.5",children:[e.jsx("div",{className:"text-[8px] uppercase tracking-wider text-muted-foreground",children:d.label}),e.jsx("div",{className:g("text-xs font-mono font-semibold mt-0.5",d.color||"text-foreground/80"),children:d.value!==void 0?d.format==="volume"?es(d.value):W(d.value):"--"})]},d.label))}),t.data.depth&&e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>$e(s),className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(de,{className:g("w-3 h-3 transition-transform",w&&"rotate-180")}),"Market Depth (",t.data.depth.buy.length,"/",t.data.depth.sell.length,")"]}),w&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 bg-muted/30 rounded-lg border border-border/40",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-[9px] uppercase tracking-wider text-emerald-400 mb-2 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-3 h-3"})," Bids"]}),t.data.depth.buy.slice(0,5).map((d,m)=>e.jsx(ue,{price:d.price,quantity:d.quantity,maxQty:Math.max(1,...t.data.depth.buy.map(P=>P.quantity)),side:"buy"},m))]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-[9px] uppercase tracking-wider text-rose-400 mb-2 flex items-center gap-1",children:[e.jsx(He,{className:"w-3 h-3"})," Asks"]}),t.data.depth.sell.slice(0,5).map((d,m)=>e.jsx(ue,{price:d.price,quantity:d.quantity,maxQty:Math.max(1,...t.data.depth.sell.map(P=>P.quantity)),side:"sell"},m))]})]})]}),e.jsx("div",{className:"text-[10px] text-muted-foreground/60 mt-3 font-mono",children:ss(t.data.timestamp)})]})]},s)})}),e.jsxs("div",{className:"rounded-xl bg-card border border-border overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Console"}),e.jsx(T,{variant:"outline",className:"text-[9px] border-border text-muted-foreground",children:C?R.length:A.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>ye(!C),className:g("h-7 px-2 text-xs",C?"text-cyan-400":"text-muted-foreground"),children:[e.jsx(Ze,{className:"w-3.5 h-3.5 mr-1"}),C?"Parsed":"Raw"]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>{V([]),X([])},className:"h-7 px-2 text-muted-foreground hover:text-foreground",children:e.jsx(le,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("div",{ref:$,className:"h-56 overflow-y-auto p-4 font-mono text-xs space-y-0.5",children:C?R.length===0?e.jsx("div",{className:"text-muted-foreground/60",children:"No raw messages..."}):R.map((s,t)=>e.jsx("div",{className:"text-muted-foreground break-all",children:s},t)):A.length===0?e.jsx("div",{className:"text-muted-foreground/60",children:"Waiting for events..."}):A.map((s,t)=>e.jsxs("div",{className:g("py-0.5",s.type==="success"&&"text-emerald-400",s.type==="error"&&"text-rose-400",s.type==="warn"&&"text-amber-400",s.type==="data"&&"text-cyan-400",s.type==="info"&&"text-muted-foreground"),children:[e.jsxs("span",{className:"text-muted-foreground/60",children:["[",s.timestamp,"]"]})," ",s.message]},t))})]})]})]})]})}export{us as default};
