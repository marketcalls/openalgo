import{r,j as e}from"./vendor-react--vsXx8_n.js";import{B as c,t as l}from"./index-DdPHSlQo.js";import{p as U}from"./python-strategy-Wm96WEuQ.js";import{A as Y,a as K}from"./alert-D44a0P9V.js";import{C as v,b as C,c as T,d as O,a as w}from"./card-Dp14EGeB.js";import{C as G}from"./checkbox-Ovmsy55a.js";import{C as R,b as q,a as H}from"./collapsible-oki6G1qf.js";import{I as x}from"./input-CDxyAgDD.js";import{L as d}from"./label-EiEdpQ72.js";import{b as W}from"./python-strategy-CJF1bPLS.js";import{A as $,I as X,aI as P,aS as A,P as Z}from"./vendor-icons-BPoFgeym.js";import{a as J,L as Q}from"./vendor-router-CclZ5Z6W.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-radix-DIebA-qg.js";const k=`"""
Example OpenAlgo Strategy
This is a minimal example showing how to use the OpenAlgo Python SDK.
"""

import os
import time
from openalgo import api

# Get API key from environment variable
API_KEY = os.getenv('OPENALGO_API_KEY')

# Initialize the API client
client = api(
    api_key=API_KEY,
    host_url="http://127.0.0.1:5000"
)

def main():
    """Main strategy logic"""
    print("Strategy started")

    # Example: Get account funds
    funds = client.funds()
    print(f"Available funds: {funds}")

    # Your trading logic here
    while True:
        # Check market conditions
        # Place orders based on your strategy
        # ...

        time.sleep(60)  # Check every minute

if __name__ == "__main__":
    main()
`;function he(){const u=J(),f=r.useRef(null),[i,g]=r.useState(""),[n,_]=r.useState(null),[y,j]=r.useState(!1),[N,E]=r.useState(!1),[a,I]=r.useState({}),[p,F]=r.useState("09:00"),[h,D]=r.useState("16:00"),[m,L]=r.useState(["mon","tue","wed","thu","fri"]),S=s=>{L(t=>t.includes(s)?t.filter(o=>o!==s):[...t,s])},z=()=>{const s={};return i.trim()?i.length<3||i.length>50?s.name="Name must be between 3 and 50 characters":/^[a-zA-Z0-9\s\-_]+$/.test(i)||(s.name="Name can only contain letters, numbers, spaces, hyphens, and underscores"):s.name="Strategy name is required",n?n.name.endsWith(".py")||(s.file="File must be a Python file (.py)"):s.file="Please select a Python file",p||(s.startTime="Start time is required"),h||(s.stopTime="Stop time is required"),m.length===0&&(s.days="Select at least one day"),I(s),Object.keys(s).length===0},B=s=>{const t=s.target.files?.[0];if(t){if(!t.name.endsWith(".py")){l.error("Please select a Python file (.py)");return}const o=1024*1024;if(t.size>o){l.error("File size must be less than 1MB");return}if(_(t),!i){const b=t.name.replace(".py","").replace(/_/g," ");g(b.charAt(0).toUpperCase()+b.slice(1))}}},M=async s=>{if(s.preventDefault(),!z()){l.error("Please fix the form errors");return}try{j(!0);const t=await U.uploadStrategy(i,n,{start_time:p,stop_time:h,days:m});t.status==="success"?(l.success("Strategy uploaded with schedule"),u("/python")):l.error(t.message||"Failed to upload strategy")}catch(t){console.error("Failed to upload strategy:",t);const o=t instanceof Error?t.message:"Failed to upload strategy";l.error(o)}finally{j(!1)}};return e.jsxs("div",{className:"container mx-auto py-6 max-w-2xl space-y-6",children:[e.jsx(c,{variant:"ghost",asChild:!0,children:e.jsxs(Q,{to:"/python",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Python Strategies"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Add Python Strategy"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload a Python script to run as an automated trading strategy"})]}),e.jsxs(Y,{children:[e.jsx(X,{className:"h-4 w-4"}),e.jsxs(K,{children:["Your Python script should use the ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"openalgo"})," ","SDK. Install it with: ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"pip install openalgo"})]})]}),e.jsxs(v,{children:[e.jsxs(C,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Upload Strategy"]}),e.jsx(O,{children:"Select your Python script file and give it a name"})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Strategy Name"}),e.jsx(x,{id:"name",placeholder:"My Trading Strategy",value:i,onChange:s=>g(s.target.value),className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A descriptive name for your strategy"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"file",children:"Python Script"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors ${a.file?"border-red-500":""}`,onClick:()=>f.current?.click(),children:[e.jsx("input",{ref:f,id:"file",type:"file",accept:".py",className:"hidden",onChange:B}),n?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(A,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(n.size/1024).toFixed(2)," KB"]})]})]}):e.jsxs("div",{children:[e.jsx(P,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to select a Python file (.py)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum file size: 1MB"})]})]}),a.file&&e.jsx("p",{className:"text-sm text-red-500",children:a.file})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("h3",{className:"font-medium",children:"Schedule"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure when this strategy should run. All times are in IST."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"startTime",children:"Start Time (IST)"}),e.jsx(x,{id:"startTime",type:"time",value:p,onChange:s=>F(s.target.value),className:a.startTime?"border-red-500":""}),a.startTime&&e.jsx("p",{className:"text-sm text-red-500",children:a.startTime})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"stopTime",children:"Stop Time (IST)"}),e.jsx(x,{id:"stopTime",type:"time",value:h,onChange:s=>D(s.target.value),className:a.stopTime?"border-red-500":""}),a.stopTime&&e.jsx("p",{className:"text-sm text-red-500",children:a.stopTime})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Schedule Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:W.map(s=>e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border rounded-lg cursor-pointer transition-colors ${m.includes(s.value)?"bg-primary text-primary-foreground border-primary":"hover:bg-muted"}`,onClick:()=>S(s.value),children:[e.jsx(G,{checked:m.includes(s.value),onCheckedChange:()=>S(s.value),className:"pointer-events-none"}),e.jsx("span",{className:"text-sm",children:s.label})]},s.value))}),a.days&&e.jsx("p",{className:"text-sm text-red-500",children:a.days}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the days when this strategy should run. Weekends can be enabled for special trading sessions."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(c,{type:"button",variant:"outline",className:"flex-1",onClick:()=>u("/python"),children:"Cancel"}),e.jsx(c,{type:"submit",className:"flex-1",disabled:y,children:y?"Uploading...":"Upload Strategy"})]})]})})]}),e.jsx(R,{open:N,onOpenChange:E,children:e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(q,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"w-full justify-between p-0",children:[e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Example Strategy Template"]}),e.jsx("span",{className:"text-muted-foreground",children:N?"Hide":"Show"})]})})}),e.jsx(H,{children:e.jsxs(w,{children:[e.jsx("pre",{className:"p-4 bg-muted rounded-lg overflow-x-auto text-xs font-mono",children:k}),e.jsx(c,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>{navigator.clipboard.writeText(k),l.success("Copied to clipboard")},children:"Copy Template"})]})})]})})]})}export{he as default};
