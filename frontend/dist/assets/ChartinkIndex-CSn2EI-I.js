import{r as t,j as e}from"./vendor-react-Z55t3GwI.js";import{B as r,e as a,t as i}from"./index-DkS0A_YW.js";import{c as j}from"./chartink-C17yeptY.js";import{A as u,b as g,a as p}from"./alert-BYe_53RR.js";import{C as l,a as n,b as N,c as f,d as v}from"./card-BzfevURh.js";import{S as c}from"./skeleton-CnoJGqq4.js";import{R as L,av as k,T as E,aH as _,Z as O,P as T,t as A,a2 as U,i as B,u as H}from"./vendor-icons-B3sIx3h3.js";import{a as I,L as b}from"./vendor-router-CuCQU4nC.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-radix-D7j7RylB.js";function Z(){const o=I(),[d,C]=t.useState([]),[w,m]=t.useState(!0),[y,x]=t.useState(null),h=async()=>{try{m(!0);const s=await j.getStrategies();C(s)}catch(s){console.error("Failed to fetch strategies:",s),i.error("Failed to load Chartink strategies")}finally{m(!1)}};t.useEffect(()=>{h()},[]);const S=async s=>{const R=j.getWebhookUrl(s);try{await navigator.clipboard.writeText(R),x(s),i.success("Webhook URL copied to clipboard"),setTimeout(()=>x(null),2e3)}catch{i.error("Failed to copy URL")}};return w?e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{className:"h-8 w-48"}),e.jsx(c,{className:"h-10 w-32"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(s=>e.jsx(c,{className:"h-48"},s))})]}):e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Chartink Strategies"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your Chartink webhook integrations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(r,{onClick:()=>o("/chartink/new"),children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"New Strategy"]})]})]}),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&e.jsxs(u,{variant:"destructive",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(g,{children:"Webhook URL not accessible!"}),e.jsxs(p,{children:["Chartink cannot send alerts to localhost. Use ",e.jsx("strong",{children:"ngrok"}),","," ",e.jsx("strong",{children:"Cloudflare Tunnel"}),", ",e.jsx("strong",{children:"VS Code Dev Tunnel"}),", or a"," ",e.jsx("strong",{children:"custom domain"})," to expose your OpenAlgo instance to the internet."]})]}),e.jsxs(u,{children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx(g,{children:"Chartink Webhook"}),e.jsxs(p,{children:["Receive alerts from Chartink screeners. Use these keywords in your alert name:",e.jsx("code",{className:"bg-muted px-1 mx-1 rounded",children:"BUY"}),",",e.jsx("code",{className:"bg-muted px-1 mx-1 rounded",children:"SELL"}),",",e.jsx("code",{className:"bg-muted px-1 mx-1 rounded",children:"SHORT"}),",",e.jsx("code",{className:"bg-muted px-1 mx-1 rounded",children:"COVER"})]})]}),d.length===0?e.jsx(l,{className:"py-12",children:e.jsxs(n,{className:"flex flex-col items-center justify-center text-center",children:[e.jsx(O,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Chartink Strategies"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first Chartink strategy to receive screener alerts."}),e.jsxs(r,{onClick:()=>o("/chartink/new"),children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Create Strategy"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(s=>e.jsxs(l,{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${s.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`}),e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{className:"text-lg",children:s.name}),e.jsx(v,{children:"Chartink"})]}),e.jsx(a,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{variant:"outline",className:"font-normal",children:s.is_intraday?"Intraday":"Positional"}),e.jsx(a,{variant:"outline",className:"font-normal",children:"NSE/BSE Only"})]}),s.is_intraday&&s.start_time&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.start_time," - ",s.end_time,s.squareoff_time&&` (SqOff: ${s.squareoff_time})`]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1 justify-start text-xs font-mono truncate",onClick:()=>S(s.webhook_id),children:[y===s.webhook_id?e.jsx(A,{className:"h-3 w-3 mr-2 text-green-500"}):e.jsx(U,{className:"h-3 w-3 mr-2"}),e.jsxs("span",{className:"truncate",children:[".../",s.webhook_id.slice(0,8),"..."]})]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(r,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsxs(b,{to:`/chartink/${s.id}/configure`,children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Symbols"]})}),e.jsx(r,{variant:"default",size:"sm",className:"flex-1",asChild:!0,children:e.jsxs(b,{to:`/chartink/${s.id}`,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"View"]})})]})]})]},s.id))}),e.jsxs(l,{children:[e.jsxs(N,{children:[e.jsx(f,{className:"text-lg",children:"Alert Keywords Reference"}),e.jsx(v,{children:"Include these keywords in your Chartink alert name to trigger orders"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(a,{className:"bg-green-500",children:"BUY"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Open long position"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(a,{className:"bg-red-500",children:"SELL"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Close long position"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(a,{className:"bg-orange-500",children:"SHORT"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Open short position"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(a,{className:"bg-blue-500",children:"COVER"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Close short position"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm",children:e.jsx("strong",{children:"Example Alert Names:"})}),e.jsxs("ul",{className:"text-sm text-muted-foreground mt-2 space-y-1",children:[e.jsx("li",{children:'• "BUY - RSI Oversold Stocks" → triggers BUY orders'}),e.jsx("li",{children:'• "SELL Signal - Moving Average Cross" → triggers SELL orders'}),e.jsx("li",{children:'• "SHORT - Bearish Breakout" → triggers SHORT orders'})]})]})]})]})]})}export{Z as default};
