import{r as a,j as e}from"./vendor-react-RhKMXzW9.js";import{u as _,B as o,t as g}from"./index-BOwMk2sa.js";import{A as F,a as A}from"./alert-D0Ai7f3J.js";import{C as d,b as h,c as m,d as H,a as u}from"./card-Dqjwrop5.js";import{I as D}from"./input-COOL7SGx.js";import{L as c}from"./label-Ce4e-RrZ.js";import{S as f,a as b,b as v,c as y,d as x}from"./select-BowbZg1L.js";import{T as X,a1 as I,R as $,m as K,I as Q,P as Z}from"./vendor-icons-Chlwwn8V.js";import{h as ee,o as se,a as ae}from"./vendor-syntax-D6hV6JR3.js";import"./vendor-router-DdyOoyPF.js";import"./vendor-radix-B_grJx4K.js";const re=[{value:"NSE",label:"NSE"},{value:"NFO",label:"NFO"},{value:"BSE",label:"BSE"},{value:"BFO",label:"BFO"},{value:"CDS",label:"CDS"},{value:"MCX",label:"MCX"}],te=[{value:"MIS",label:"MIS - Intraday"},{value:"NRML",label:"NRML - Carry Forward"},{value:"CNC",label:"CNC - Delivery"}];function ge(){const{mode:P}=_(),N=P==="dark",[t,C]=a.useState("NHPC"),[l,S]=a.useState("NSE"),[w,B]=a.useState("MIS"),[k,M]=a.useState("BUY"),[E,J]=a.useState("1"),[R,j]=a.useState([]),[q,n]=a.useState(!1),[z,L]=a.useState(!1),[i,V]=a.useState(""),p=a.useRef(null),G=`${window.location.origin}/api/v1/placeorder`,O=a.useCallback(async s=>{if(s.length<2){j([]),n(!1);return}L(!0);try{const r=new URLSearchParams({q:s});l&&r.append("exchange",l);const Y=await(await fetch(`/search/api/search?${r}`,{credentials:"include"})).json();j((Y.results||[]).slice(0,10)),n(!0)}catch(r){console.error("Search error:",r),j([])}finally{L(!1)}},[l]);a.useEffect(()=>{const s=setTimeout(()=>{t.length>=2&&O(t)},300);return()=>clearTimeout(s)},[t,O]),a.useEffect(()=>{const s=r=>{p.current&&!p.current.contains(r.target)&&n(!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const W=s=>{C(s.symbol),S(s.exchange),n(!1)},T=(s=!0)=>{if(!t||!l){s&&g.error("Please select a symbol and exchange");return}V(JSON.stringify({apikey:"YOUR_API_KEY",strategy:"GoCharting Alert",symbol:t,exchange:l,action:k,product:w,pricetype:"MARKET",quantity:E},null,2))};a.useEffect(()=>{T(!1)},[]);const U=async(s,r)=>{try{await navigator.clipboard.writeText(s),g.success(`${r} copied to clipboard`)}catch{g.error("Copy failed - please copy manually")}};return e.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"GoCharting Configuration"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Generate webhook configuration for GoCharting strategy alerts"})]}),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&e.jsxs(F,{variant:"destructive",className:"mb-8",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsxs(A,{className:"ml-2",children:[e.jsx("strong",{children:"Webhook URL not accessible!"})," GoCharting cannot send alerts to localhost. Use ",e.jsx("strong",{children:"ngrok"}),", ",e.jsx("strong",{children:"Cloudflare Tunnel"}),","," ",e.jsx("strong",{children:"VS Code Dev Tunnel"}),", or a ",e.jsx("strong",{children:"custom domain"})," to expose your OpenAlgo instance to the internet."]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsxs(h,{children:[e.jsx(m,{className:"text-primary",children:"Webhook URL"}),e.jsx(H,{children:"Use this URL in your GoCharting alerts"})]}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[e.jsx("code",{className:"flex-1 text-sm font-mono truncate",title:G,children:".../api/v1/placeorder"}),e.jsxs(o,{variant:"secondary",size:"sm",onClick:()=>U(G,"Webhook URL"),children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Copy"]})]})})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(m,{children:"Configuration"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"symbol",children:"Symbol"}),e.jsxs("div",{className:"relative",ref:p,children:[e.jsx(D,{id:"symbol",type:"text",placeholder:"Search for symbol...",value:t,onChange:s=>C(s.target.value),onFocus:()=>{t.length>=2&&n(!0)},autoComplete:"off"}),z&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})}),q&&R.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-background border rounded-lg shadow-lg max-h-64 overflow-y-auto",children:R.map((s,r)=>e.jsx("div",{className:"p-3 border-b last:border-b-0 hover:bg-muted cursor-pointer",onClick:()=>W(s),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.symbol}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.name})]}),e.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-1 rounded",children:s.exchange})]})},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"exchange",children:"Exchange"}),e.jsxs(f,{value:l,onValueChange:S,children:[e.jsx(b,{children:e.jsx(v,{placeholder:"Select Exchange"})}),e.jsx(y,{children:re.map(s=>e.jsx(x,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"product",children:"Product Type"}),e.jsxs(f,{value:w,onValueChange:B,children:[e.jsx(b,{children:e.jsx(v,{})}),e.jsx(y,{children:te.map(s=>e.jsx(x,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"action",children:"Action"}),e.jsxs(f,{value:k,onValueChange:M,children:[e.jsx(b,{children:e.jsx(v,{})}),e.jsxs(y,{children:[e.jsx(x,{value:"BUY",children:"BUY"}),e.jsx(x,{value:"SELL",children:"SELL"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"quantity",children:"Quantity"}),e.jsx(D,{id:"quantity",type:"number",min:"1",value:E,onChange:s=>J(s.target.value),placeholder:"Enter quantity"})]}),e.jsxs(o,{onClick:()=>T(),className:"w-full",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Generate JSON"]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(m,{children:"Generated JSON"}),e.jsxs(o,{variant:"secondary",size:"sm",onClick:()=>U(i,"JSON"),disabled:!i,children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Copy"]})]})}),e.jsx(u,{children:e.jsx("div",{className:"rounded-lg overflow-hidden border",children:i?e.jsx(ee,{language:"json",style:N?se:ae,customStyle:{margin:0,padding:"1rem",fontSize:"0.875rem",background:N?"#1e1e1e":"#f8f8f8"},children:i}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:e.jsx("p",{children:'Fill in the form and click "Generate JSON" to see the output'})})})})]}),e.jsxs(d,{className:"bg-accent text-accent-foreground",children:[e.jsx(h,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Need Help?"]})}),e.jsxs(u,{className:"space-y-4",children:[e.jsx("p",{children:"Learn how to set up automated trading using GoCharting webhooks with our comprehensive step-by-step guide."}),e.jsxs(F,{className:"bg-blue-500/10 border-blue-500",children:[e.jsx(Q,{className:"h-4 w-4 text-blue-500"}),e.jsxs(A,{className:"ml-2 text-sm",children:[e.jsx("strong",{children:"Premium Required:"})," Webhook alerts require GoCharting Premium Plan."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{asChild:!0,variant:"outline",size:"sm",children:e.jsx("a",{href:"/docs/gocharting_webhook_setup.md",download:!0,children:"Download Guide"})}),e.jsx(o,{asChild:!0,variant:"default",size:"sm",children:e.jsxs("a",{href:"https://docs.openalgo.in/trading-platform/gocharting",target:"_blank",rel:"noopener noreferrer",children:["Online Docs",e.jsx(Z,{className:"h-4 w-4 ml-2"})]})})]})]})]})]})]})]})}export{ge as default};
