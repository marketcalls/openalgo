import{r as a,j as e}from"./vendor-react-CCyQGCED.js";import{w as y,s as r,B as h}from"./index-NHrG-O_Z.js";import{C as n,a as i,b as o,c as x,d as l}from"./card-Cn20bp_v.js";import{I as w}from"./input-BylzFlgY.js";import{L as u}from"./label-_1WWiomg.js";import{S as T}from"./switch-DETUyPBc.js";import{N as I,k as A,K as B,m as R,E as D,x as F,ar as V}from"./vendor-icons-CCn_k3dF.js";import{L as O}from"./vendor-router-Dzc1xxhr.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-radix-CYVJEJRR.js";function X(){const[c,C]=a.useState(null),[S,E]=a.useState(!0),[p,j]=a.useState(!1),[d,g]=a.useState(""),[m,_]=a.useState(!1),[f,N]=a.useState(!0),[b,v]=a.useState(10);a.useEffect(()=>{k()},[]);const k=async()=>{try{const t=(await y.get("/telegram/api/config")).data.data;C(t),N(t.broadcast_enabled),v(t.rate_limit_per_minute)}catch{r.error("Failed to load configuration","telegram")}finally{E(!1)}},L=async()=>{j(!0);try{const s={broadcast_enabled:f,rate_limit_per_minute:b};d&&(s.token=d);const t=await y.post("/telegram/config",s);t.data.status==="success"?(r.success("Configuration saved successfully","telegram"),g(""),k()):r.error(t.data.message||"Failed to save configuration","telegram")}catch(s){const t=s;r.error(t.response?.data?.message||"Failed to save configuration","telegram")}finally{j(!1)}};return S?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{to:"/telegram",className:"text-muted-foreground hover:text-foreground",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(A,{className:"h-6 w-6"}),"Bot Configuration"]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure your Telegram bot settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Bot Token"]}),e.jsx(x,{children:"Your Telegram Bot API token from @BotFather"})]}),e.jsxs(l,{className:"space-y-4",children:[c?.has_token&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[e.jsx(R,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Token is configured"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:c?.has_token?"Update Token (optional)":"Bot Token"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(w,{type:m?"text":"password",placeholder:c?.has_token?"Enter new token to update":"Enter your bot token",value:d,onChange:s=>g(s.target.value),className:"pr-10"}),e.jsx(h,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>_(!m),children:m?e.jsx(D,{className:"h-4 w-4"}):e.jsx(F,{className:"h-4 w-4"})})]})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get your token from @BotFather on Telegram"})]})]})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(o,{children:"Settings"}),e.jsx(x,{children:"Configure bot behavior and limits"})]}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u,{children:"Broadcast Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow sending broadcast messages to all users"})]}),e.jsx(T,{checked:f,onCheckedChange:N})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Rate Limit (messages per minute)"}),e.jsx(w,{type:"number",value:b,onChange:s=>v(parseInt(s.target.value,10)||10),min:1,max:60}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum messages per minute per user (1-60)"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3",children:[e.jsx("a",{href:"https://docs.openalgo.in/trading-platform/telegram",target:"_blank",rel:"noopener noreferrer",children:e.jsxs(h,{variant:"outline",className:"w-full sm:w-auto",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),"View Documentation"]})}),e.jsxs(h,{onClick:L,disabled:p,children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),p?"Saving...":"Save Configuration"]})]}),e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(o,{children:"Quick Setup Guide"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Need detailed instructions?"})," Visit our complete"," ",e.jsx("a",{href:"https://docs.openalgo.in/trading-platform/telegram",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-semibold",children:"Telegram Bot Setup Guide"})," ","for step-by-step instructions with screenshots."]})}),e.jsxs("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[e.jsx("h4",{className:"text-base font-semibold mb-2",children:"Quick Steps:"}),e.jsxs("ol",{className:"text-muted-foreground space-y-1 list-decimal list-inside text-sm",children:[e.jsxs("li",{children:["Get a bot token from ",e.jsx("strong",{children:"@BotFather"})," on Telegram"]}),e.jsx("li",{children:'Paste the token above and click "Save Configuration"'}),e.jsx("li",{children:"Start the bot from the dashboard"}),e.jsxs("li",{children:["Open your bot in Telegram and send"," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"/start"})]}),e.jsxs("li",{children:["Link your account:"," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"/link YOUR_API_KEY YOUR_HOST_URL"})]})]})]})]})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(o,{children:"Bot Commands Available"}),e.jsx(x,{children:"Commands users can send to your bot"})]}),e.jsx(l,{children:e.jsxs("div",{className:"bg-muted rounded-lg p-4 font-mono text-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Account Management"}),e.jsx("p",{children:"/start - Initialize bot"}),e.jsx("p",{children:"/link <api_key> <host_url> - Link account"}),e.jsx("p",{children:"/unlink - Unlink account"}),e.jsx("p",{children:"/status - Check connection"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Trading Information"}),e.jsx("p",{children:"/menu - Interactive menu"}),e.jsx("p",{children:"/orderbook - View orders"}),e.jsx("p",{children:"/tradebook - View trades"}),e.jsx("p",{children:"/positions - Open positions"}),e.jsx("p",{children:"/holdings - View holdings"}),e.jsx("p",{children:"/funds - Account funds"}),e.jsx("p",{children:"/pnl - P&L summary"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Market Data"}),e.jsx("p",{children:"/quote RELIANCE - Get NSE quote"}),e.jsx("p",{children:"/quote NIFTY NSE_INDEX - Index quote"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"# Charts (default: 5m intraday)"}),e.jsx("p",{children:"/chart RELIANCE - 5min chart"}),e.jsx("p",{children:"/chart RELIANCE NSE daily - Daily chart"}),e.jsx("p",{children:"/chart RELIANCE NSE intraday 15m 10 - Custom"}),e.jsx("p",{children:"/chart RELIANCE NSE both - Both charts"})]}),e.jsx("div",{children:e.jsx("p",{children:"/help - Show all commands"})})]})})]})]})}export{X as default};
