import{r,j as e,a as Ne}from"./vendor-react-RhKMXzW9.js";import{d as we,o as ve,l as ke,e as O,B as R,c as w,t as K,s as M}from"./index-jKwbuiNk.js";import{t as ie}from"./trading-CTzX9C-q.js";import{A as Ce,a as Se,b as Pe,c as Te,d as Ee,e as De,f as Re,g as Ae,h as Fe}from"./alert-dialog-29IpNxSZ.js";import{C as Y,b as se,d as ne,c as ae,a as Oe}from"./card-hrCVAlqH.js";import{D as Me,a as Le,b as _e,c as $e,d as qe,e as Ie,f as Ue}from"./dialog-fZNDS-p1.js";import{L as re}from"./label-ikXJoBpC.js";import{T as Ge,a as Be,b as le,c as Z,d as ze,e as p,f as We}from"./table-C0w3lHXi.js";import{Q as He,V as Xe,R as Je,D as Ve,X as de,L as Qe,w as Ke,W as Ye,c as Ze,Y as et,_ as tt}from"./vendor-icons-Chlwwn8V.js";import"./vendor-syntax-D6hV6JR3.js";import"./vendor-router-DdyOoyPF.js";import"./vendor-radix-B_grJx4K.js";async function st(){return(await(await fetch("/auth/csrf-token",{credentials:"include"})).json()).csrf_token}function nt({symbols:d,mode:x="LTP",enabled:b=!0,autoReconnect:v=!0}){const[L,X]=r.useState(new Map),[q,I]=r.useState(!1),[A,u]=r.useState(!1),[_,c]=r.useState(!1),[J,D]=r.useState(null),k=r.useRef(null),S=r.useRef(null),U=r.useRef(new Set),F=r.useRef([]),G=r.useCallback(async()=>st(),[]),B=r.useCallback(C=>{if(!k.current||k.current.readyState!==WebSocket.OPEN||!A){F.current=C;return}const h=C.filter(g=>{const i=`${g.exchange}:${g.symbol}`;return!U.current.has(i)});h.length!==0&&(k.current.send(JSON.stringify({action:"subscribe",symbols:h,mode:x})),h.forEach(g=>{const i=`${g.exchange}:${g.symbol}`;U.current.add(i),X(y=>{const o=new Map(y);return o.has(i)||o.set(i,{symbol:g.symbol,exchange:g.exchange,data:{}}),o})}))},[A,x]),V=r.useCallback(C=>{try{const h=JSON.parse(C.data);switch(h.type||h.status){case"auth":h.status==="success"?(u(!0),D(null),F.current.length>0&&setTimeout(()=>{B(F.current),F.current=[]},100)):D(`Authentication failed: ${h.message}`);break;case"market_data":{const i=h.symbol.toUpperCase(),y=h.exchange,o=h.data||{},f=`${y}:${i}`;X(P=>{const H=P.get(f);if(!H)return P;const T=new Map(P),N={...H.data};return Object.assign(N,{ltp:o.ltp??N.ltp,open:o.open??N.open,high:o.high??N.high,low:o.low??N.low,close:o.close??N.close,volume:o.volume??N.volume,change:o.change??N.change,change_percent:o.change_percent??N.change_percent,timestamp:o.timestamp??N.timestamp}),T.set(f,{...H,data:N,lastUpdate:Date.now()}),T});break}case"subscribe":break;case"error":D(`WebSocket error: ${h.message}`);break}}catch{}},[B]),z=r.useCallback(async()=>{if(k.current?.readyState!==WebSocket.OPEN){c(!0),D(null);try{const C=await G(),g=await(await fetch("/api/websocket/config",{headers:{"X-CSRFToken":C},credentials:"include"})).json();if(g.status!=="success")throw new Error("Failed to get WebSocket configuration");const i=g.websocket_url,y=new WebSocket(i);y.onopen=async()=>{I(!0),c(!1);try{const o=await G(),P=await(await fetch("/api/websocket/apikey",{headers:{"X-CSRFToken":o},credentials:"include"})).json();P.status==="success"&&P.api_key?y.send(JSON.stringify({action:"authenticate",api_key:P.api_key})):D("No API key found - please generate one at /apikey")}catch(o){D(`Authentication error: ${o}`)}},y.onclose=o=>{I(!1),c(!1),u(!1),U.current.clear(),v&&!o.wasClean&&b&&(S.current=setTimeout(z,3e3))},y.onerror=()=>{D("WebSocket connection error"),c(!1)},y.onmessage=V,k.current=y}catch(C){D(`Connection failed: ${C}`),c(!1)}}},[G,V,v,b]),W=r.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null),k.current&&(k.current.close(1e3,"User disconnect"),k.current=null),I(!1),u(!1),U.current.clear()},[]);return r.useEffect(()=>(b&&d.length>0&&!q&&!_&&z(),()=>{S.current&&clearTimeout(S.current)}),[b,d.length,q,_,z]),r.useEffect(()=>{A&&d.length>0&&B(d)},[A,d,B]),r.useEffect(()=>()=>{W()},[W]),{data:L,isConnected:q,isAuthenticated:A,isConnecting:_,error:J,connect:z,disconnect:W}}const ue="openalgo_positions_prefs";function ee(d){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(d)}function at(d,x){if(x==="NSE"||x==="BSE")return{underlying:d,expiry:null,strike:null,optionType:null};const b=d.match(/^(.+?)(\d{1,2}[A-Z]{3}\d{2})FUT$/i);if(b)return{underlying:b[1],expiry:b[2],strike:null,optionType:"FUT"};const v=d.match(/^(.+?)(\d{1,2}[A-Z]{3}\d{2})(\d+\.?\d*)(CE|PE)$/i);return v?{underlying:v[1],expiry:v[2],strike:v[3],optionType:v[4]}:{underlying:d,expiry:null,strike:null,optionType:null}}function xe(d){const x=d.average_price||0,b=d.quantity||0,v=d.pnl||0;if(x===0||b===0)return 0;const L=Math.abs(x*b);return L>0?v/L*100:0}const rt={NSE:"bg-cyan-500/20 text-cyan-600 border-cyan-500/30",BSE:"bg-slate-500/20 text-slate-600 border-slate-500/30",NFO:"bg-purple-500/20 text-purple-600 border-purple-500/30",BFO:"bg-amber-500/20 text-amber-600 border-amber-500/30",MCX:"bg-blue-500/20 text-blue-600 border-blue-500/30",CDS:"bg-teal-500/20 text-teal-600 border-teal-500/30"},lt={CNC:"bg-purple-500/20 text-purple-600 border-purple-500/30",MIS:"bg-cyan-500/20 text-cyan-600 border-cyan-500/30",NRML:"bg-slate-500/20 text-slate-600 border-slate-500/30"};function bt(){const{apiKey:d}=we(),[x,b]=r.useState([]),[v,L]=r.useState(!0),[X,q]=r.useState(!1),[I,A]=r.useState(null),[u,_]=r.useState("none"),[c,J]=r.useState({product:[],direction:[],exchange:[]}),[D,k]=r.useState(new Set),[S,U]=r.useState(null),[F,G]=r.useState("asc"),[B,V]=r.useState(!1),z=r.useMemo(()=>x.map(t=>({symbol:t.symbol,exchange:t.exchange})),[x]),{data:W,isConnected:C}=nt({symbols:z,mode:"LTP",enabled:x.length>0}),h=r.useMemo(()=>x.map(t=>{const s=`${t.exchange}:${t.symbol}`,n=W.get(s),a=t.quantity||0;if(n?.data?.ltp&&n.lastUpdate&&Date.now()-n.lastUpdate<5e3){const l=n.data.ltp;if(a===0)return{...t,ltp:l};const j=t.average_price||0,m=(l-j)*a,oe=Math.abs(j*a),ye=oe>0?m/oe*100:0;return{...t,ltp:l,pnl:m,pnlpercent:ye}}return t}),[x,W]);r.useEffect(()=>{try{const t=localStorage.getItem(ue);if(t){const s=JSON.parse(t);s.grouping&&_(s.grouping),s.filters&&J({product:s.filters.product||[],direction:s.filters.direction||[],exchange:s.filters.exchange||[]})}}catch(t){console.error("Error loading preferences:",t)}},[]);const g=r.useCallback(()=>{localStorage.setItem(ue,JSON.stringify({grouping:u,filters:c}))},[u,c]);r.useEffect(()=>{g()},[g]);const i=r.useCallback(async(t=!1)=>{if(!d){L(!1);return}t&&q(!0);try{const s=await ie.getPositions(d);s.status==="success"&&s.data?(b(s.data),A(null)):A(s.message||"Failed to fetch positions")}catch{A("Failed to fetch positions")}finally{L(!1),q(!1)}},[d]);r.useEffect(()=>{i();const s=setInterval(()=>i(),C?3e4:1e4);return()=>clearInterval(s)},[i,C]),r.useEffect(()=>{const t=ve(()=>{i()});return()=>t()},[i]);const y=r.useRef(null);r.useEffect(()=>{const t=window.location.protocol,s=window.location.hostname,n=window.location.port;y.current=ke(`${t}//${s}:${n}`,{transports:["websocket","polling"]});const a=y.current;return a.on("order_event",()=>{setTimeout(()=>i(),500)}),a.on("analyzer_update",()=>{setTimeout(()=>i(),500)}),a.on("close_position_event",()=>{setTimeout(()=>i(),500)}),()=>{a.disconnect()}},[i]);const o=r.useCallback(t=>{const s=t.exchange,n=t.product;if(s==="NSE"||s==="BSE"){if(n==="CNC")return"Equity (Delivery)";if(n==="MIS")return"Equity (Intraday)"}const a=at(t.symbol,s);return u==="underlying"?a.underlying:u==="underlying_expiry"&&a.expiry?`${a.underlying} - ${a.expiry}`:a.underlying},[u]),f=r.useMemo(()=>h.filter(t=>{if(c.product.length>0&&!c.product.includes(t.product))return!1;const s=t.quantity||0;if(c.direction.length>0){const n=s>0,a=s<0;if(c.direction.includes("LONG")&&!c.direction.includes("SHORT")&&!n||c.direction.includes("SHORT")&&!c.direction.includes("LONG")&&!a)return!1}return!(c.exchange.length>0&&!c.exchange.includes(t.exchange))}),[h,c]),P=r.useMemo(()=>S===null?f:[...f].sort((t,s)=>{let n,a;switch(S){case 0:n=t.symbol,a=s.symbol;break;case 3:n=t.quantity||0,a=s.quantity||0;break;case 4:n=t.average_price||0,a=s.average_price||0;break;case 6:n=t.pnl||0,a=s.pnl||0;break;case 7:n=xe(t),a=xe(s);break;default:return 0}return typeof n=="string"?F==="asc"?n.localeCompare(a):a.localeCompare(n):F==="asc"?n-a:a-n}),[f,S,F]),H=r.useMemo(()=>{if(u==="none")return{_all:P};const t={};return P.forEach(s=>{const n=o(s);t[n]||(t[n]=[]),t[n].push(s)}),t},[P,u,o]),T=r.useMemo(()=>{const t=f.length,s=f.filter(l=>(l.quantity||0)>0).length,n=f.filter(l=>(l.quantity||0)<0).length,a=f.reduce((l,j)=>l+(j.pnl||0),0);return{total:t,long:s,short:n,totalPnl:a}},[f]),N=t=>{S===t?G(F==="asc"?"desc":"asc"):(U(t),G("asc"))},he=(t,s)=>{J(n=>{const a=n[t];return a.indexOf(s)>-1?{...n,[t]:a.filter(j=>j!==s)}:{...n,[t]:[...a,s]}})},ce=()=>{J({product:[],direction:[],exchange:[]}),_("none"),k(new Set)},pe=t=>{k(s=>{const n=new Set(s);return n.has(t)?n.delete(t):n.add(t),n})},te=c.product.length>0||c.direction.length>0||c.exchange.length>0||u!=="none",me=async t=>{try{const s=await ie.closePosition(t.symbol,t.exchange,t.product);s.status==="success"?i(!0):K.error(s.message||"Failed to close position")}catch(s){console.error("Close position error:",s),K.error("Failed to close position")}},ge=async()=>{try{const t=await ie.closeAllPositions();t.status==="success"?(K.success("All positions closed"),i(!0)):K.error(t.message||"Failed to close all positions")}catch(t){console.error("Close all positions error:",t),K.error("Failed to close all positions")}},fe=()=>{const t=["Symbol","Exchange","Product","Quantity","Avg Price","LTP","P&L","P&L %"],s=f.map(m=>[M(m.symbol),M(m.exchange),M(m.product),M(m.quantity),M(m.average_price),M(m.ltp),M(m.pnl),M(m.pnlpercent)]),n=[t,...s].map(m=>m.join(",")).join(`
`),a=new Blob([n],{type:"text/csv"}),l=URL.createObjectURL(a),j=document.createElement("a");j.href=l,j.download=`positions_${new Date().toISOString().split("T")[0]}.csv`,j.click()},$=t=>t>=0,E=({type:t,value:s,label:n})=>e.jsx(R,{variant:c[t].includes(s)?"default":"outline",size:"sm",className:w("rounded-full",c[t].includes(s)&&"bg-pink-500 hover:bg-pink-600"),onClick:()=>he(t,s),children:n}),Q=({column:t,label:s,className:n})=>e.jsx(Z,{className:w("cursor-pointer hover:bg-muted/50 select-none",n),onClick:()=>N(t),children:e.jsxs("div",{className:w("flex items-center gap-1 w-full",n?.includes("text-right")&&"justify-end"),children:[s,e.jsx(tt,{className:"h-3 w-3 opacity-50"})]})}),je=t=>{let s=0,n=0;t.forEach(l=>{s+=l.pnl||0;const j=l.average_price||0,m=Math.abs(l.quantity||0);n+=j*m});const a=n>0?s/n*100:0;return{totalPnl:s,pnlPercent:a,count:t.length}},be=Object.keys(H).sort((t,s)=>t.startsWith("Equity")&&!s.startsWith("Equity")?-1:!t.startsWith("Equity")&&s.startsWith("Equity")?1:t.localeCompare(s));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Positions"}),C&&e.jsxs(O,{variant:"outline",className:"bg-emerald-500/10 text-emerald-600 border-emerald-500/30 gap-1",children:[e.jsx(He,{className:"h-3 w-3 animate-pulse"}),"Live"]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage your active trading positions"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(Me,{open:B,onOpenChange:V,children:[e.jsx(Le,{asChild:!0,children:e.jsxs(R,{variant:te?"default":"outline",size:"sm",className:"relative",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Settings",te&&e.jsx("span",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full"})]})}),e.jsxs(_e,{className:"max-w-md",children:[e.jsxs($e,{children:[e.jsx(qe,{children:"Position Settings"}),e.jsx(Ie,{children:"Configure grouping and filters"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Grouping"}),e.jsx("div",{className:"space-y-2",children:[{value:"none",label:"None"},{value:"underlying",label:"Underlying"},{value:"underlying_expiry",label:"Underlying & Expiry"}].map(t=>e.jsxs("label",{className:w("flex items-center gap-3 cursor-pointer p-2 rounded hover:bg-muted",u===t.value&&"bg-pink-500/10 border border-pink-500/30"),children:[e.jsx("input",{type:"radio",name:"grouping",checked:u===t.value,onChange:()=>{_(t.value),k(new Set)},className:"accent-pink-500"}),e.jsx("span",{className:w(u===t.value&&"text-pink-500 font-semibold"),children:t.label})]},t.value))})]}),e.jsx("div",{className:"border-t"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Product Type"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(E,{type:"product",value:"CNC",label:"CNC"}),e.jsx(E,{type:"product",value:"MIS",label:"MIS"}),e.jsx(E,{type:"product",value:"NRML",label:"NRML"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Direction"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(E,{type:"direction",value:"LONG",label:"Long"}),e.jsx(E,{type:"direction",value:"SHORT",label:"Short"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Exchange"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(E,{type:"exchange",value:"NSE",label:"NSE"}),e.jsx(E,{type:"exchange",value:"BSE",label:"BSE"}),e.jsx(E,{type:"exchange",value:"NFO",label:"NFO"}),e.jsx(E,{type:"exchange",value:"BFO",label:"BFO"}),e.jsx(E,{type:"exchange",value:"MCX",label:"MCX"}),e.jsx(E,{type:"exchange",value:"CDS",label:"CDS"})]})]})]}),e.jsxs(Ue,{children:[e.jsx(R,{variant:"ghost",onClick:ce,children:"Clear All"}),e.jsx(R,{onClick:()=>V(!1),children:"Done"})]})]})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>i(!0),disabled:X,children:[e.jsx(Je,{className:w("h-4 w-4 mr-2",X&&"animate-spin")}),"Refresh"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:fe,children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(R,{variant:"destructive",size:"sm",disabled:x.length===0,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Close All"]})}),e.jsxs(Pe,{children:[e.jsxs(Te,{children:[e.jsx(Ee,{children:"Close All Positions?"}),e.jsxs(De,{children:["This will close all ",x.length," open positions at market price. This action cannot be undone."]})]}),e.jsxs(Re,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Fe,{onClick:ge,children:"Close All"})]})]})]})]})]}),te&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Filters:"}),u!=="none"&&e.jsxs(O,{variant:"secondary",className:"bg-pink-500/10 text-pink-600 border-pink-500/30",children:["Grouped: ",u==="underlying"?"Underlying":"Underlying & Expiry"]}),c.product.map(t=>e.jsx(O,{variant:"secondary",className:"bg-pink-500/10 text-pink-600 border-pink-500/30",children:t},t)),c.direction.map(t=>e.jsx(O,{variant:"secondary",className:"bg-pink-500/10 text-pink-600 border-pink-500/30",children:t},t)),c.exchange.map(t=>e.jsx(O,{variant:"secondary",className:"bg-pink-500/10 text-pink-600 border-pink-500/30",children:t},t)),e.jsx(R,{variant:"outline",size:"sm",className:"text-red-500 border-red-500/50 hover:bg-red-500/10",onClick:ce,children:"Clear All"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(Y,{children:e.jsxs(se,{className:"pb-2",children:[e.jsx(ne,{children:"Open Positions"}),e.jsx(ae,{className:"text-2xl",children:T.total})]})}),e.jsx(Y,{children:e.jsxs(se,{className:"pb-2",children:[e.jsx(ne,{children:"Long"}),e.jsx(ae,{className:"text-2xl text-green-600",children:T.long})]})}),e.jsx(Y,{children:e.jsxs(se,{className:"pb-2",children:[e.jsx(ne,{children:"Short"}),e.jsx(ae,{className:"text-2xl text-red-600",children:T.short})]})}),e.jsx(Y,{children:e.jsxs(se,{className:"pb-2",children:[e.jsx(ne,{children:"Total P&L"}),e.jsx(ae,{className:w("text-2xl",$(T.totalPnl)?"text-green-600":"text-red-600"),children:ee(T.totalPnl)})]})})]}),e.jsx(Y,{children:e.jsx(Oe,{className:"p-0",children:v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin"})}):I?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:I}):f.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx("p",{className:"mb-4",children:"No positions match your filters"}),te&&e.jsx(R,{variant:"ghost",size:"sm",onClick:ce,children:"Clear Filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ge,{children:[e.jsx(Be,{children:e.jsxs(le,{children:[e.jsx(Q,{column:0,label:"Symbol",className:"w-[140px]"}),e.jsx(Z,{className:"w-[80px]",children:"Exchange"}),e.jsx(Z,{className:"w-[80px]",children:"Product"}),e.jsx(Q,{column:3,label:"Qty",className:"w-[80px] text-right"}),e.jsx(Q,{column:4,label:"Avg Price",className:"w-[120px] text-right"}),e.jsx(Z,{className:"w-[120px] text-right",children:"LTP"}),e.jsx(Q,{column:6,label:"P&L",className:"w-[120px] text-right"}),e.jsx(Q,{column:7,label:"P&L %",className:"w-[100px] text-right"}),e.jsx(Z,{className:"w-[60px] text-right",children:"Action"})]})}),e.jsx(ze,{children:be.map(t=>{const s=H[t],n=D.has(t),a=je(s);return e.jsxs(Ne.Fragment,{children:[u!=="none"&&e.jsxs(le,{className:"bg-muted/50 cursor-pointer hover:bg-muted",onClick:()=>pe(t),children:[e.jsx(p,{colSpan:6,children:e.jsxs("div",{className:"flex items-center gap-3 py-1 font-semibold",children:[n?e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:t}),e.jsx(O,{variant:"outline",className:"text-xs",children:a.count})]})}),e.jsxs(p,{className:w("text-right font-bold",$(a.totalPnl)?"text-green-600":"text-red-600"),children:[a.totalPnl>=0?"+":"",a.totalPnl.toFixed(2)]}),e.jsxs(p,{className:w("text-right font-semibold",$(a.pnlPercent)?"text-green-600":"text-red-600"),children:[a.pnlPercent>=0?"+":"",a.pnlPercent.toFixed(2),"%"]}),e.jsx(p,{})]}),!n&&s.map((l,j)=>e.jsxs(le,{children:[e.jsx(p,{className:"w-[140px] font-medium",children:l.symbol}),e.jsx(p,{className:"w-[80px]",children:e.jsx(O,{variant:"outline",className:rt[l.exchange]||"",children:l.exchange})}),e.jsx(p,{className:"w-[80px]",children:e.jsx(O,{variant:"outline",className:lt[l.product]||"",children:l.product})}),e.jsx(p,{className:w("w-[80px] text-right font-medium",l.quantity>0?"text-green-600":"text-red-600"),children:l.quantity}),e.jsx(p,{className:"w-[120px] text-right font-mono",children:ee(l.average_price)}),e.jsx(p,{className:"w-[120px] text-right font-mono",children:l.ltp!==void 0?ee(l.ltp):"-"}),e.jsx(p,{className:w("w-[120px] text-right font-medium",$(l.pnl)?"text-green-600":"text-red-600"),children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[$(l.pnl)?e.jsx(Ze,{className:"h-4 w-4"}):e.jsx(et,{className:"h-4 w-4"}),ee(l.pnl)]})}),e.jsxs(p,{className:w("w-[100px] text-right",$(l.pnlpercent)?"text-green-600":"text-red-600"),children:[l.pnlpercent>=0?"+":"",l.pnlpercent?.toFixed(2)??"0.00","%"]}),e.jsx(p,{className:"w-[60px] text-right",children:e.jsx(R,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>me(l),children:e.jsx(de,{className:"h-4 w-4"})})})]},`${l.symbol}-${l.exchange}-${j}`))]},t)})}),e.jsx(We,{children:e.jsxs(le,{className:"bg-muted/50",children:[e.jsx(p,{colSpan:6,className:"text-right text-muted-foreground",children:"Total P&L:"}),e.jsxs(p,{className:w("w-[120px] text-right font-bold",$(T.totalPnl)?"text-green-600":"text-red-600"),children:[T.totalPnl>=0?"+":"",ee(T.totalPnl)]}),e.jsx(p,{colSpan:2})]})})]})})})})]})}export{bt as default};
