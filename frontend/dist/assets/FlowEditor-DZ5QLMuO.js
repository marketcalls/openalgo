import{n as Va,p as Pa,q as Ba,r as u,j as e,H as i,P as c,N as La,t as Ke,v as Da,E as Aa,w as Fa,x as _a,B as Ra,C as Ua,M as Ga,y as Wa}from"./vendor-react-CCyQGCED.js";import{u as Me,f as ie,k as Ya,m as qa,a as je,n as Qa,b as Ha,d as $a,o as Xa,p as za,q as Ka}from"./flow-DPhfmSA3.js";import{$ as Ja,c as m,D as Ie,j as Ve,k as Pe,a0 as Za,a1 as et,a2 as st,m as Q,B as M,s as B,H as at,u as tt,d as lt,e as rt,p as nt,n as it,q as ct}from"./index-NHrG-O_Z.js";import{I as x}from"./input-BylzFlgY.js";import{b1 as Le,b2 as dt,V as A,as as De,B as Je,aW as Ze,aH as es,b3 as ss,Z as Ae,c as ce,e as ee,a5 as de,aP as as,a6 as ts,au as ls,b4 as rs,at as $,b5 as ge,i as pe,b6 as ns,b7 as is,aK as cs,b as ds,b8 as os,b9 as Fe,ba as xs,bb as ms,a0 as us,bc as ps,aD as hs,ag as js,bd as Ns,be as gs,bf as bs,F as ys,aI as ot,A as xt,bg as mt,a1 as Ue,an as ut,X as vs,L as ue,a7 as Ge,E as pt,x as ht,I as jt,ay as Be,C as We,y as Nt,N as Ye,q as gt,r as bt,R as yt,p as vt,s as ft,ar as wt,$ as Ct,aQ as Tt,a$ as St,u as kt,bh as Et}from"./vendor-icons-CCn_k3dF.js";import{S as H}from"./scroll-area-Cb-vfl57.js";import{T as Ot,a as Mt,b as te,c as le}from"./tabs-DnjOpX1p.js";import{L as r}from"./label-_1WWiomg.js";import{S as Ee}from"./separator-BnSRtAZf.js";import{S as qe}from"./switch-DETUyPBc.js";import{T as q}from"./textarea-BXWfH68I.js";import{S as j,a as N,b as g,c as b,d as o}from"./select-DcHsBqkV.js";import{d as fs,a as It,L as Qe}from"./vendor-router-Dzc1xxhr.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-radix-CYVJEJRR.js";const He={id:null,name:"Untitled Workflow",description:"",nodes:[],edges:[],selectedNodeId:null,selectedEdgeId:null,isModified:!1},ws=Ja((a,n)=>({...He,setWorkflow:d=>a({id:d.id,name:d.name,description:d.description,nodes:d.nodes,edges:d.edges,isModified:!1,selectedNodeId:null,selectedEdgeId:null}),setName:d=>a({name:d,isModified:!0}),setDescription:d=>a({description:d,isModified:!0}),resetWorkflow:()=>a(He),markSaved:()=>a({isModified:!1}),setNodes:d=>a({nodes:d,isModified:!0}),onNodesChange:d=>{a({nodes:Ba(d,n().nodes),isModified:!0})},addNode:d=>a(p=>({nodes:[...p.nodes,d],isModified:!0})),updateNodeData:(d,p)=>a(f=>({nodes:f.nodes.map(w=>w.id===d?{...w,data:{...w.data,...p}}:w),isModified:!0})),deleteNode:d=>a(p=>({nodes:p.nodes.filter(f=>f.id!==d),edges:p.edges.filter(f=>f.source!==d&&f.target!==d),selectedNodeId:p.selectedNodeId===d?null:p.selectedNodeId,isModified:!0})),setEdges:d=>a({edges:d,isModified:!0}),onEdgesChange:d=>{a({edges:Pa(d,n().edges),isModified:!0})},onConnect:d=>{a({edges:Va({...d,id:`edge-${Date.now()}`,type:"insertable",animated:!0},n().edges),isModified:!0})},deleteEdge:d=>a(p=>({edges:p.edges.filter(f=>f.id!==d),selectedEdgeId:p.selectedEdgeId===d?null:p.selectedEdgeId,isModified:!0})),selectNode:d=>a({selectedNodeId:d,selectedEdgeId:null}),selectEdge:d=>a({selectedEdgeId:d,selectedNodeId:null}),deleteSelected:()=>a(d=>{const{selectedNodeId:p,selectedEdgeId:f,nodes:w,edges:S}=d;return p?{nodes:w.filter(y=>y.id!==p),edges:S.filter(y=>y.source!==p&&y.target!==p),selectedNodeId:null,isModified:!0}:f?{edges:S.filter(y=>y.id!==f),selectedEdgeId:null,isModified:!0}:d})})),O=[{value:"NSE",label:"NSE"},{value:"BSE",label:"BSE"},{value:"NFO",label:"NFO"},{value:"BFO",label:"BFO"},{value:"CDS",label:"CDS"},{value:"BCD",label:"BCD"},{value:"MCX",label:"MCX"},{value:"NSE_INDEX",label:"NSE_INDEX"},{value:"BSE_INDEX",label:"BSE_INDEX"}],re=[{value:"MIS",label:"MIS",description:"Intraday (auto square-off)"},{value:"CNC",label:"CNC",description:"Cash & Carry for equity delivery"},{value:"NRML",label:"NRML",description:"Normal for futures and options"}],Oe=[{value:"MARKET",label:"Market",description:"Execute at current market price"},{value:"LIMIT",label:"Limit",description:"Execute at specified price or better"},{value:"SL",label:"Stop Loss Limit",description:"Stop loss with limit price"},{value:"SL-M",label:"Stop Loss Market",description:"Stop loss at market price"}],me=[{value:"BUY",label:"BUY",color:"badge-buy"},{value:"SELL",label:"SELL",color:"badge-sell"}],Vt=[{value:"CE",label:"Call (CE)",description:"Call Option"},{value:"PE",label:"Put (PE)",description:"Put Option"}],Pt=[{value:"ATM",label:"ATM",description:"At The Money"},{value:"ITM1",label:"ITM1",description:"1 strike In The Money"},{value:"ITM2",label:"ITM2",description:"2 strikes In The Money"},{value:"ITM3",label:"ITM3",description:"3 strikes In The Money"},{value:"ITM4",label:"ITM4",description:"4 strikes In The Money"},{value:"ITM5",label:"ITM5",description:"5 strikes In The Money"},{value:"OTM1",label:"OTM1",description:"1 strike Out of The Money"},{value:"OTM2",label:"OTM2",description:"2 strikes Out of The Money"},{value:"OTM3",label:"OTM3",description:"3 strikes Out of The Money"},{value:"OTM4",label:"OTM4",description:"4 strikes Out of The Money"},{value:"OTM5",label:"OTM5",description:"5 strikes Out of The Money"},{value:"OTM6",label:"OTM6",description:"6 strikes Out of The Money"},{value:"OTM7",label:"OTM7",description:"7 strikes Out of The Money"},{value:"OTM8",label:"OTM8",description:"8 strikes Out of The Money"},{value:"OTM9",label:"OTM9",description:"9 strikes Out of The Money"},{value:"OTM10",label:"OTM10",description:"10 strikes Out of The Money"}],Bt=[{value:"iron_condor",label:"Iron Condor",description:"Sell OTM Call & Put, Buy further OTM Call & Put"},{value:"straddle",label:"Straddle",description:"Buy/Sell ATM Call and Put"},{value:"strangle",label:"Strangle",description:"Buy/Sell OTM Call and Put"},{value:"bull_call_spread",label:"Bull Call Spread",description:"Buy lower strike Call, Sell higher strike Call"},{value:"bear_put_spread",label:"Bear Put Spread",description:"Buy higher strike Put, Sell lower strike Put"},{value:"custom",label:"Custom",description:"Build custom multi-leg strategy"}],Ne=[{value:"NIFTY",label:"NIFTY",exchange:"NFO"},{value:"BANKNIFTY",label:"BANKNIFTY",exchange:"NFO"},{value:"FINNIFTY",label:"FINNIFTY",exchange:"NFO"},{value:"MIDCPNIFTY",label:"MIDCPNIFTY",exchange:"NFO"},{value:"NIFTYNXT50",label:"NIFTYNXT50",exchange:"NFO"},{value:"SENSEX",label:"SENSEX",exchange:"BFO"},{value:"BANKEX",label:"BANKEX",exchange:"BFO"},{value:"SENSEX50",label:"SENSEX50",exchange:"BFO"}],$e=[{value:"current_week",label:"Current Week",description:"Nearest weekly expiry"},{value:"next_week",label:"Next Week",description:"Second weekly expiry"},{value:"current_month",label:"Current Month",description:"Last expiry of current month"},{value:"next_month",label:"Next Month",description:"Last expiry of next month"}],Lt=[{value:"once",label:"Once",description:"Execute one time at specified date/time"},{value:"daily",label:"Daily",description:"Execute every day at specified time"},{value:"weekly",label:"Weekly",description:"Execute on selected days of the week"},{value:"interval",label:"Interval",description:"Execute every X minutes"}],Dt=[{value:0,label:"Mon",fullLabel:"Monday"},{value:1,label:"Tue",fullLabel:"Tuesday"},{value:2,label:"Wed",fullLabel:"Wednesday"},{value:3,label:"Thu",fullLabel:"Thursday"},{value:4,label:"Fri",fullLabel:"Friday"},{value:5,label:"Sat",fullLabel:"Saturday"},{value:6,label:"Sun",fullLabel:"Sunday"}],At={TRIGGERS:[{type:"start",label:"Schedule",description:"Start workflow on schedule",category:"trigger"},{type:"priceAlert",label:"Price Alert",description:"Trigger on price condition",category:"trigger"},{type:"webhookTrigger",label:"Webhook",description:"Trigger from external webhook",category:"trigger"}],ACTIONS:[{type:"placeOrder",label:"Place Order",description:"Place a trading order",category:"action"},{type:"smartOrder",label:"Smart Order",description:"Position-aware order",category:"action"},{type:"optionsOrder",label:"Options Order",description:"Trade ATM/ITM/OTM options",category:"action"},{type:"optionsMultiOrder",label:"Options Strategy",description:"Multi-leg options strategy",category:"action"},{type:"basketOrder",label:"Basket Order",description:"Place multiple orders at once",category:"action"},{type:"splitOrder",label:"Split Order",description:"Split large order into chunks",category:"action"},{type:"modifyOrder",label:"Modify Order",description:"Modify an existing order",category:"action"},{type:"cancelOrder",label:"Cancel Order",description:"Cancel a specific order",category:"action"},{type:"cancelAllOrders",label:"Cancel All",description:"Cancel all open orders",category:"action"},{type:"closePositions",label:"Close Positions",description:"Square off all positions",category:"action"}],CONDITIONS:[{type:"positionCheck",label:"Position Check",description:"Check position status",category:"condition"},{type:"fundCheck",label:"Fund Check",description:"Check available funds",category:"condition"},{type:"priceCondition",label:"Price Check",description:"Check price condition",category:"condition"},{type:"timeWindow",label:"Time Window",description:"Check market hours",category:"condition"},{type:"timeCondition",label:"Time Condition",description:"Check time condition",category:"condition"},{type:"andGate",label:"AND Gate",description:"All conditions must be true",category:"condition"},{type:"orGate",label:"OR Gate",description:"Any condition must be true",category:"condition"},{type:"notGate",label:"NOT Gate",description:"Invert condition result",category:"condition"}],DATA:[{type:"getQuote",label:"Get Quote",description:"Fetch real-time quote",category:"data"},{type:"getDepth",label:"Market Depth",description:"Fetch bid/ask depth",category:"data"},{type:"history",label:"History",description:"Fetch OHLCV data",category:"data"},{type:"openPosition",label:"Open Position",description:"Get position for symbol",category:"data"},{type:"orderBook",label:"Order Book",description:"Get all orders",category:"data"},{type:"tradeBook",label:"Trade Book",description:"Get all trades",category:"data"},{type:"positionBook",label:"Position Book",description:"Get all positions",category:"data"},{type:"holdings",label:"Holdings",description:"Get portfolio holdings",category:"data"},{type:"funds",label:"Funds",description:"Get available funds",category:"data"}],UTILITIES:[{type:"telegramAlert",label:"Telegram Alert",description:"Send Telegram notification",category:"utility"},{type:"delay",label:"Delay",description:"Wait for duration",category:"utility"},{type:"waitUntil",label:"Wait Until",description:"Wait until specific time",category:"utility"},{type:"log",label:"Log",description:"Log a message",category:"utility"},{type:"variable",label:"Variable",description:"Set/calculate variable",category:"utility"},{type:"httpRequest",label:"HTTP Request",description:"Make HTTP request",category:"utility"}]},Cs={start:{scheduleType:"daily",time:"09:15",marketHoursOnly:!0},priceAlert:{symbol:"",exchange:"NSE",condition:"above",price:0},webhookTrigger:{label:"",symbol:"",exchange:"NSE"},placeOrder:{symbol:"",exchange:"NSE",action:"BUY",quantity:1,priceType:"MARKET",product:"MIS"},smartOrder:{symbol:"",exchange:"NSE",action:"BUY",quantity:1,positionSize:0,priceType:"MARKET",product:"MIS"},optionsOrder:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",offset:"ATM",optionType:"CE",action:"BUY",quantity:1,priceType:"MARKET",product:"MIS"},optionsMultiOrder:{strategy:"straddle",underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",legs:[],priceType:"MARKET",product:"MIS"},cancelOrder:{orderId:""},cancelAllOrders:{},closePositions:{symbol:"",exchange:"NSE",product:"MIS"},modifyOrder:{orderId:"",symbol:"",exchange:"NSE",action:"BUY"},basketOrder:{orders:"",product:"MIS",priceType:"MARKET"},splitOrder:{symbol:"",exchange:"NSE",action:"BUY",quantity:100,splitSize:50,priceType:"MARKET",product:"MIS"},positionCheck:{symbol:"",exchange:"NSE",product:"MIS",operator:"gt",threshold:0},fundCheck:{operator:"gt",threshold:1e4},priceCondition:{symbol:"",exchange:"NSE",operator:"gt",threshold:0},timeWindow:{startTime:"09:15",endTime:"15:30"},timeCondition:{targetTime:"09:30",operator:">="},andGate:{},orGate:{},notGate:{},getQuote:{symbol:"",exchange:"NSE",outputVariable:""},getDepth:{symbol:"",exchange:"NSE",outputVariable:""},history:{symbol:"",exchange:"NSE",interval:"5m",startDate:"",endDate:"",outputVariable:""},openPosition:{symbol:"",exchange:"NSE",product:"MIS",outputVariable:""},orderBook:{outputVariable:""},tradeBook:{outputVariable:""},positionBook:{outputVariable:""},holdings:{outputVariable:""},funds:{outputVariable:""},telegramAlert:{message:"Workflow executed successfully"},delay:{delayValue:1,delayUnit:"seconds"},waitUntil:{targetTime:"09:30"},log:{message:"Log message here",level:"info"},variable:{variableName:"myVar",operation:"set",value:""},httpRequest:{method:"GET",url:"",headers:{},body:"",timeout:30,outputVariable:""},symbol:{symbol:"",exchange:"NSE",outputVariable:""},optionSymbol:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",offset:"ATM",optionType:"CE",outputVariable:""},expiry:{symbol:"NIFTY",exchange:"NFO",outputVariable:""},intervals:{outputVariable:""},multiQuotes:{symbols:"",exchange:"NSE",outputVariable:""},optionChain:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",strikeCount:10,outputVariable:""},syntheticFuture:{underlying:"NIFTY",exchange:"NSE_INDEX",expiryDate:"",outputVariable:""},holidays:{exchange:"NSE",outputVariable:""},timings:{exchange:"NSE",outputVariable:""},mathExpression:{expression:"",outputVariable:"result"},margin:{symbol:"",exchange:"NSE",quantity:1,price:0,product:"MIS",action:"BUY",priceType:"MARKET",outputVariable:""},group:{}},Ft={once:De,daily:A,weekly:dt,interval:Le},_t={once:"One-time",daily:"Daily",weekly:"Weekly",interval:"Interval"},Ts=u.memo(({data:a,selected:n})=>{const d=Ft[a.scheduleType]||A,p=()=>{const f=a.intervalValue||1,w=a.intervalUnit||"minutes";return`${f}${w==="seconds"?"s":w==="hours"?"h":"m"}`};return e.jsxs("div",{className:m("workflow-node node-start min-w-[120px]",n&&"selected"),children:[e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(d,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Start"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:_t[a.scheduleType]||"Schedule"})]})]}),e.jsxs("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-[10px]",children:[a.scheduleType==="interval"?e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Every:"}),e.jsx("span",{className:"mono-data font-medium",children:p()})]}):e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time:"}),e.jsx("span",{className:"mono-data font-medium",children:a.time||"09:15"})]}),(a.scheduleType==="daily"||a.scheduleType==="weekly")&&a.days&&a.days.length>0&&a.days.length<7&&e.jsxs("div",{className:"mt-0.5 flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Days:"}),e.jsx("span",{className:"mono-data text-[9px]",children:a.days.map(f=>["M","T","W","T","F","S","S"][f]).join("")})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Ts.displayName="StartNode";const Rt={above:">",below:"<",crosses_above:"crosses >",crosses_below:"crosses <"},Ut={above:"LTP Above",below:"LTP Below",crosses_above:"Crosses Above",crosses_below:"Crosses Below"},Ss=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(Je,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Price Alert"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:Ut[a.condition]||"Condition"}),e.jsx("span",{className:"mono-data text-[10px] font-medium text-primary",children:a.price||0})]}),a.ltp!==void 0&&e.jsxs("div",{className:"flex items-center justify-between rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"LTP"}),e.jsx("span",{className:"mono-data text-[10px] font-semibold",children:a.ltp.toFixed(2)})]}),e.jsxs("div",{className:"text-center text-[8px] text-muted-foreground",children:["LTP ",Rt[a.condition]||">"," ",a.price||0]})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"Yes"}),e.jsx("span",{className:"text-sell",children:"No"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !left-1/4 !translate-y-1/2 !bg-buy",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !left-3/4 !translate-y-1/2 !bg-sell",style:{left:"75%"}})]}));Ss.displayName="PriceAlertNode";const ks=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-trigger min-w-[120px]",n&&"selected"),children:[e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-node-trigger/20",children:e.jsx(Ze,{className:"h-3 w-3 text-node-trigger"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Webhook"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"External Trigger"})]})]}),a.symbol&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center mb-1",children:e.jsxs("span",{className:"text-[10px] font-mono text-primary",children:[a.symbol,a.exchange&&e.jsxs("span",{className:"text-muted-foreground",children:[":",a.exchange]})]})}),a.label&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:a.label})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ks.displayName="WebhookTriggerNode";const Gt={GET:"text-green-500",POST:"text-blue-500",PUT:"text-orange-500",DELETE:"text-red-500",PATCH:"text-purple-500"},Es=u.memo(({data:a,selected:n})=>{const d=a.method||"GET",p=a.url||"",f=p.length>20?`${p.substring(0,20)}...`:p;return e.jsxs("div",{className:m("workflow-node min-w-[140px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-primary/20",children:e.jsx(es,{className:"h-3 w-3 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"HTTP Request"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"API Call"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:m("text-[10px] font-bold",Gt[d]||"text-muted-foreground"),children:d}),f&&e.jsx("span",{className:"truncate text-[9px] text-muted-foreground",children:f})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-0.5",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:`{{${a.outputVariable}}}`})})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Es.displayName="HttpRequestNode";const Os=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ss,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Place Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:m("rounded px-1 py-0.5 text-[9px] font-semibold",a.action==="BUY"?"badge-buy":"badge-sell"),children:a.action||"BUY"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Qty:"}),e.jsx("span",{className:"mono-data font-medium",children:a.quantity||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:a.priceType||"MARKET"}),e.jsx("span",{children:a.product||"MIS"})]}),a.ltp!==void 0&&e.jsxs("div",{className:"mt-0.5 flex items-center justify-between rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"LTP"}),e.jsx("span",{className:"mono-data text-[10px] font-semibold text-primary",children:a.ltp.toFixed(2)})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Os.displayName="PlaceOrderNode";const Ms=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(Ae,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Smart Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:m("rounded px-1 py-0.5 text-[9px] font-semibold",a.action==="BUY"?"badge-buy":"badge-sell"),children:a.action||"BUY"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Qty:"}),e.jsx("span",{className:"mono-data font-medium",children:a.quantity||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Target Pos"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.positionSize??0})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:a.priceType||"MARKET"}),e.jsx("span",{children:a.product||"MIS"})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ms.displayName="SmartOrderNode";const Wt={current_week:"This Week",next_week:"Next Week",current_month:"This Month",next_month:"Next Month"},Is=u.memo(({data:a,selected:n})=>{const p=a.expiryType||"current_week";return e.jsxs("div",{className:m("workflow-node node-action min-w-[130px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Options"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.underlying||"NIFTY"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Strike"}),e.jsxs("span",{className:"mono-data text-[10px] font-medium",children:[a.offset||"ATM"," ",a.optionType||"CE"]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"text-[10px] font-medium",children:Wt[p]||"This Week"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:m("rounded px-1 py-0.5 text-[9px] font-semibold",a.action==="BUY"?"badge-buy":"badge-sell"),children:a.action||"BUY"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Qty:"}),e.jsx("span",{className:"mono-data font-medium",children:a.quantity||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:a.product||"MIS"}),e.jsx("span",{children:a.priceType||"MARKET"})]}),a.ltp!==void 0&&e.jsxs("div",{className:"mt-0.5 flex items-center justify-between rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"LTP"}),e.jsx("span",{className:"mono-data text-[10px] font-semibold text-primary",children:a.ltp.toFixed(2)})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Is.displayName="OptionsOrderNode";const Yt={iron_condor:"Iron Condor",straddle:"Straddle",strangle:"Strangle",bull_call_spread:"Bull Call",bear_put_spread:"Bear Put",custom:"Custom"},qt={current_week:"This Week",next_week:"Next Week",current_month:"This Month",next_month:"Next Month"},Qt=a=>{switch(a){case"straddle":case"strangle":case"bull_call_spread":case"bear_put_spread":return 2;case"iron_condor":return 4;default:return 0}},Vs=u.memo(({data:a,selected:n})=>{const d=a.legs?.length||Qt(a.strategy),p=a;return e.jsxs("div",{className:m("workflow-node node-action min-w-[130px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ee,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Multi-Leg"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.underlying||"NIFTY"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Strategy"}),e.jsx("span",{className:"text-[10px] font-medium",children:Yt[a.strategy]||a.strategy})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Legs"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:d})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"text-[10px] font-medium",children:qt[p.expiryType||""]||"This Week"})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{className:m("font-medium",p.action==="BUY"?"text-buy":"text-sell"),children:p.action||"SELL"}),e.jsx("span",{children:a.product||"MIS"})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Vs.displayName="OptionsMultiOrderNode";const Ps=u.memo(({selected:a})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[110px]",a&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-sell/20 text-sell",children:e.jsx(de,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Cancel All"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Orders"})]})]}),e.jsx("div",{className:"rounded bg-sell/10 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-sell",children:"Cancels all open orders"})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ps.displayName="CancelAllOrdersNode";const Bs=u.memo(({data:a,selected:n})=>{const d=a.exchange||a.product;return e.jsxs("div",{className:m("workflow-node node-action min-w-[110px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-sell/20 text-sell",children:e.jsx(as,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Close All"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Positions"})]})]}),d?e.jsxs("div",{className:"space-y-1",children:[a.exchange&&e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Exchange"}),e.jsx("span",{className:"text-[10px] font-medium",children:a.exchange})]}),a.product&&e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Product"}),e.jsx("span",{className:"text-[10px] font-medium",children:a.product})]})]}):e.jsx("div",{className:"rounded bg-sell/10 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-sell",children:"Squares off all positions"})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Bs.displayName="ClosePositionsNode";const Ls=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(de,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Cancel Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"By Order ID"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.orderId?`...${a.orderId.slice(-6)}`:"Variable"})]})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ls.displayName="CancelOrderNode";const Ds=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ts,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Modify Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Edit order"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.orderId?`...${a.orderId.slice(-6)}`:"Variable"})]}),a.newPrice&&e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:"New Price"}),e.jsx("span",{className:"mono-data",children:a.newPrice})]}),a.newQuantity&&e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:"New Qty"}),e.jsx("span",{className:"mono-data",children:a.newQuantity})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ds.displayName="ModifyOrderNode";const As=u.memo(({data:a,selected:n})=>{const d=Array.isArray(a.orders)?a.orders.length:0;return e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ls,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Basket Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Multi-order"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Orders"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:d})]}),e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:a.strategy||"Batch execution"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});As.displayName="BasketOrderNode";const Fs=u.memo(({data:a,selected:n})=>{const d=a.action==="BUY"?"text-green-500":"text-red-500";return e.jsxs("div",{className:m("workflow-node node-action min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(rs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Split Order"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[e.jsx("span",{className:m("font-medium",d),children:a.action||"BUY"}),e.jsxs("span",{className:"text-muted-foreground",children:[a.quantity||0," / ",a.splitSize||50]})]}),a.delayMs&&e.jsxs("div",{className:"text-center text-[9px] text-muted-foreground",children:[a.delayMs,"ms delay"]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Fs.displayName="SplitOrderNode";const Ht={exists:"Has Position",not_exists:"No Position",quantity_above:"Qty Above",quantity_below:"Qty Below",pnl_above:"P&L Above",pnl_below:"P&L Below"},_s=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx($,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Position"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Check"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Check"}),e.jsx("span",{className:"text-[10px] font-medium",children:Ht[a.condition]||a.condition})]}),(a.condition?.includes("above")||a.condition?.includes("below"))&&e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:"Threshold:"}),e.jsx("span",{className:"mono-data",children:a.threshold??0})]})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));_s.displayName="PositionCheckNode";const Rs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[110px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ge,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Fund"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Check"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Min"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.minAvailable?.toLocaleString()||0})]}),e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:"Checks available margin"})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));Rs.displayName="FundCheckNode";const Us=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Time"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Window"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Start"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.startTime||"09:15"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"End"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.endTime||"15:30"})]}),a.invertCondition&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:"Outside window"})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));Us.displayName="TimeWindowNode";const $t={"==":"=",">=":">=","<=":"<=",">":">","<":"<"},Gs=u.memo(({data:a,selected:n})=>{const d=$t[a.operator]||"=";return e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Time"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.conditionType==="entry"?"Entry":a.conditionType==="exit"?"Exit":"Condition"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Time"}),e.jsxs("span",{className:"mono-data text-[10px] font-medium",children:[d," ",a.targetTime||"09:30"]})]}),a.label&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground truncate",children:a.label})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"Yes"}),e.jsx("span",{className:"text-sell",children:"No"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"yes",className:"!bottom-0 !left-1/4 !translate-y-1/2 !bg-buy",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"no",className:"!bottom-0 !left-3/4 !translate-y-1/2 !bg-sell",style:{left:"75%"}})]})});Gs.displayName="TimeConditionNode";const Xt={">":">","<":"<","==":"=",">=":">=","<=":"<=","!=":"!="},zt={ltp:"LTP",open:"Open",high:"High",low:"Low",prev_close:"Prev Close",change_percent:"Change %"},Ws=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2 !h-3 !w-3 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Price"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Condition"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Check"}),e.jsxs("span",{className:"text-[10px] font-medium",children:[zt[a.field]||"LTP"," ",Xt[a.operator]||">"," ",a.value||0]})]})]}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !h-3 !w-3 !rounded-full !border-2 !border-background",style:{left:"75%"}})]}));Ws.displayName="PriceConditionNode";const Ys=u.memo(({data:a,selected:n})=>{const d=a.inputCount||2;return e.jsxs("div",{className:m("workflow-node node-condition min-w-[100px]",n&&"selected"),children:[Array.from({length:d}).map((p,f)=>{const w=(f+1)/(d+1)*100;return e.jsx(i,{type:"target",position:c.Top,id:`input-${f}`,className:"!top-0 !-translate-y-1/2",style:{left:`${w}%`}},`input-${f}`)}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-1.5 flex items-center justify-center gap-1.5",children:e.jsx("div",{className:"node-icon flex h-6 w-6 items-center justify-center rounded bg-node-condition/20",children:e.jsx("span",{className:"text-[10px] font-bold text-node-condition",children:"AND"})})}),e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"All conditions must be true"})}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !w-3 !h-3",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !w-3 !h-3",style:{left:"75%"}})]})});Ys.displayName="AndGateNode";const qs=u.memo(({data:a,selected:n})=>{const d=a.inputCount||2;return e.jsxs("div",{className:m("workflow-node node-condition min-w-[100px]",n&&"selected"),children:[Array.from({length:d}).map((p,f)=>{const w=(f+1)/(d+1)*100;return e.jsx(i,{type:"target",position:c.Top,id:`input-${f}`,className:"!top-0 !-translate-y-1/2",style:{left:`${w}%`}},`input-${f}`)}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-1.5 flex items-center justify-center gap-1.5",children:e.jsx("div",{className:"node-icon flex h-6 w-6 items-center justify-center rounded bg-node-condition/20",children:e.jsx("span",{className:"text-[10px] font-bold text-node-condition",children:"OR"})})}),e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Any condition can be true"})}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"True"}),e.jsx("span",{className:"text-sell",children:"False"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !translate-y-1/2 !bg-buy !w-3 !h-3",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !translate-y-1/2 !bg-sell !w-3 !h-3",style:{left:"75%"}})]})});qs.displayName="OrGateNode";const Qs=u.memo(({selected:a})=>e.jsxs("div",{className:m("workflow-node node-condition min-w-[100px]",a&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,id:"input",className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-1.5 flex items-center justify-center gap-1.5",children:e.jsx("div",{className:"node-icon flex h-6 w-6 items-center justify-center rounded bg-node-condition/20",children:e.jsx("span",{className:"text-[10px] font-bold text-node-condition",children:"NOT"})})}),e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Inverts condition"})}),e.jsxs("div",{className:"mt-2 flex justify-between px-1 text-[8px]",children:[e.jsx("span",{className:"text-buy",children:"Yes"}),e.jsx("span",{className:"text-sell",children:"No"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,id:"yes",className:"!bottom-0 !translate-y-1/2 !bg-buy",style:{left:"25%"}}),e.jsx(i,{type:"source",position:c.Bottom,id:"no",className:"!bottom-0 !translate-y-1/2 !bg-sell",style:{left:"75%"}})]}));Qs.displayName="NotGateNode";const Hs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(pe,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Get Quote"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Hs.displayName="GetQuoteNode";const $s=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(ee,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Depth"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]})}),e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:"5-level bid/ask"})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));$s.displayName="GetDepthNode";const Xs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(ns,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Order Status"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Check order"})]})]}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.orderId?`...${a.orderId.slice(-6)}`:"-"})]})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Xs.displayName="GetOrderStatusNode";const Kt={"1m":"1 Min","5m":"5 Min","15m":"15 Min","30m":"30 Min","1h":"1 Hour","1d":"Daily"},zs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"History"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-muted-foreground",children:[e.jsx("span",{children:Kt[a.interval]||a.interval||"1d"}),e.jsxs("span",{children:[a.days||30," days"]})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));zs.displayName="HistoryNode";const Ks=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx($,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Position"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]}),e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:a.product||"MIS"})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Ks.displayName="OpenPositionNode";const Js=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(De,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Expiry"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NFO"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"NIFTY"})]}),a.outputVariable&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground",children:a.outputVariable})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Js.displayName="ExpiryNode";const Zs=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Intervals"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Time frames"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Fetch available intervals"})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));Zs.displayName="IntervalsNode";const ea=u.memo(({data:a,selected:n})=>{const d=(a.symbols||"").split(",").filter(p=>p.trim());return e.jsxs("div",{className:m("workflow-node node-data min-w-[130px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(pe,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Multi Quotes"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbols: "}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:d.length>0?d.length:0})]}),d.length>0&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("span",{className:"mono-data text-[9px] text-muted-foreground truncate block",children:[d.slice(0,3).join(", "),d.length>3&&"..."]})}),a.outputVariable&&e.jsxs("div",{className:"rounded border border-border/50 bg-surface-2 px-1.5 py-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Output: "}),e.jsx("span",{className:"mono-data text-[9px] font-medium text-primary",children:a.outputVariable})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});ea.displayName="MultiQuotesNode";const sa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(is,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Symbol Info"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Symbol"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.symbol||"-"})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));sa.displayName="SymbolNode";const aa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[130px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(cs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Option Symbol"}),e.jsxs("div",{className:"text-[9px] text-muted-foreground",children:[a.optionType||"CE"," ",a.offset||"ATM"]})]})]}),e.jsxs("div",{className:"space-y-0.5 rounded bg-muted/50 px-1.5 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Underlying"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.underlying||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.expiryDate||"-"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));aa.displayName="OptionSymbolNode";const ta=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(ds,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Order Book"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"All orders"})]})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:a.outputVariable})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ta.displayName="OrderBookNode";const la=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(os,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Trade Book"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Executed trades"})]})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:a.outputVariable})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));la.displayName="TradeBookNode";const ra=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx($,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Position Book"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"All positions"})]})]}),a.outputVariable&&e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"text-[9px] text-muted-foreground",children:a.outputVariable})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ra.displayName="PositionBookNode";const na=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[130px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(Fe,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Synthetic Future"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE_INDEX"})]})]}),e.jsxs("div",{className:"space-y-0.5 rounded bg-muted/50 px-1.5 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Underlying"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.underlying||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.expiryDate||"-"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));na.displayName="SyntheticFutureNode";const ia=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[130px] border-l-primary",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-primary/20 text-primary",children:e.jsx(xs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Option Chain"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:a.exchange||"NSE_INDEX"})]})]}),e.jsxs("div",{className:"space-y-0.5 rounded bg-muted/50 px-1.5 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Underlying"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.underlying||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Expiry"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.expiryDate||"-"})]}),a.strikeCount&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Strikes"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.strikeCount})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ia.displayName="OptionChainNode";const ca=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-purple-400",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-purple-400/20 text-purple-400",children:e.jsx(ms,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Holidays"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Market holidays"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Year"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.year||new Date().getFullYear()})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ca.displayName="HolidaysNode";const da=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[110px] border-l-purple-400",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-purple-400/20 text-purple-400",children:e.jsx(A,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Timings"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Market hours"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Date"}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:a.date||"Today"})]})}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-center text-[9px] text-muted-foreground",children:a.outputVariable})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));da.displayName="TimingsNode";const oa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-green-500",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-green-500/20 text-green-500",children:e.jsx(us,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Subscribe LTP"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Real-time"})]})]}),a.symbol&&e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Exchange:"}),e.jsx("span",{className:"mono-data",children:a.exchange||"NSE"})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-green-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom})]}));oa.displayName="SubscribeLTPNode";const xa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-green-500",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-green-500/20 text-green-500",children:e.jsx(ps,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Subscribe Quote"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Real-time OHLC"})]})]}),a.symbol&&e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Exchange:"}),e.jsx("span",{className:"mono-data",children:a.exchange||"NSE"})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-green-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom})]}));xa.displayName="SubscribeQuoteNode";const ma=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-green-500",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-green-500/20 text-green-500",children:e.jsx(ee,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Subscribe Depth"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Order Book"})]})]}),a.symbol&&e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Exchange:"}),e.jsx("span",{className:"mono-data",children:a.exchange||"NSE"})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-green-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom})]}));ma.displayName="SubscribeDepthNode";const ua=u.memo(({data:a,selected:n})=>{const d={ltp:"LTP",quote:"Quote",depth:"Depth",all:"All Streams"};return e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-red-500",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-red-500/20 text-red-500",children:e.jsx(hs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Unsubscribe"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Stop Stream"})]})]}),e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[a.symbol&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),e.jsx("span",{className:"mono-data font-medium",children:a.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"mono-data text-red-500",children:d[a.streamType||"all"]})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom})]})});ua.displayName="UnsubscribeNode";const pa=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-amber-500",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-amber-500/20 text-amber-500",children:e.jsx($,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Holdings"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Portfolio"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-[10px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-amber-500",children:`{{${a.outputVariable}}}`})]})})]}),e.jsx(i,{type:"source",position:c.Bottom})]}));pa.displayName="HoldingsNode";const ha=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-amber-500",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-amber-500/20 text-amber-500",children:e.jsx(ge,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Funds"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Account Balance"})]})]}),a.outputVariable&&e.jsx("div",{className:"mt-1 text-[10px]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-amber-500",children:`{{${a.outputVariable}}}`})]})})]}),e.jsx(i,{type:"source",position:c.Bottom})]}));ha.displayName="FundsNode";const ja=u.memo(({data:a,selected:n})=>{const d=a.positions?.length||0;return e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-amber-500",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-amber-500/20 text-amber-500",children:e.jsx(Fe,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Margin Calc"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Risk Check"})]})]}),e.jsxs("div",{className:"mt-1 space-y-0.5 text-[10px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Positions:"}),e.jsx("span",{className:"mono-data font-medium",children:d})]}),a.outputVariable&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"}),e.jsx("span",{className:"mono-data text-amber-500",children:`{{${a.outputVariable}}}`})]})]})]}),e.jsx(i,{type:"source",position:c.Bottom})]})});ja.displayName="MarginNode";const Na=u.memo(({data:a,selected:n})=>{const d=a,p=a.message?a.message.length>25?`${a.message.substring(0,25)}...`:a.message:"No message";return e.jsxs("div",{className:m("workflow-node min-w-[120px] border-l-muted-foreground",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-[#0088cc]/20 text-[#0088cc]",children:e.jsx(js,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Telegram"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:d.username||"No user"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsx("span",{className:"text-[9px] text-muted-foreground line-clamp-2",children:p})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});Na.displayName="TelegramAlertNode";function Jt(a){if(a.delayValue!==void 0){const d=a.delayValue,p=a.delayUnit||"seconds";return`${d}${{seconds:"s",minutes:"m",hours:"h"}[p]||"s"}`}const n=a.delayMs||1e3;if(n>=6e4){const d=Math.floor(n/6e4),p=Math.floor(n%6e4/1e3);return p>0?`${d}m ${p}s`:`${d}m`}return n>=1e3?`${n/1e3}s`:`${n}ms`}const ga=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node min-w-[100px] border-l-muted-foreground",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded bg-muted text-muted-foreground",children:e.jsx(Le,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Wait Duration"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Delay"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1 text-center",children:e.jsx("span",{className:"mono-data text-sm font-semibold text-primary",children:Jt(a)})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ga.displayName="DelayNode";const ba=u.memo(({data:a,selected:n})=>e.jsxs("div",{className:m("workflow-node node-utility min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded bg-amber-500/10",children:e.jsx(Ns,{className:"h-3 w-3 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Wait Until"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Pause execution"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Time"}),e.jsx("span",{className:"mono-data text-[10px] font-medium text-amber-500",children:a.targetTime||"09:30"})]}),a.label&&e.jsx("div",{className:"text-center text-[9px] text-muted-foreground truncate",children:a.label})]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]}));ba.displayName="WaitUntilNode";const Xe={blue:"border-blue-500/30 bg-blue-500/5",green:"border-buy/30 bg-buy/5",red:"border-sell/30 bg-sell/5",purple:"border-purple-500/30 bg-purple-500/5",orange:"border-orange-500/30 bg-orange-500/5",default:"border-border/50 bg-muted/20"},ya=u.memo(({data:a,selected:n})=>{const d=Xe[a.color||"default"]||Xe.default;return e.jsxs("div",{className:m("min-h-[150px] min-w-[200px] rounded-lg border-2 border-dashed",d,n&&"ring-2 ring-primary ring-offset-2 ring-offset-background"),children:[e.jsx(La,{minWidth:200,minHeight:150,isVisible:n,lineClassName:"!border-primary",handleClassName:"!h-2 !w-2 !rounded-full !border-2 !border-primary !bg-background"}),e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"absolute -top-3 left-3 flex items-center gap-1.5 rounded bg-background px-2 py-0.5",children:[e.jsx(ee,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium",children:a.label||"Group"})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});ya.displayName="GroupNode";const Zt={set:"=",get:"GET",add:"+",subtract:"-",multiply:"*",divide:"/",parse_json:"JSON",stringify:"STR",increment:"++",decrement:"--",append:"+="},el={set:"Set Value",get:"Get Value",add:"Add",subtract:"Subtract",multiply:"Multiply",divide:"Divide",parse_json:"Parse JSON",stringify:"To String",increment:"Increment",decrement:"Decrement",append:"Append"},va=u.memo(({data:a,selected:n})=>{const d=typeof a.value=="object"?`${JSON.stringify(a.value).slice(0,20)}...`:String(a.value||"").slice(0,20);return e.jsxs("div",{className:m("workflow-node node-utility min-w-[120px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(gs,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Variable"}),e.jsx("div",{className:"text-[9px] text-muted-foreground",children:el[a.operation]||"Set"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Name"}),e.jsx("span",{className:"mono-data text-[10px] font-medium text-primary",children:a.variableName||"var"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded bg-muted/50 px-1.5 py-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:Zt[a.operation]||"="}),e.jsx("span",{className:"mono-data text-[10px] font-medium",children:d||"-"})]})]}),e.jsxs("div",{className:"mt-1.5 text-center text-[8px] text-muted-foreground",children:["Use: ",`{{${a.variableName||"var"}}}`]})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});va.displayName="VariableNode";const fa=u.memo(({data:a,selected:n})=>{const d=a.expression||"",p=a.outputVariable||"result",f=d.length>25?`${d.substring(0,22)}...`:d;return e.jsxs("div",{className:m("workflow-node min-w-[140px] border-purple-500/50 bg-purple-500/5",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!bg-purple-500"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon bg-purple-500/20",children:e.jsx(bs,{className:"h-3 w-3 text-purple-500"})}),e.jsx("span",{className:"node-title",children:"Math"})]}),d?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1",children:e.jsx("code",{className:"text-[10px] text-purple-400 font-mono",children:f})}),e.jsxs("div",{className:"text-[9px] text-muted-foreground text-center",children:[p," = ..."]})]}):e.jsx("div",{className:"rounded bg-muted/50 px-2 py-1 text-center",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Configure expression"})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bg-purple-500"})]})});fa.displayName="MathExpressionNode";const sl={info:"text-blue-400",warn:"text-yellow-400",error:"text-red-400"},al={info:"INFO",warn:"WARN",error:"ERROR"},wa=u.memo(({data:a,selected:n})=>{const d=(a.message||"Log message").slice(0,30),p=(a.message||"").length>30;return e.jsxs("div",{className:m("workflow-node node-utility min-w-[110px]",n&&"selected"),children:[e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !-translate-y-1/2"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:"node-icon flex h-5 w-5 items-center justify-center rounded",children:e.jsx(ys,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium leading-tight",children:"Log"}),e.jsx("div",{className:m("text-[9px]",sl[a.level]||"text-muted-foreground"),children:al[a.level]||"INFO"})]})]}),e.jsx("div",{className:"rounded bg-muted/50 px-1.5 py-1",children:e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[d,p&&"..."]})})]}),e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !translate-y-1/2"})]})});wa.displayName="LogNode";const tl={trigger:{border:"border-l-node-trigger",iconBg:"bg-node-trigger/20 text-node-trigger"},action:{border:"border-l-node-action",iconBg:"bg-node-action/20 text-node-action"},condition:{border:"border-l-node-condition",iconBg:"bg-node-condition/20 text-node-condition"},data:{border:"border-l-[hsl(var(--primary))]",iconBg:"bg-primary/20 text-primary"},utility:{border:"border-l-muted-foreground",iconBg:"bg-muted text-muted-foreground"}};u.memo(function({category:n,selected:d,icon:p,title:f,subtitle:w,hasInput:S=!1,hasOutput:y=!0,hasConditionalOutputs:k=!1,children:L,className:E,minWidth:X=120}){const F=tl[n];return e.jsxs("div",{className:m("workflow-node rounded-lg border border-border bg-card","border-l-2",F.border,d&&"ring-2 ring-primary ring-offset-2 ring-offset-background",E),style:{minWidth:X},children:[S&&e.jsx(i,{type:"target",position:c.Top,className:"!top-0 !h-3 !w-3 !-translate-y-1/2 !rounded-full !border-2 !border-background !bg-muted-foreground"}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-1.5 flex items-center gap-1.5",children:[e.jsx("div",{className:m("flex h-5 w-5 items-center justify-center rounded",F.iconBg),children:p}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate text-xs font-medium leading-tight",children:f}),w&&e.jsx("div",{className:"truncate text-[9px] text-muted-foreground",children:w})]})]}),L&&e.jsx("div",{className:"space-y-1",children:L})]}),k?e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"source",position:c.Bottom,id:"true",className:"!bottom-0 !left-1/4 !h-3 !w-3 !translate-y-1/2 !rounded-full !border-2 !border-background !bg-buy"}),e.jsx(i,{type:"source",position:c.Bottom,id:"false",className:"!bottom-0 !left-3/4 !h-3 !w-3 !translate-y-1/2 !rounded-full !border-2 !border-background !bg-sell"})]}):y?e.jsx(i,{type:"source",position:c.Bottom,className:"!bottom-0 !h-3 !w-3 !translate-y-1/2 !rounded-full !border-2 !border-background !bg-muted-foreground"}):null]})});const ll={start:Ts,priceAlert:Ss,webhookTrigger:ks,httpRequest:Es,placeOrder:Os,smartOrder:Ms,optionsOrder:Is,optionsMultiOrder:Vs,cancelAllOrders:Ps,closePositions:Bs,cancelOrder:Ls,modifyOrder:Ds,basketOrder:As,splitOrder:Fs,positionCheck:_s,fundCheck:Rs,timeWindow:Us,timeCondition:Gs,priceCondition:Ws,andGate:Ys,orGate:qs,notGate:Qs,getQuote:Hs,getDepth:$s,getOrderStatus:Xs,history:zs,openPosition:Ks,expiry:Js,intervals:Zs,multiQuotes:ea,symbol:sa,optionSymbol:aa,orderBook:ta,tradeBook:la,positionBook:ra,syntheticFuture:na,optionChain:ia,subscribeLtp:oa,subscribeQuote:xa,subscribeDepth:ma,unsubscribe:ua,holdings:pa,funds:ha,margin:ja,telegramAlert:Na,delay:ga,waitUntil:ba,group:ya,variable:va,mathExpression:fa,log:wa,holidays:ca,timings:da},rl={Actions:[{type:"placeOrder",label:"Place Order"},{type:"smartOrder",label:"Smart Order"},{type:"optionsOrder",label:"Options Order"},{type:"optionsMultiOrder",label:"Multi-Leg Options"},{type:"closePositions",label:"Close Positions"},{type:"cancelAllOrders",label:"Cancel All"}],Logic:[{type:"timeCondition",label:"Time Condition"},{type:"positionCheck",label:"Position Check"},{type:"fundCheck",label:"Fund Check"},{type:"priceCondition",label:"Price Check"},{type:"timeWindow",label:"Time Window"}],Data:[{type:"getQuote",label:"Get Quote"},{type:"getDepth",label:"Get Depth"},{type:"openPosition",label:"Open Position"}],Utility:[{type:"waitUntil",label:"Wait Until"},{type:"delay",label:"Delay"},{type:"telegramAlert",label:"Telegram Alert"},{type:"log",label:"Log"},{type:"variable",label:"Variable"}]};let nl=1e3;function il({id:a,source:n,target:d,sourceX:p,sourceY:f,targetX:w,targetY:S,sourcePosition:y,targetPosition:k,sourceHandleId:L,targetHandleId:E,markerEnd:X,selected:F,animated:l}){const[z,K]=u.useState(!1),[P,_]=u.useState(!1),{setNodes:t,setEdges:h,getNodes:J,getEdges:s}=Ke(),[T,I,U]=Da({sourceX:p,sourceY:f,sourcePosition:y,targetX:w,targetY:S,targetPosition:k}),be=u.useCallback(G=>{const Z=J(),W=s(),se=`node_${Date.now()}_${nl++}`,D=Z.find(V=>V.id===n),oe=Z.find(V=>V.id===d);if(!D||!oe)return;const ye=(D.position.x+oe.position.x)/2,he=(D.position.y+oe.position.y)/2+50,ve=Cs[G]||{},fe={id:se,type:G,position:{x:ye,y:he},data:{...ve}},we=W.filter(V=>V.id!==a),Ce={id:`edge-${Date.now()}-1`,source:n,target:se,sourceHandle:L||void 0,type:"insertable",animated:!0},Te={id:`edge-${Date.now()}-2`,source:se,target:d,targetHandle:E||void 0,type:"insertable",animated:!0};t([...Z,fe]),h([...we,Ce,Te]),_(!1)},[n,d,L,E,a,J,s,t,h]);return e.jsxs(e.Fragment,{children:[e.jsx("path",{d:T,fill:"none",strokeWidth:z||F?3:2,stroke:z||F?"#3b82f6":"#888888",strokeDasharray:l?"5 5":void 0,style:{animation:l?"dashdraw 0.5s linear infinite":void 0},className:"react-flow__edge-path",markerEnd:X}),e.jsx(Aa,{children:e.jsx("div",{className:"nodrag nopan pointer-events-auto absolute",style:{transform:`translate(-50%, -50%) translate(${I}px, ${U}px)`},onMouseEnter:()=>K(!0),onMouseLeave:()=>!P&&K(!1),children:e.jsxs(Ie,{open:P,onOpenChange:_,children:[e.jsx(Ve,{asChild:!0,children:e.jsx("button",{type:"button",className:m("flex h-5 w-5 items-center justify-center rounded-full border bg-background shadow-sm transition-all","hover:scale-110 hover:border-primary hover:bg-primary hover:text-primary-foreground",z||P?"opacity-100 scale-100":"opacity-0 scale-75",F&&"opacity-100 scale-100"),children:e.jsx(ot,{className:"h-3 w-3"})})}),e.jsx(Pe,{align:"center",className:"w-48",children:Object.entries(rl).map(([G,Z])=>e.jsxs(Za,{children:[e.jsx(et,{children:e.jsx("span",{children:G})}),e.jsx(st,{children:Z.map(W=>e.jsx(Q,{onClick:()=>be(W.type),children:W.label},W.type))})]},G))})]})})})]})}const cl={insertable:il};function ne({type:a,label:n,description:d,icon:p,color:f,onDragStart:w}){return e.jsx("div",{draggable:!0,onDragStart:S=>w(S,a),className:m("group cursor-grab rounded-lg border border-border bg-card p-2.5 transition-all duration-200","hover:border-primary/50 hover:shadow-md active:cursor-grabbing"),children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:m("flex h-7 w-7 items-center justify-center rounded-md",f),children:p}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate text-xs font-medium",children:n}),e.jsx("div",{className:"truncate text-[10px] text-muted-foreground",children:d})]})]})})}function dl({onDragStart:a}){const n=[{type:"start",label:"Schedule",description:"Start on schedule",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"priceAlert",label:"Price Alert",description:"Trigger on price",icon:e.jsx(Je,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"webhookTrigger",label:"Webhook",description:"External trigger",icon:e.jsx(Ze,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"}],d=[{type:"placeOrder",label:"Place Order",description:"Basic order",icon:e.jsx(ss,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"smartOrder",label:"Smart Order",description:"Position-aware",icon:e.jsx(Ae,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"optionsOrder",label:"Options Order",description:"ATM/ITM/OTM",icon:e.jsx(ce,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"optionsMultiOrder",label:"Multi-Leg",description:"Options strategies",icon:e.jsx(ee,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"basketOrder",label:"Basket Order",description:"Multiple orders",icon:e.jsx(ls,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"splitOrder",label:"Split Order",description:"Large order split",icon:e.jsx(rs,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"modifyOrder",label:"Modify Order",description:"Edit order",icon:e.jsx(ts,{className:"h-3.5 w-3.5 text-blue-500"}),color:"bg-blue-500/10"},{type:"cancelOrder",label:"Cancel Order",description:"Cancel by ID",icon:e.jsx(de,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"},{type:"cancelAllOrders",label:"Cancel All",description:"Cancel orders",icon:e.jsx(de,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"},{type:"closePositions",label:"Close Positions",description:"Square off all",icon:e.jsx(as,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"}],p=[{type:"timeCondition",label:"Time Condition",description:"Entry/Exit time",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"positionCheck",label:"Position Check",description:"Check position",icon:e.jsx($,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"fundCheck",label:"Fund Check",description:"Check funds",icon:e.jsx(ge,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"priceCondition",label:"Price Check",description:"Check price",icon:e.jsx(ce,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"timeWindow",label:"Time Window",description:"Market hours",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"andGate",label:"AND Gate",description:"All must be true",icon:e.jsx("span",{className:"text-[9px] font-bold text-purple-500",children:"AND"}),color:"bg-purple-500/10"},{type:"orGate",label:"OR Gate",description:"Any can be true",icon:e.jsx("span",{className:"text-[9px] font-bold text-purple-500",children:"OR"}),color:"bg-purple-500/10"},{type:"notGate",label:"NOT Gate",description:"Invert condition",icon:e.jsx("span",{className:"text-[9px] font-bold text-purple-500",children:"NOT"}),color:"bg-purple-500/10"}],f=[{type:"getQuote",label:"Get Quote",description:"Real-time quote",icon:e.jsx(pe,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"getDepth",label:"Get Depth",description:"Bid/ask depth",icon:e.jsx(ee,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"getOrderStatus",label:"Order Status",description:"Check order",icon:e.jsx(ns,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"history",label:"History",description:"OHLCV data",icon:e.jsx(ce,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"openPosition",label:"Open Position",description:"Get position",icon:e.jsx($,{className:"h-3.5 w-3.5 text-violet-500"}),color:"bg-violet-500/10"},{type:"expiry",label:"Expiry Dates",description:"F&O expiry",icon:e.jsx(De,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"multiQuotes",label:"Multi Quotes",description:"Multiple symbols",icon:e.jsx(pe,{className:"h-3.5 w-3.5 text-cyan-500"}),color:"bg-cyan-500/10"},{type:"symbol",label:"Symbol Info",description:"Get symbol details",icon:e.jsx(is,{className:"h-3.5 w-3.5 text-teal-500"}),color:"bg-teal-500/10"},{type:"optionSymbol",label:"Option Symbol",description:"Resolve options",icon:e.jsx(cs,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"orderBook",label:"Order Book",description:"All orders",icon:e.jsx(ds,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"tradeBook",label:"Trade Book",description:"Executed trades",icon:e.jsx(os,{className:"h-3.5 w-3.5 text-orange-500"}),color:"bg-orange-500/10"},{type:"positionBook",label:"Position Book",description:"All positions",icon:e.jsx($,{className:"h-3.5 w-3.5 text-violet-500"}),color:"bg-violet-500/10"},{type:"syntheticFuture",label:"Synthetic Future",description:"Calc future price",icon:e.jsx(Fe,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"optionChain",label:"Option Chain",description:"Full chain data",icon:e.jsx(xs,{className:"h-3.5 w-3.5 text-pink-500"}),color:"bg-pink-500/10"},{type:"holdings",label:"Holdings",description:"Portfolio holdings",icon:e.jsx($,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"},{type:"funds",label:"Funds",description:"Account balance",icon:e.jsx(ge,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"},{type:"margin",label:"Margin Calc",description:"Margin required",icon:e.jsx(xt,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"}],w=[{type:"subscribeLtp",label:"Subscribe LTP",description:"Live price stream",icon:e.jsx(us,{className:"h-3.5 w-3.5 text-green-500"}),color:"bg-green-500/10"},{type:"subscribeQuote",label:"Subscribe Quote",description:"Live OHLC stream",icon:e.jsx(ps,{className:"h-3.5 w-3.5 text-green-500"}),color:"bg-green-500/10"},{type:"subscribeDepth",label:"Subscribe Depth",description:"Live order book",icon:e.jsx(ee,{className:"h-3.5 w-3.5 text-green-500"}),color:"bg-green-500/10"},{type:"unsubscribe",label:"Unsubscribe",description:"Stop streaming",icon:e.jsx(hs,{className:"h-3.5 w-3.5 text-red-500"}),color:"bg-red-500/10"}],S=[{type:"variable",label:"Variable",description:"Store values",icon:e.jsx(gs,{className:"h-3.5 w-3.5 text-purple-400"}),color:"bg-purple-400/10"},{type:"mathExpression",label:"Math",description:"Calculate expression",icon:e.jsx(bs,{className:"h-3.5 w-3.5 text-purple-500"}),color:"bg-purple-500/10"},{type:"log",label:"Log",description:"Debug message",icon:e.jsx(ys,{className:"h-3.5 w-3.5 text-blue-400"}),color:"bg-blue-400/10"},{type:"telegramAlert",label:"Telegram",description:"Send alert",icon:e.jsx(js,{className:"h-3.5 w-3.5 text-[#0088cc]"}),color:"bg-[#0088cc]/10"},{type:"delay",label:"Delay",description:"Wait duration",icon:e.jsx(Le,{className:"h-3.5 w-3.5 text-muted-foreground"}),color:"bg-muted"},{type:"waitUntil",label:"Wait Until",description:"Wait until time",icon:e.jsx(Ns,{className:"h-3.5 w-3.5 text-amber-500"}),color:"bg-amber-500/10"},{type:"group",label:"Group",description:"Group nodes",icon:e.jsx(mt,{className:"h-3.5 w-3.5 text-muted-foreground"}),color:"bg-muted"},{type:"httpRequest",label:"HTTP Request",description:"API call",icon:e.jsx(es,{className:"h-3.5 w-3.5 text-primary"}),color:"bg-primary/10"},{type:"holidays",label:"Holidays",description:"Market holidays",icon:e.jsx(ms,{className:"h-3.5 w-3.5 text-purple-400"}),color:"bg-purple-400/10"},{type:"timings",label:"Timings",description:"Market hours",icon:e.jsx(A,{className:"h-3.5 w-3.5 text-purple-400"}),color:"bg-purple-400/10"}];return e.jsxs("div",{className:"flex h-full flex-col border-r border-border bg-card",children:[e.jsxs("div",{className:"shrink-0 border-b border-border p-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Nodes"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Drag nodes to the canvas"})]}),e.jsxs(Ot,{defaultValue:"triggers",className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"shrink-0 border-b border-border px-1 py-1.5",children:e.jsxs(Mt,{className:"h-7 w-full",children:[e.jsx(te,{value:"triggers",className:"flex-1 text-[8px] px-0.5",children:"Trigger"}),e.jsx(te,{value:"actions",className:"flex-1 text-[8px] px-0.5",children:"Action"}),e.jsx(te,{value:"data",className:"flex-1 text-[8px] px-0.5",children:"Data"}),e.jsx(te,{value:"stream",className:"flex-1 text-[8px] px-0.5",children:"Stream"}),e.jsx(te,{value:"conditions",className:"flex-1 text-[8px] px-0.5",children:"Logic"}),e.jsx(te,{value:"utilities",className:"flex-1 text-[8px] px-0.5",children:"Util"})]})}),e.jsxs("div",{className:"flex-1 min-h-0 relative",children:[e.jsx(le,{value:"triggers",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:n.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(le,{value:"actions",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:d.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(le,{value:"data",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:f.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(le,{value:"stream",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:w.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(le,{value:"conditions",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:p.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})}),e.jsx(le,{value:"utilities",className:"m-0 absolute inset-0",children:e.jsx(H,{className:"h-full",children:e.jsx("div",{className:"space-y-1.5 p-2",children:S.map(y=>e.jsx(ne,{...y,onDragStart:a},y.type))})})})]})]})]})}const ol=[{value:"above",label:"Greater Than"},{value:"below",label:"Less Than"},{value:"crosses_above",label:"Crosses Above"},{value:"crosses_below",label:"Crosses Below"}],xl=[{value:"once",label:"Only Once"},{value:"every_time",label:"Every Time"}],ml=[{value:"none",label:"No Expiration"},{value:"1h",label:"1 Hour"},{value:"4h",label:"4 Hours"},{value:"1d",label:"1 Day"},{value:"1w",label:"1 Week"}],ul=[{value:"set",label:"Set Value",description:"Set variable to a value"},{value:"get",label:"Get Value",description:"Copy from another variable"},{value:"add",label:"Add",description:"Add to variable"},{value:"subtract",label:"Subtract",description:"Subtract from variable"},{value:"multiply",label:"Multiply",description:"Multiply variable"},{value:"divide",label:"Divide",description:"Divide variable"},{value:"increment",label:"Increment",description:"Add 1 to variable"},{value:"decrement",label:"Decrement",description:"Subtract 1 from variable"},{value:"parse_json",label:"Parse JSON",description:"Parse JSON string to object"},{value:"stringify",label:"Stringify",description:"Convert to JSON string"},{value:"append",label:"Append",description:"Append to string"}],pl=[{value:"info",label:"Info",color:"text-blue-400"},{value:"warn",label:"Warning",color:"text-yellow-400"},{value:"error",label:"Error",color:"text-red-400"}],hl=[{value:"==",label:"Equals (=)",description:"Exactly at this time"},{value:">=",label:"At or After (>=)",description:"Time has passed"},{value:"<=",label:"At or Before (<=)",description:"Before this time"},{value:">",label:"After (>)",description:"Strictly after"},{value:"<",label:"Before (<)",description:"Strictly before"}],jl=[{value:"entry",label:"Entry"},{value:"exit",label:"Exit"},{value:"custom",label:"Custom"}],Nl=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DEL"},{value:"PATCH",label:"PATCH"}],ze={start:"Schedule Trigger",priceAlert:"Price Alert",webhookTrigger:"Webhook Trigger",placeOrder:"Place Order",smartOrder:"Smart Order",optionsOrder:"Options Order",optionsMultiOrder:"Multi-Leg Options",basketOrder:"Basket Order",splitOrder:"Split Order",cancelOrder:"Cancel Order",cancelAllOrders:"Cancel All Orders",closePositions:"Close Positions",modifyOrder:"Modify Order",getQuote:"Get Quote",getDepth:"Get Depth",getOrderStatus:"Order Status",openPosition:"Open Position",history:"History Data",expiry:"Get Expiry",multiQuotes:"Multi Quotes",symbol:"Symbol Info",optionSymbol:"Option Symbol",orderBook:"Order Book",tradeBook:"Trade Book",positionBook:"Position Book",syntheticFuture:"Synthetic Future",optionChain:"Option Chain",holidays:"Holidays",timings:"Market Timings",holdings:"Holdings",funds:"Funds",margin:"Margin Calculator",delay:"Delay",waitUntil:"Wait Until",log:"Log",telegramAlert:"Telegram Alert",variable:"Variable",mathExpression:"Math Expression",httpRequest:"HTTP Request",timeWindow:"Time Window",timeCondition:"Time Condition",priceCondition:"Price Condition",positionCheck:"Position Check",fundCheck:"Fund Check",andGate:"AND Gate",orGate:"OR Gate",notGate:"NOT Gate",group:"Group",subscribeLtp:"Subscribe LTP",subscribeQuote:"Subscribe Quote",subscribeDepth:"Subscribe Depth",unsubscribe:"Unsubscribe"};function gl(a){for(const n of Object.values(At)){const d=n.find(p=>p.type===a);if(d)return d}return null}function bl(){const{id:a}=fs(),{nodes:n,selectedNodeId:d,updateNodeData:p,deleteNode:f,selectNode:w}=ws(),[S,y]=u.useState(!1),k=n.find(s=>s.id===d),L=k?.type==="webhookTrigger",E=Me({queryKey:ie.webhook(Number(a)),queryFn:()=>Ya(Number(a)),enabled:L&&!!a}),X=Me({queryKey:ie.indexSymbols(),queryFn:qa,staleTime:1e3*60*60}),F=s=>X.data?.find(I=>I.value===s)?.lotSize||null,l=u.useCallback((s,T)=>{d&&p(d,{[s]:T})},[d,p]),z=u.useCallback(()=>{d&&f(d)},[d,f]),K=u.useCallback(()=>{w(null)},[w]),P=(s,T)=>{navigator.clipboard.writeText(s),B.success(`${T} copied`)};if(!k)return e.jsxs("div",{className:"w-80 border-l border-border bg-card flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Properties"})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Ue,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Select a node to configure"})]})})]});const _=gl(k.type||""),t=k.data,h=k.type||"unknown",J=ze[h]||_?.label||h;return e.jsxs("div",{className:"w-80 border-l border-border bg-card flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-sm",children:J}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure node"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:z,children:e.jsx(ut,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:K,children:e.jsx(vs,{className:"h-4 w-4"})})]})]}),e.jsx(H,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 p-4",children:[h==="start"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Schedule Type"}),e.jsxs(j,{value:t.scheduleType||"daily",onValueChange:s=>l("scheduleType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Lt.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),t.scheduleType!=="interval"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.time||"09:15",onChange:s=>l("time",s.target.value)})]}),t.scheduleType==="interval"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Repeat Every"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"number",min:"1",className:"h-8 w-20",value:t.intervalValue||1,onChange:s=>l("intervalValue",parseInt(s.target.value,10)||1)}),e.jsxs(j,{value:t.intervalUnit||"minutes",onValueChange:s=>l("intervalUnit",s),children:[e.jsx(N,{className:"h-8 flex-1",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"seconds",children:"Seconds"}),e.jsx(o,{value:"minutes",children:"Minutes"}),e.jsx(o,{value:"hours",children:"Hours"})]})]})]})]}),(t.scheduleType==="daily"||t.scheduleType==="weekly")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Run On Days"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.jsx("button",{type:"button",onClick:()=>l("days",[0,1,2,3,4]),className:"rounded-md bg-muted px-2 py-1 text-[10px] hover:bg-accent",children:"Weekdays"}),e.jsx("button",{type:"button",onClick:()=>l("days",[5,6]),className:"rounded-md bg-muted px-2 py-1 text-[10px] hover:bg-accent",children:"Weekends"}),e.jsx("button",{type:"button",onClick:()=>l("days",[0,1,2,3,4,5,6]),className:"rounded-md bg-muted px-2 py-1 text-[10px] hover:bg-accent",children:"All"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Dt.map(s=>{const T=t.days||[0,1,2,3,4],I=T.includes(s.value);return e.jsx("button",{type:"button",onClick:()=>l("days",I?T.filter(U=>U!==s.value):[...T,s.value].sort()),className:m("flex h-8 w-8 items-center justify-center rounded-md text-xs font-medium",I?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-accent"),children:s.label},s.value)})})]}),t.scheduleType==="once"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Date"}),e.jsx(x,{type:"date",className:"h-8",value:t.executeAt||"",onChange:s=>l("executeAt",s.target.value)})]})]}),h==="priceAlert"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Condition"}),e.jsxs(j,{value:t.condition||"above",onValueChange:s=>l("condition",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ol.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Target Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.price||"",onChange:s=>l("price",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Trigger"}),e.jsxs(j,{value:t.trigger||"once",onValueChange:s=>l("trigger",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:xl.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiration"}),e.jsxs(j,{value:t.expiration||"none",onValueChange:s=>l("expiration",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ml.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsx("div",{children:e.jsx(r,{className:"text-xs",children:"Play Sound"})}),e.jsx(qe,{checked:t.playSound??!0,onCheckedChange:s=>l("playSound",s)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Alert Message"}),e.jsx(x,{className:"h-8",placeholder:"Custom message",value:t.message||"",onChange:s=>l("message",s.target.value)})]})]}),h==="webhookTrigger"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Label"}),e.jsx(x,{className:"h-8",placeholder:"TradingView Alert",value:t.label||"",onChange:s=>l("label",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"NSE",children:"NSE"}),e.jsx(o,{value:"BSE",children:"BSE"}),e.jsx(o,{value:"NFO",children:"NFO"}),e.jsx(o,{value:"CDS",children:"CDS"}),e.jsx(o,{value:"MCX",children:"MCX"})]})]})]}),e.jsx(Ee,{}),E.isLoading?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(ue,{className:"h-5 w-5 animate-spin"})}):E.data?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Webhook URL"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{readOnly:!0,value:t.symbol?`${E.data.webhook_url}/${t.symbol}`:E.data.webhook_url,className:"font-mono text-[10px] h-8"}),e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>P(t.symbol?`${E.data.webhook_url}/${t.symbol}`:E.data.webhook_url,"URL"),children:e.jsx(Ge,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Webhook Secret"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(x,{readOnly:!0,type:S?"text":"password",value:E.data.webhook_secret,className:"font-mono text-[10px] h-8 pr-8"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-8 w-8",onClick:()=>y(!S),children:S?e.jsx(pt,{className:"h-3 w-3"}):e.jsx(ht,{className:"h-3 w-3"})})]}),e.jsx(M,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>P(E.data.webhook_secret,"Secret"),children:e.jsx(Ge,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:m("rounded-lg border p-2 text-center text-xs",E.data.webhook_enabled?"border-green-500/30 bg-green-500/10 text-green-600":"border-yellow-500/30 bg-yellow-500/10 text-yellow-600"),children:E.data.webhook_enabled?"Webhook enabled":"Webhook disabled"})]}):e.jsx("div",{className:"rounded-lg border-yellow-500/30 bg-yellow-500/10 p-3 text-center text-xs text-yellow-600",children:"Save workflow first"})]}),h==="placeOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:re.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price Type"}),e.jsxs(j,{value:t.priceType||"MARKET",onValueChange:s=>l("priceType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Oe.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),(t.priceType==="LIMIT"||t.priceType==="SL")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.price||0,onChange:s=>l("price",parseFloat(s.target.value)||0)})]}),(t.priceType==="SL"||t.priceType==="SL-M")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Trigger Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.triggerPrice||0,onChange:s=>l("triggerPrice",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"orderResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{orderResult.orderid}}"]})]})]}),h==="smartOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Position Size"}),e.jsx(x,{type:"number",className:"h-8",value:t.positionSize??0,onChange:s=>{const T=parseInt(s.target.value,10);l("positionSize",isNaN(T)?0:T)}}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Target position (positive=long, negative=short, 0=use quantity)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:re.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"smartResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="optionsOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsxs(j,{value:t.underlying||"NIFTY",onValueChange:s=>{l("underlying",s);const T=Ne.find(U=>U.value===s);T&&l("exchange",T.exchange);const I=F(s);I&&l("quantity",I)},children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Ne.map(s=>e.jsxs(o,{value:s.value,children:[s.label," (",s.exchange,")"]},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry"}),e.jsxs(j,{value:t.expiryType||"current_week",onValueChange:s=>l("expiryType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:$e.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strike Offset"}),e.jsxs(j,{value:t.offset||"ATM",onValueChange:s=>l("offset",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Pt.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Option Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Vt.map(s=>e.jsx("button",{type:"button",onClick:()=>l("optionType",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.optionType===s.value?s.value==="CE"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity (Lots)"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"MIS",children:"MIS"}),e.jsx(o,{value:"NRML",children:"NRML"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price Type"}),e.jsxs(j,{value:t.priceType||"MARKET",onValueChange:s=>l("priceType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Oe.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),(t.priceType==="LIMIT"||t.priceType==="SL")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.price||0,onChange:s=>l("price",parseFloat(s.target.value)||0)})]}),(t.priceType==="SL"||t.priceType==="SL-M")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Trigger Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.triggerPrice||0,onChange:s=>l("triggerPrice",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"optionOrder",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="optionsMultiOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strategy"}),e.jsxs(j,{value:t.strategy||"straddle",onValueChange:s=>l("strategy",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Bt.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsxs(j,{value:t.underlying||"NIFTY",onValueChange:s=>{l("underlying",s);const T=Ne.find(I=>I.value===s);T&&l("exchange",T.exchange)},children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Ne.map(s=>e.jsxs(o,{value:s.value,children:[s.label," (",s.exchange,")"]},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry"}),e.jsxs(j,{value:t.expiryType||"current_week",onValueChange:s=>l("expiryType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:$e.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.action==="BUY"?"Long strategy":"Short strategy"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Quantity (Lots)"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||1,onChange:s=>l("quantity",parseInt(s.target.value,10)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"MIS",children:"MIS"}),e.jsx(o,{value:"NRML",children:"NRML"})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-2",children:[e.jsx("p",{className:"text-[10px] font-medium mb-1.5",children:"Strategy Legs:"}),e.jsxs("div",{className:"space-y-0.5 text-[10px] font-mono",children:[t.strategy==="straddle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM CE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM PE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]})]}),t.strategy==="strangle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 CE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 PE"}),e.jsx("span",{className:t.action==="BUY"?"text-green-600":"text-red-600",children:t.action||"SELL"})]})]}),t.strategy==="iron_condor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 CE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM4 CE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 PE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM4 PE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]})]}),t.strategy==="bull_call_spread"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM CE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 CE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]})]}),t.strategy==="bear_put_spread"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ATM PE"}),e.jsx("span",{className:"text-green-600",children:"BUY"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"OTM2 PE"}),e.jsx("span",{className:"text-red-600",children:"SELL"})]})]}),t.strategy==="custom"&&e.jsx("p",{className:"text-muted-foreground",children:"Configure custom legs via API"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"multiLegOrder",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="basketOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Basket Name"}),e.jsx(x,{className:"h-8",placeholder:"Morning Portfolio",value:t.basketName||"",onChange:s=>l("basketName",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Orders (SYMBOL,EXCHANGE,ACTION,QTY)"}),e.jsx(q,{className:"min-h-[100px] text-xs font-mono",placeholder:`RELIANCE,NSE,BUY,10
INFY,NSE,BUY,5
SBIN,NSE,SELL,20`,value:t.orders||"",onChange:s=>l("orders",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Supported exchanges: NSE, BSE, NFO, BFO, CDS, BCD, MCX"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:re.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Price Type"}),e.jsxs(j,{value:t.priceType||"MARKET",onValueChange:s=>l("priceType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:Oe.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"basketResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{basketResult.results}}"," in other nodes"]})]})]}),h==="splitOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Action"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:me.map(s=>e.jsx("button",{type:"button",onClick:()=>l("action",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.action===s.value?s.value==="BUY"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Total Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.quantity||100,onChange:s=>l("quantity",parseInt(s.target.value,10)||100)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Split Size"}),e.jsx(x,{type:"number",min:1,className:"h-8",value:t.splitSize||50,onChange:s=>l("splitSize",parseInt(s.target.value,10)||50)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:re.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"splitResult",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{splitResult.results}}"," in other nodes"]})]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Splits into ",Math.ceil((t.quantity||100)/(t.splitSize||50))," orders"]})]}),h==="cancelOrder"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Order ID"}),e.jsx(x,{className:"h-8",placeholder:"{{orderResult.orderid}}",value:t.orderId||"",onChange:s=>l("orderId",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Use variable from Place Order"})]}),h==="cancelAllOrders"&&e.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancels all open orders. No configuration needed."})}),h==="closePositions"&&e.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Closes all open positions. No configuration needed."})}),h==="modifyOrder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Order ID"}),e.jsx(x,{className:"h-8",placeholder:"{{orderResult.orderid}}",value:t.orderId||"",onChange:s=>l("orderId",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"New Price"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",placeholder:"Leave empty to keep",value:t.newPrice||"",onChange:s=>l("newPrice",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"New Quantity"}),e.jsx(x,{type:"number",min:1,className:"h-8",placeholder:"Leave empty to keep",value:t.newQuantity||"",onChange:s=>l("newQuantity",parseInt(s.target.value,10)||0)})]})]}),h==="getQuote"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"quote",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{quote.data.ltp}}"]})]})]}),h==="getDepth"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"SBIN",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"depth",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{depth.data.bids[0].price}}"]})]})]}),h==="getOrderStatus"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Order ID"}),e.jsx(x,{className:"h-8",placeholder:"{{orderResult.orderid}}",value:t.orderId||"",onChange:s=>l("orderId",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Use variable from Place Order node"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"orderStatus",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{orderStatus.data.order_status}}"]})]})]}),h==="openPosition"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:re.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"position",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{position.quantity}}"]})]})]}),h==="history"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"SBIN",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Interval"}),e.jsxs(j,{value:t.interval||"1d",onValueChange:s=>l("interval",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"1m",children:"1 Min"}),e.jsx(o,{value:"5m",children:"5 Min"}),e.jsx(o,{value:"15m",children:"15 Min"}),e.jsx(o,{value:"1h",children:"1 Hour"}),e.jsx(o,{value:"1d",children:"Daily"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Days"}),e.jsx(x,{type:"number",min:1,max:365,className:"h-8",value:t.days||30,onChange:s=>l("days",parseInt(s.target.value,10)||30)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"ohlcv",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="expiry"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NFO",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"NFO",children:"NFO"}),e.jsx(o,{value:"BFO",children:"BFO"}),e.jsx(o,{value:"MCX",children:"MCX"}),e.jsx(o,{value:"CDS",children:"CDS"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"expiries",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{expiries.data[0]}}"]})]})]}),h==="multiQuotes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbols (comma separated)"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE,INFY,TCS",value:t.symbols||"",onChange:s=>l("symbols",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"quotes",value:t.outputVariable||"quotes",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{quotes.results[0].data.ltp}}"]})]})]}),h==="symbol"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY30DEC25FUT",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NFO",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"symbolInfo",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{symbolInfo.data.lotsize}}"]})]})]}),h==="optionSymbol"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.underlying||"",onChange:s=>l("underlying",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE_INDEX",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"NSE_INDEX",children:"NSE Index"}),e.jsx(o,{value:"BSE_INDEX",children:"BSE Index"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry Date"}),e.jsx(x,{className:"h-8",placeholder:"30DEC25",value:t.expiryDate||"",onChange:s=>l("expiryDate",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strike Offset"}),e.jsxs(j,{value:t.offset||"ATM",onValueChange:s=>l("offset",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"ATM",children:"ATM"}),e.jsx(o,{value:"ITM1",children:"ITM 1"}),e.jsx(o,{value:"ITM2",children:"ITM 2"}),e.jsx(o,{value:"OTM1",children:"OTM 1"}),e.jsx(o,{value:"OTM2",children:"OTM 2"}),e.jsx(o,{value:"OTM3",children:"OTM 3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Option Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["CE","PE"].map(s=>e.jsx("button",{type:"button",onClick:()=>l("optionType",s),className:m("rounded-lg border py-2 text-sm font-semibold",t.optionType===s?s==="CE"?"bg-green-500/20 border-green-500 text-green-600":"bg-red-500/20 border-red-500 text-red-600":"border-border bg-muted"),children:s==="CE"?"Call":"Put"},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"optionSym",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="orderBook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"orders",value:t.outputVariable||"orders",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{orders.data.orders}}"]})]}),h==="tradeBook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"trades",value:t.outputVariable||"trades",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{trades.data}}"]})]}),h==="positionBook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"positions",value:t.outputVariable||"positions",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{positions.data}}"]})]}),h==="syntheticFuture"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.underlying||"",onChange:s=>l("underlying",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE_INDEX",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"NSE_INDEX",children:"NSE Index"}),e.jsx(o,{value:"BSE_INDEX",children:"BSE Index"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry Date"}),e.jsx(x,{className:"h-8",placeholder:"25NOV25",value:t.expiryDate||"",onChange:s=>l("expiryDate",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"synthFuture",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{synthFuture.synthetic_future_price}}"]})]})]}),h==="optionChain"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Underlying"}),e.jsx(x,{className:"h-8",placeholder:"NIFTY",value:t.underlying||"",onChange:s=>l("underlying",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE_INDEX",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"NSE_INDEX",children:"NSE Index"}),e.jsx(o,{value:"BSE_INDEX",children:"BSE Index"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expiry Date"}),e.jsx(x,{className:"h-8",placeholder:"30DEC25",value:t.expiryDate||"",onChange:s=>l("expiryDate",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Strike Count"}),e.jsx(x,{type:"number",className:"h-8",placeholder:"10 (empty=full)",value:t.strikeCount||"",onChange:s=>l("strikeCount",parseInt(s.target.value,10)||void 0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"chain",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{chain.atm_strike}}"]})]})]}),h==="holidays"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Year"}),e.jsx(x,{type:"number",className:"h-8",placeholder:String(new Date().getFullYear()),value:t.year||"",onChange:s=>l("year",parseInt(s.target.value,10)||void 0)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Empty = current year"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"holidays",value:t.outputVariable||"holidays",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="timings"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Date"}),e.jsx(x,{type:"date",className:"h-8",value:t.date||"",onChange:s=>l("date",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Empty = today"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"timings",value:t.outputVariable||"timings",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="holdings"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"holdings",value:t.outputVariable||"holdings",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{holdings.data[0].symbol}}"]})]}),h==="funds"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"funds",value:t.outputVariable||"funds",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{funds.data.availablecash}}"]})]}),h==="margin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Positions (JSON)"}),e.jsx(q,{className:"min-h-[100px] text-xs font-mono",placeholder:'[{"symbol": "NIFTY25DEC25FUT", "exchange": "NFO", "action": "BUY", "quantity": 75}]',value:t.positionsJson||"",onChange:s=>l("positionsJson",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"marginResult",value:t.outputVariable||"marginResult",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="subscribeLtp"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"ltp",value:t.outputVariable||"ltp",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Real-time: ","{{ltp}}"]})]})]}),h==="subscribeQuote"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"quote",value:t.outputVariable||"quote",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{quote.ltp}}",", ","{{quote.open}}"]})]})]}),h==="subscribeDepth"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"depth",value:t.outputVariable||"depth",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{depth.bids[0].price}}"]})]})]}),h==="unsubscribe"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Stream Type"}),e.jsxs(j,{value:t.streamType||"all",onValueChange:s=>l("streamType",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"ltp",children:"LTP Only"}),e.jsx(o,{value:"quote",children:"Quote Only"}),e.jsx(o,{value:"depth",children:"Depth Only"}),e.jsx(o,{value:"all",children:"All Streams"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"Empty = all symbols",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]})]}),h==="delay"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Wait Duration"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"number",min:1,className:"h-8 flex-1",value:t.delayValue||1,onChange:s=>l("delayValue",parseInt(s.target.value,10)||1)}),e.jsxs(j,{value:t.delayUnit||"seconds",onValueChange:s=>l("delayUnit",s),children:[e.jsx(N,{className:"h-8 w-28",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"seconds",children:"Seconds"}),e.jsx(o,{value:"minutes",children:"Minutes"}),e.jsx(o,{value:"hours",children:"Hours"})]})]})]})]})}),h==="waitUntil"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Target Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.targetTime||"09:30",onChange:s=>l("targetTime",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Workflow pauses until this time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Label"}),e.jsx(x,{className:"h-8",placeholder:"Wait for Entry",value:t.label||"",onChange:s=>l("label",s.target.value)})]})]}),h==="log"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Log Level"}),e.jsxs(j,{value:t.level||"info",onValueChange:s=>l("level",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:pl.map(s=>e.jsx(o,{value:s.value,children:e.jsx("span",{className:s.color,children:s.label})},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Message"}),e.jsx(q,{className:"min-h-[80px]",placeholder:"Log message with {{variables}}",value:t.message||"",onChange:s=>l("message",s.target.value)})]})]}),h==="telegramAlert"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"OpenAlgo Username"}),e.jsx(x,{className:"h-8",placeholder:"Your login ID",value:t.username||"",onChange:s=>l("username",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Message"}),e.jsx(q,{className:"min-h-[80px]",placeholder:"Order placed for {{orderResult.symbol}}",value:t.message||"",onChange:s=>l("message",s.target.value)})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-2",children:[e.jsx("p",{className:"text-[10px] font-medium mb-1",children:"Variables:"}),e.jsxs("p",{className:"text-[9px] font-mono text-muted-foreground",children:["{{orderResult.orderid}}",", ","{{quote.ltp}}",", ","{{timestamp}}"]})]})]}),h==="variable"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Variable Name"}),e.jsx(x,{className:"h-8",placeholder:"myLTP",value:t.variableName||"",onChange:s=>l("variableName",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use: ",`{{${t.variableName||"varName"}}}`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Operation"}),e.jsxs(j,{value:t.operation||"set",onValueChange:s=>l("operation",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:ul.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),["set","add","subtract","multiply","divide","append","parse_json"].includes(t.operation)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:t.operation==="parse_json"?"JSON String":"Value"}),t.operation==="parse_json"?e.jsx(q,{className:"min-h-[80px] font-mono",placeholder:'{"key": "value"}',value:String(t.value||""),onChange:s=>l("value",s.target.value)}):e.jsx(x,{className:"h-8",placeholder:"Value or {{variable}}",value:String(t.value||""),onChange:s=>l("value",s.target.value)})]}),["get","stringify"].includes(t.operation)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Source Variable"}),e.jsx(x,{className:"h-8",placeholder:"quoteData",value:t.sourceVariable||"",onChange:s=>l("sourceVariable",s.target.value)})]}),t.operation==="get"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"JSON Path"}),e.jsx(x,{className:"h-8",placeholder:"data.ltp",value:t.jsonPath||"",onChange:s=>l("jsonPath",s.target.value)})]})]}),h==="mathExpression"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Expression"}),e.jsx(q,{className:"min-h-[80px] font-mono",placeholder:"({{ltp}} * {{lotSize}}) + {{brokerage}}",value:t.expression||"",onChange:s=>l("expression",s.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Supports: +, -, *, /, %, ** (power)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"result",value:t.outputVariable||"result",onChange:s=>l("outputVariable",s.target.value)})]})]}),h==="httpRequest"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Method"}),e.jsx("div",{className:"grid grid-cols-5 gap-1",children:Nl.map(s=>e.jsx("button",{type:"button",onClick:()=>l("method",s.value),className:m("rounded-md border py-1.5 text-[10px] font-bold",t.method===s.value?"bg-primary text-primary-foreground":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"URL"}),e.jsx(x,{className:"h-8",placeholder:"https://api.example.com",value:t.url||"",onChange:s=>l("url",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Headers (JSON)"}),e.jsx(q,{className:"min-h-[60px] font-mono text-xs",placeholder:'{"Authorization": "Bearer {{token}}"}',value:t.headers||"",onChange:s=>l("headers",s.target.value)})]}),["POST","PUT","PATCH"].includes(t.method||"GET")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Body (JSON)"}),e.jsx(q,{className:"min-h-[80px] font-mono text-xs",placeholder:'{"symbol": "{{webhook.symbol}}"}',value:t.body||"",onChange:s=>l("body",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Timeout (ms)"}),e.jsx(x,{type:"number",min:1e3,max:6e4,className:"h-8",value:t.timeout||3e4,onChange:s=>l("timeout",parseInt(s.target.value,10)||3e4)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Output Variable"}),e.jsx(x,{className:"h-8",placeholder:"apiResponse",value:t.outputVariable||"",onChange:s=>l("outputVariable",s.target.value)}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Use ","{{apiResponse.data}}"]})]})]}),h==="timeWindow"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Start Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.startTime||"09:15",onChange:s=>l("startTime",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"End Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.endTime||"15:30",onChange:s=>l("endTime",s.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Invert Condition"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Trigger outside window"})]}),e.jsx(qe,{checked:t.invertCondition||!1,onCheckedChange:s=>l("invertCondition",s)})]})]}),h==="timeCondition"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Condition Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:jl.map(s=>e.jsx("button",{type:"button",onClick:()=>l("conditionType",s.value),className:m("rounded-lg border py-2 text-sm font-semibold",t.conditionType===s.value?s.value==="entry"?"bg-green-500/20 border-green-500 text-green-600":s.value==="exit"?"bg-red-500/20 border-red-500 text-red-600":"bg-primary text-primary-foreground":"border-border bg-muted"),children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Operator"}),e.jsxs(j,{value:t.operator||">=",onValueChange:s=>l("operator",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:hl.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Target Time"}),e.jsx(x,{type:"time",className:"h-8",value:t.targetTime||"09:30",onChange:s=>l("targetTime",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Label"}),e.jsx(x,{className:"h-8",placeholder:"Market Open Entry",value:t.label||"",onChange:s=>l("label",s.target.value)})]})]}),h==="priceCondition"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Field"}),e.jsxs(j,{value:t.field||"ltp",onValueChange:s=>l("field",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"ltp",children:"LTP"}),e.jsx(o,{value:"open",children:"Open"}),e.jsx(o,{value:"high",children:"High"}),e.jsx(o,{value:"low",children:"Low"}),e.jsx(o,{value:"prev_close",children:"Prev Close"}),e.jsx(o,{value:"change_percent",children:"Change %"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Operator"}),e.jsxs(j,{value:t.operator||">",onValueChange:s=>l("operator",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:">",children:">"}),e.jsx(o,{value:"<",children:"<"}),e.jsx(o,{value:"==",children:"="}),e.jsx(o,{value:">=",children:">="}),e.jsx(o,{value:"<=",children:"<="}),e.jsx(o,{value:"!=",children:"!="})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Value"}),e.jsx(x,{type:"number",step:"0.05",className:"h-8",value:t.value||"",onChange:s=>l("value",parseFloat(s.target.value)||0)})]})]}),h==="positionCheck"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Symbol"}),e.jsx(x,{className:"h-8",placeholder:"RELIANCE",value:t.symbol||"",onChange:s=>l("symbol",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Exchange"}),e.jsxs(j,{value:t.exchange||"NSE",onValueChange:s=>l("exchange",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:O.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Product"}),e.jsxs(j,{value:t.product||"MIS",onValueChange:s=>l("product",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsx(b,{children:re.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Condition"}),e.jsxs(j,{value:t.condition||"exists",onValueChange:s=>l("condition",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"exists",children:"Has Position"}),e.jsx(o,{value:"not_exists",children:"No Position"}),e.jsx(o,{value:"quantity_above",children:"Qty Above"}),e.jsx(o,{value:"quantity_below",children:"Qty Below"}),e.jsx(o,{value:"pnl_above",children:"P&L Above"}),e.jsx(o,{value:"pnl_below",children:"P&L Below"})]})]})]}),["quantity_above","quantity_below","pnl_above","pnl_below"].includes(t.condition)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Threshold"}),e.jsx(x,{type:"number",className:"h-8",value:t.threshold||"",onChange:s=>l("threshold",parseFloat(s.target.value)||0)})]})]}),h==="fundCheck"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Minimum Available Funds"}),e.jsx(x,{type:"number",min:0,className:"h-8",placeholder:"10000",value:t.minAvailable||"",onChange:s=>l("minAvailable",parseFloat(s.target.value)||0)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Checks if margin is above this"})]}),h==="andGate"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Number of Inputs"}),e.jsxs(j,{value:String(t.inputCount||2),onValueChange:s=>l("inputCount",parseInt(s,10)),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"2",children:"2 inputs"}),e.jsx(o,{value:"3",children:"3 inputs"}),e.jsx(o,{value:"4",children:"4 inputs"}),e.jsx(o,{value:"5",children:"5 inputs"})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-xs",children:[e.jsx("p",{className:"font-medium mb-1",children:"AND Gate"}),e.jsx("p",{className:"text-muted-foreground",children:"Yes only if ALL conditions true"})]})]}),h==="orGate"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Number of Inputs"}),e.jsxs(j,{value:String(t.inputCount||2),onValueChange:s=>l("inputCount",parseInt(s,10)),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"2",children:"2 inputs"}),e.jsx(o,{value:"3",children:"3 inputs"}),e.jsx(o,{value:"4",children:"4 inputs"}),e.jsx(o,{value:"5",children:"5 inputs"})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-xs",children:[e.jsx("p",{className:"font-medium mb-1",children:"OR Gate"}),e.jsx("p",{className:"text-muted-foreground",children:"Yes if ANY condition true"})]})]}),h==="notGate"&&e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-xs",children:[e.jsx("p",{className:"font-medium mb-1",children:"NOT Gate"}),e.jsx("p",{className:"text-muted-foreground",children:"Inverts the condition. True becomes False, False becomes True."})]}),h==="group"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Group Name"}),e.jsx(x,{className:"h-8",placeholder:"Entry Logic",value:t.label||"",onChange:s=>l("label",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Color"}),e.jsxs(j,{value:t.color||"default",onValueChange:s=>l("color",s),children:[e.jsx(N,{className:"h-8",children:e.jsx(g,{})}),e.jsxs(b,{children:[e.jsx(o,{value:"default",children:"Default"}),e.jsx(o,{value:"blue",children:"Blue"}),e.jsx(o,{value:"green",children:"Green"}),e.jsx(o,{value:"red",children:"Red"}),e.jsx(o,{value:"purple",children:"Purple"}),e.jsx(o,{value:"orange",children:"Orange"})]})]})]})]}),!ze[h]&&e.jsxs(e.Fragment,{children:[_&&e.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jt,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium",children:_.label}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:_.description})]})]})}),e.jsx(Ee,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Node Label"}),e.jsx(x,{className:"h-8",placeholder:"Enter label...",value:t.label||"",onChange:s=>l("label",s.target.value)})]})]}),e.jsx(Ee,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Node ID"}),e.jsx("code",{className:"block text-[10px] bg-muted px-2 py-1 rounded font-mono",children:k.id})]})]})})]})}function yl({logs:a,status:n,onClose:d}){const p=()=>{switch(n){case"running":return e.jsx(A,{className:"h-4 w-4 animate-pulse text-amber-500"});case"success":return e.jsx(We,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(de,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})}},f=()=>{switch(n){case"running":return"Executing...";case"success":return"Completed";case"error":return"Failed";default:return"Ready"}},w=y=>{try{return new Date(y).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return y}},S=y=>{switch(y){case"error":return e.jsx(de,{className:"h-3.5 w-3.5 text-red-500"});case"warning":return e.jsx(Nt,{className:"h-3.5 w-3.5 text-amber-500"});default:return e.jsx(We,{className:"h-3.5 w-3.5 text-green-500"})}};return e.jsxs("div",{className:"w-80 border-l border-border bg-card flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p(),e.jsx("span",{className:"font-medium",children:"Execution Log"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:m("text-xs px-2 py-0.5 rounded-full",n==="running"&&"bg-amber-500/10 text-amber-500",n==="success"&&"bg-green-500/10 text-green-500",n==="error"&&"bg-red-500/10 text-red-500",n==="idle"&&"bg-muted text-muted-foreground"),children:f()}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:d,children:e.jsx(vs,{className:"h-4 w-4"})})]})]}),e.jsx(H,{className:"flex-1",children:e.jsx("div",{className:"p-3 space-y-2",children:a.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[e.jsx(Be,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No logs yet"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Run Now" to execute the workflow'})]}):a.map((y,k)=>e.jsx("div",{className:m("rounded-lg border p-2.5 text-sm",y.level==="error"&&"border-red-500/30 bg-red-500/5",y.level==="warning"&&"border-amber-500/30 bg-amber-500/5",y.level==="info"&&"border-border bg-background"),children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5",children:S(y.level)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:w(y.time)})}),e.jsx("p",{className:m("text-sm break-words",y.level==="error"&&"text-red-500",y.level==="warning"&&"text-amber-500"),children:y.message})]})]})},k))})}),a.length>0&&e.jsx("div",{className:"border-t border-border px-4 py-2 text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[a.length," log entries"]}),e.jsxs("span",{children:[a.filter(y=>y.level==="error").length," errors"]})]})})]})}let Ca=0;const vl=()=>`node_${Ca++}`;function fl(){const{id:a}=fs(),n=It(),d=at(),p=u.useRef(null),{screenToFlowPosition:f}=Ke(),{name:w,nodes:S,edges:y,selectedNodeId:k,isModified:L,setWorkflow:E,setName:X,onNodesChange:F,onEdgesChange:l,onConnect:z,addNode:K,selectNode:P,selectEdge:_,deleteSelected:t,markSaved:h,resetWorkflow:J}=ws(),[s,T]=u.useState(!1),[I,U]=u.useState(!1),[be,G]=u.useState([]),[Z,W]=u.useState("idle"),{mode:se,appMode:D,toggleMode:oe,toggleAppMode:ye,isTogglingMode:he}=tt(),{user:ve,logout:fe}=lt(),we=async()=>{try{await ct.logout(),fe(),n("/login")}catch{B.error("Logout failed","system")}},Ce=async()=>{await ye()},{isLoading:Te,data:V}=Me({queryKey:ie.workflow(Number(a)),queryFn:()=>Ka(Number(a)),enabled:!!a});u.useEffect(()=>{if(V){const v=V.nodes||[],R=(V.edges||[]).map(xe=>({...xe,type:"insertable",animated:!0}));E({id:V.id,name:V.name,description:V.description||"",nodes:v,edges:R}),T(V.is_active),Ca=Math.max(0,...v.map(xe=>{const Re=xe.id.match(/node_(\d+)/);return Re?parseInt(Re[1]):0}))+1}},[V,E]),u.useEffect(()=>()=>{J()},[J]);const ae=je({mutationFn:()=>Qa(Number(a),{name:w,nodes:S,edges:y}),onSuccess:()=>{h(),d.invalidateQueries({queryKey:ie.workflows()}),B.success("Workflow saved","flow")},onError:v=>{B.error(v.message,"flow")}}),Se=je({mutationFn:()=>Ha(Number(a)),onSuccess:()=>{T(!0),d.invalidateQueries({queryKey:ie.workflow(Number(a))}),B.success("Workflow activated","flow")},onError:v=>{B.error(v.message,"flow")}}),ke=je({mutationFn:()=>$a(Number(a)),onSuccess:()=>{T(!1),d.invalidateQueries({queryKey:ie.workflow(Number(a))}),B.success("Workflow deactivated","flow")},onError:v=>{B.error(v.message,"flow")}}),_e=je({mutationFn:()=>(W("running"),G([]),U(!0),Xa(Number(a))),onSuccess:v=>{W(v.status==="success"?"success":"error"),v.logs&&G(v.logs),v.status==="success"?B.success(v.message||"Execution completed","flow"):B.error(v.message||"Execution failed","flow")},onError:v=>{W("error"),G([{time:new Date().toISOString(),message:v.message,level:"error"}]),B.error(v.message,"flow")}});u.useEffect(()=>{const v=C=>{const R=C.target;R.tagName==="INPUT"||R.tagName==="TEXTAREA"||R.isContentEditable||((C.key==="Delete"||C.key==="Backspace")&&k&&(C.preventDefault(),t()),(C.ctrlKey||C.metaKey)&&C.key==="s"&&(C.preventDefault(),L&&!ae.isPending&&ae.mutate()),C.key==="Escape"&&P(null),(C.key==="?"||C.shiftKey&&C.key==="/")&&n("/flow/shortcuts"))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[k,t,P,L,ae,n]);const Ta=u.useCallback((v,C)=>{v.dataTransfer.setData("application/reactflow",C),v.dataTransfer.effectAllowed="move"},[]),Sa=u.useCallback(v=>{v.preventDefault(),v.dataTransfer.dropEffect="move"},[]),ka=u.useCallback(v=>{v.preventDefault();const C=v.dataTransfer.getData("application/reactflow");if(!C||!p.current)return;const R=f({x:v.clientX,y:v.clientY}),Y=Cs[C]||{},xe={id:vl(),type:C,position:R,data:{...Y}};K(xe)},[f,K]),Ea=u.useCallback((v,C)=>{P(C.id)},[P]),Oa=u.useCallback(()=>{P(null)},[P]),Ma=u.useCallback((v,C)=>{_(C.id)},[_]),Ia=u.useCallback(async()=>{try{const v=await za(Number(a)),C=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),R=URL.createObjectURL(C),Y=document.createElement("a");Y.href=R,Y.download=`${v.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.json`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(R),B.success("Workflow exported","flow")}catch(v){B.error(v instanceof Error?v.message:"Export failed","flow")}},[a]);return!a||a==="undefined"||isNaN(Number(a))?e.jsxs("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsxs("div",{className:"h-12 border-b border-border flex items-center px-2 bg-card/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("img",{src:"/images/android-chrome-192x192.png",alt:"OpenAlgo",className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-sm",children:"openalgo"})]}),e.jsx("div",{className:"flex-1"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Invalid workflow ID"}),e.jsxs(M,{onClick:()=>n("/flow"),children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Back to Workflows"]})]})]}):Te?e.jsxs("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsxs("div",{className:"h-12 border-b border-border flex items-center px-2 bg-card/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("img",{src:"/images/android-chrome-192x192.png",alt:"OpenAlgo",className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-sm",children:"openalgo"})]}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(ue,{className:"h-8 w-8 animate-spin text-primary"})})]}):e.jsxs("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[e.jsxs("div",{className:"h-12 border-b border-border flex items-center px-2 bg-card/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("img",{src:"/images/android-chrome-192x192.png",alt:"OpenAlgo",className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-sm",children:"openalgo"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Flow Editor"})}),e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsxs(rt,{variant:D==="live"?"default":"secondary",className:m("text-xs",D==="analyzer"&&"bg-purple-500 hover:bg-purple-600 text-white"),children:[e.jsx("span",{className:"hidden sm:inline",children:D==="live"?"Live Mode":"Analyze Mode"}),e.jsx("span",{className:"sm:hidden",children:D==="live"?"Live":"Analyze"})]}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Ce,disabled:he,title:`Switch to ${D==="live"?"Analyze":"Live"} mode`,children:he?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):D==="live"?e.jsx(Ae,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:oe,disabled:D!=="live",title:se==="light"?"Switch to dark mode":"Switch to light mode",children:se==="light"?e.jsx(gt,{className:"h-4 w-4"}):e.jsx(bt,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-7 text-xs",asChild:!0,children:e.jsxs(Qe,{to:"/dashboard",children:[e.jsx(yt,{className:"h-3.5 w-3.5 mr-1.5"}),"Dashboard"]})}),e.jsxs(Ie,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full bg-primary text-primary-foreground",children:e.jsx("span",{className:"text-sm font-medium",children:ve?.username?.[0]?.toUpperCase()||"O"})})}),e.jsxs(Pe,{align:"end",className:"w-56",children:[nt.map(v=>e.jsxs(Q,{onSelect:()=>n(v.href),className:"cursor-pointer",children:[e.jsx(v.icon,{className:"h-4 w-4 mr-2"}),v.label]},v.href)),e.jsx(Q,{asChild:!0,children:e.jsxs("a",{href:"https://docs.openalgo.in",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsx(vt,{className:"h-4 w-4"}),"Docs"]})}),e.jsx(it,{}),e.jsxs(Q,{onClick:we,className:"text-destructive focus:text-destructive",children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-border bg-card px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>n("/flow"),children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx(x,{value:w,onChange:v=>X(v.target.value),className:"h-8 w-64 border-transparent bg-transparent px-2 font-medium hover:border-border focus:border-border"}),L&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"Unsaved"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>ae.mutate(),disabled:ae.isPending||!L,children:[ae.isPending?e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(wt,{className:"mr-2 h-4 w-4"}),"Save"]}),s?e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>ke.mutate(),disabled:ke.isPending,children:[ke.isPending?e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):e.jsxs(M,{size:"sm",onClick:()=>Se.mutate(),disabled:Se.isPending,children:[Se.isPending?e.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Tt,{className:"mr-2 h-4 w-4"}),"Activate"]}),e.jsxs(Ie,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(St,{className:"h-4 w-4"})})}),e.jsxs(Pe,{align:"end",children:[e.jsx(Q,{onClick:()=>_e.mutate(),disabled:_e.isPending,children:"Run Now"}),e.jsxs(Q,{onClick:()=>U(!I),children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),I?"Hide Logs":"Show Logs"]}),e.jsxs(Q,{onClick:Ia,children:[e.jsx(kt,{className:"mr-2 h-4 w-4"}),"Export Workflow"]}),e.jsx(Q,{asChild:!0,children:e.jsxs(Qe,{to:"/flow/shortcuts",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Keyboard Shortcuts"]})})]})]})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-56 flex-shrink-0",children:e.jsx(dl,{onDragStart:Ta})}),e.jsx("div",{ref:p,className:"flex-1",children:e.jsxs(_a,{nodes:S,edges:y,onNodesChange:F,onEdgesChange:l,onConnect:z,onNodeClick:Ea,onEdgeClick:Ma,onPaneClick:Oa,onDragOver:Sa,onDrop:ka,nodeTypes:ll,edgeTypes:cl,fitView:!0,snapToGrid:!0,snapGrid:[16,16],deleteKeyCode:null,defaultEdgeOptions:{type:"insertable",animated:!0},connectionLineStyle:{stroke:"hsl(var(--primary))",strokeWidth:2},connectionRadius:30,connectOnClick:!0,children:[e.jsx(Ra,{gap:16,size:1}),e.jsx(Ua,{}),e.jsx(Ga,{nodeStrokeWidth:3,pannable:!0,zoomable:!0}),e.jsx(Wa,{position:"bottom-center",className:"mb-4",children:e.jsxs("div",{className:m("flex items-center gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm",s&&"border-green-500/30 bg-green-500/5"),children:[e.jsx("div",{className:m("h-2 w-2 rounded-full",s?"bg-green-500":"bg-muted-foreground")}),e.jsx("span",{className:"text-muted-foreground",children:s?"Workflow active":"Workflow inactive"})]})})]})}),k&&e.jsx(bl,{}),I&&!k&&e.jsx(yl,{logs:be,status:Z,onClose:()=>U(!1)})]})]})}function Fl(){return e.jsx(Fa,{children:e.jsx(fl,{})})}export{Fl as default};
