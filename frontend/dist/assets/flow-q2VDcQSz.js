import{r as i}from"./vendor-react-Df-MYEHc.js";import{z as f,E as d,a0 as h,a1 as b,Q as l,T as k,H as y,R as m,w as e}from"./index-jmNeOP74.js";var $=class extends f{#s;#o=void 0;#t;#e;constructor(t,s){super(),this.#s=t,this.setOptions(s),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=this.#s.defaultMutationOptions(t),d(this.options,s)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),s?.mutationKey&&this.options.mutationKey&&h(s.mutationKey)!==h(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#n(t)}getCurrentResult(){return this.#o}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#r(),this.#n()}mutate(t,s){return this.#e=s,this.#t?.removeObserver(this),this.#t=this.#s.getMutationCache().build(this.#s,this.options),this.#t.addObserver(this),this.#t.execute(t)}#r(){const t=this.#t?.state??b();this.#o={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#n(t){l.batch(()=>{if(this.#e&&this.hasListeners()){const s=this.#o.variables,a=this.#o.context,r={client:this.#s,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#e.onSuccess?.(t.data,s,a,r)}catch(n){Promise.reject(n)}try{this.#e.onSettled?.(t.data,null,s,a,r)}catch(n){Promise.reject(n)}}else if(t?.type==="error"){try{this.#e.onError?.(t.error,s,a,r)}catch(n){Promise.reject(n)}try{this.#e.onSettled?.(void 0,t.error,s,a,r)}catch(n){Promise.reject(n)}}}this.listeners.forEach(s=>{s(this.#o)})})}};function x(t,s){const a=k(),[r]=i.useState(()=>new $(a,t));i.useEffect(()=>{r.setOptions(t)},[r,t]);const n=i.useSyncExternalStore(i.useCallback(c=>r.subscribe(l.batchCalls(c)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),w=i.useCallback((c,p)=>{r.mutate(c,p).catch(y)},[r]);if(n.error&&m(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:w,mutateAsync:n.mutate}}const o="/flow/api";async function W(){return(await e.get(`${o}/workflows`)).data}async function O(t){return(await e.get(`${o}/workflows/${t}`)).data}async function S(t){return(await e.post(`${o}/workflows`,t)).data}async function C(t,s){return(await e.put(`${o}/workflows/${t}`,s)).data}async function E(t){return(await e.delete(`${o}/workflows/${t}`)).data}async function M(t){return(await e.post(`${o}/workflows/${t}/activate`)).data}async function K(t){return(await e.post(`${o}/workflows/${t}/deactivate`)).data}async function R(t){return(await e.post(`${o}/workflows/${t}/execute`)).data}async function j(t){return(await e.get(`${o}/workflows/${t}/webhook`)).data}async function P(t){return(await e.post(`${o}/workflows/${t}/webhook/enable`)).data}async function I(t){return(await e.post(`${o}/workflows/${t}/webhook/disable`)).data}async function A(t){return(await e.post(`${o}/workflows/${t}/webhook/regenerate`)).data}async function L(t,s){return(await e.post(`${o}/workflows/${t}/webhook/auth-type`,{auth_type:s})).data}async function _(t){return(await e.get(`${o}/workflows/${t}/export`)).data}async function Q(t){return{id:(await e.post(`${o}/workflows/import`,t)).data.workflow_id,name:t.name||"Imported Workflow"}}async function T(){return(await e.get(`${o}/index-symbols`)).data.data||[]}const u={all:["flow"],workflows:()=>[...u.all,"workflows"],workflow:t=>[...u.workflows(),t],executions:t=>[...u.workflow(t),"executions"],webhook:t=>[...u.workflow(t),"webhook"],indexSymbols:()=>[...u.all,"index-symbols"]};export{M as a,E as b,I as c,K as d,P as e,u as f,L as g,S as h,Q as i,j,T as k,W as l,C as m,R as n,_ as o,O as p,A as r,x as u};
