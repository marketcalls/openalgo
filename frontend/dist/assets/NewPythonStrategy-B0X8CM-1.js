import{r,j as e}from"./vendor-react-CCyQGCED.js";import{B as d,s as l}from"./index-D0023jFM.js";import{p as O}from"./python-strategy-CJZEPEnb.js";import{A as U,a as Y}from"./alert-Dlgyh2fF.js";import{C as b,a as v,b as C,c as K,d as w}from"./card-CDguRyHx.js";import{C as G,b as R,a as W}from"./collapsible-DcfHjv7p.js";import{I as x}from"./input-D8_g_dg9.js";import{L as m}from"./label-BgxgrBuS.js";import{b as $}from"./python-strategy-CJF1bPLS.js";import{N as q,I as H,aO as T,a_ as P,V}from"./vendor-icons-CCn_k3dF.js";import{a as X,L as Z}from"./vendor-router-Dzc1xxhr.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-radix-CYVJEJRR.js";const A=`"""
Example OpenAlgo Strategy
This is a minimal example showing how to use the OpenAlgo Python SDK.
"""

import os
import time
from openalgo import api

# Get API key from environment variable
API_KEY = os.getenv('OPENALGO_API_KEY')

# Initialize the API client
client = api(
    api_key=API_KEY,
    host_url="http://127.0.0.1:5000"
)

def main():
    """Main strategy logic"""
    print("Strategy started")

    # Example: Get account funds
    funds = client.funds()
    print(f"Available funds: {funds}")

    # Your trading logic here
    while True:
        # Check market conditions
        # Place orders based on your strategy
        # ...

        time.sleep(60)  # Check every minute

if __name__ == "__main__":
    main()
`;function me(){const u=X(),g=r.useRef(null),[i,f]=r.useState(""),[n,_]=r.useState(null),[y,j]=r.useState(!1),[N,k]=r.useState(!1),[a,E]=r.useState({}),[p,I]=r.useState("09:00"),[h,F]=r.useState("16:00"),[o,D]=r.useState(["mon","tue","wed","thu","fri"]),L=s=>{D(t=>t.includes(s)?t.filter(c=>c!==s):[...t,s])},z=()=>{const s={};return i.trim()?i.length<3||i.length>50?s.name="Name must be between 3 and 50 characters":/^[a-zA-Z0-9\s\-_]+$/.test(i)||(s.name="Name can only contain letters, numbers, spaces, hyphens, and underscores"):s.name="Strategy name is required",n?n.name.endsWith(".py")||(s.file="File must be a Python file (.py)"):s.file="Please select a Python file",p||(s.startTime="Start time is required"),h||(s.stopTime="Stop time is required"),o.length===0&&(s.days="Select at least one day"),E(s),Object.keys(s).length===0},B=s=>{const t=s.target.files?.[0];if(t){if(!t.name.endsWith(".py")){l.error("Please select a Python file (.py)","pythonStrategy");return}const c=1024*1024;if(t.size>c){l.error("File size must be less than 1MB","pythonStrategy");return}if(_(t),!i){const S=t.name.replace(".py","").replace(/_/g," ");f(S.charAt(0).toUpperCase()+S.slice(1))}}},M=async s=>{if(s.preventDefault(),!z()){l.error("Please fix the form errors","pythonStrategy");return}try{j(!0);const t=await O.uploadStrategy(i,n,{start_time:p,stop_time:h,days:o});t.status==="success"?(l.success("Strategy uploaded with schedule","pythonStrategy"),u("/python")):l.error(t.message||"Failed to upload strategy","pythonStrategy")}catch(t){const c=t instanceof Error?t.message:"Failed to upload strategy";l.error(c,"pythonStrategy")}finally{j(!1)}};return e.jsxs("div",{className:"container mx-auto py-6 max-w-2xl space-y-6",children:[e.jsx(d,{variant:"ghost",asChild:!0,children:e.jsxs(Z,{to:"/python",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Back to Python Strategies"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Add Python Strategy"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload a Python script to run as an automated trading strategy"})]}),e.jsxs(U,{children:[e.jsx(H,{className:"h-4 w-4"}),e.jsxs(Y,{children:["Your Python script should use the ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"openalgo"})," ","SDK. Install it with: ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"pip install openalgo"})]})]}),e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Upload Strategy"]}),e.jsx(K,{children:"Select your Python script file and give it a name"})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",children:"Strategy Name"}),e.jsx(x,{id:"name",placeholder:"My Trading Strategy",value:i,onChange:s=>f(s.target.value),className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A descriptive name for your strategy"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"file",children:"Python Script"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors ${a.file?"border-red-500":""}`,onClick:()=>g.current?.click(),children:[e.jsx("input",{ref:g,id:"file",type:"file",accept:".py",className:"hidden",onChange:B}),n?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(P,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(n.size/1024).toFixed(2)," KB"]})]})]}):e.jsxs("div",{children:[e.jsx(T,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to select a Python file (.py)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum file size: 1MB"})]})]}),a.file&&e.jsx("p",{className:"text-sm text-red-500",children:a.file})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("h3",{className:"font-medium",children:"Schedule"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure when this strategy should run. All times are in IST."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"startTime",children:"Start Time (IST)"}),e.jsx(x,{id:"startTime",type:"time",value:p,onChange:s=>I(s.target.value),className:a.startTime?"border-red-500":""}),a.startTime&&e.jsx("p",{className:"text-sm text-red-500",children:a.startTime})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"stopTime",children:"Stop Time (IST)"}),e.jsx(x,{id:"stopTime",type:"time",value:h,onChange:s=>F(s.target.value),className:a.stopTime?"border-red-500":""}),a.stopTime&&e.jsx("p",{className:"text-sm text-red-500",children:a.stopTime})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Schedule Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(s=>e.jsxs("button",{type:"button",className:`flex items-center gap-2 px-3 py-2 border rounded-lg cursor-pointer transition-colors ${o.includes(s.value)?"bg-primary text-primary-foreground border-primary":"hover:bg-muted"}`,onClick:()=>L(s.value),children:[e.jsx("div",{className:`h-4 w-4 rounded border flex items-center justify-center ${o.includes(s.value)?"bg-primary-foreground border-primary-foreground":"border-current"}`,children:o.includes(s.value)&&e.jsx("svg",{className:"h-3 w-3 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("span",{className:"text-sm",children:s.label})]},s.value))}),a.days&&e.jsx("p",{className:"text-sm text-red-500",children:a.days}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the days when this strategy should run. Weekends can be enabled for special trading sessions."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"outline",className:"flex-1",onClick:()=>u("/python"),children:"Cancel"}),e.jsx(d,{type:"submit",className:"flex-1",disabled:y,children:y?"Uploading...":"Upload Strategy"})]})]})})]}),e.jsx(G,{open:N,onOpenChange:k,children:e.jsxs(b,{children:[e.jsx(v,{children:e.jsx(R,{asChild:!0,children:e.jsxs(d,{variant:"ghost",className:"w-full justify-between p-0",children:[e.jsxs(C,{className:"text-lg flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Example Strategy Template"]}),e.jsx("span",{className:"text-muted-foreground",children:N?"Hide":"Show"})]})})}),e.jsx(W,{children:e.jsxs(w,{children:[e.jsx("pre",{className:"p-4 bg-muted rounded-lg overflow-x-auto text-xs font-mono",children:A}),e.jsx(d,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>{navigator.clipboard.writeText(A),l.success("Copied to clipboard","clipboard")},children:"Copy Template"})]})})]})})]})}export{me as default};
