import{r as d,j as e}from"./vendor-react-CCyQGCED.js";import{w as Z,u as Je,s as ke,B as ee,e as D}from"./index-Qu69xCU9.js";import{C as Ke,d as qe}from"./card-goXE9YLz.js";import{P as ye,a as je,b as Ne,C as Te,c as Ie,d as Fe,e as Oe,f as Me,g as Ee}from"./popover-Ctxmxd4g.js";import{S as te,a as se,b as ne,c as ae,d as re}from"./select-DJ3XidsI.js";import{I as We}from"./input-BDk4q245.js";import{aV as Qe,m as we,a1 as Ze,X as et,L as De,aW as tt,ak as st,al as nt}from"./vendor-icons-CYRHZTVV.js";import"./vendor-charts-l0_txfiz.js";import"./vendor-router-Dzc1xxhr.js";import"./vendor-radix-CYVJEJRR.js";const ce={getChain:async n=>(await Z.post("/timeseries/api/chain",n)).data,getData:async n=>(await Z.post("/timeseries/api/data",n)).data,getUnderlyings:async n=>(await Z.get(`/search/api/underlyings?exchange=${n}`)).data,getExpiries:async(n,a)=>(await Z.get(`/search/api/expiries?exchange=${n}&underlying=${a}`)).data},at=[{value:"NFO",label:"NFO"},{value:"BFO",label:"BFO"}],Ae={NFO:["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY"],BFO:["SENSEX","BANKEX"]},rt=["1m","3m","5m","15m","1h"],ct={"1m":1,"3m":3,"5m":5,"15m":15,"1h":60},lt=Array.from({length:25},(n,a)=>a+1),it={total:!1,dayChange:!0,change:!0,volume:!1,sentiment:!0};function ot(n,a){return n===0||a===0?"—":n>0&&a>0?"Long Buildup":n>0&&a<0?"Short Cover":n<0&&a>0?"Short Buildup":n<0&&a<0?"Long Unwind":"—"}function dt(n){switch(n){case"Long Buildup":return"bg-green-600 text-white";case"Short Cover":return"bg-green-400/80 text-white";case"Short Buildup":return"bg-red-600 text-white";case"Long Unwind":return"bg-red-400/80 text-white";default:return"bg-muted text-muted-foreground"}}function ut(n){if(!n)return"";const a=n.split("-");return a.length===3?`${a[0]}${a[1].toUpperCase()}${a[2].slice(-2)}`:n.replace(/-/g,"").toUpperCase()}function le(n){if(!n)return null;if(typeof n=="number")return new Date(n>1e12?n:n*1e3);const a=String(n).trim(),o=new Date(a);if(!Number.isNaN(o.getTime()))return o;if(a.includes(" ")&&!a.includes("T")){const i=new Date(a.replace(" ","T"));if(!Number.isNaN(i.getTime()))return i}return null}function mt(n){if(!n)return"";const a=le(n);return a?`${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`:String(n)}function _(n,a=0){if(n===0)return"0";const o=Math.abs(n);return o>=1e7?`${(n/1e7).toFixed(2)}Cr`:o>=1e5?`${(n/1e5).toFixed(2)}L`:o>=1e3?`${(n/1e3).toFixed(1)}K`:n.toFixed(a)}const pt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function xt(n){const a=le(n);if(!a)return"";const o=a.getDate(),i=pt[a.getMonth()];let f=a.getHours();const $=f>=12?"PM":"AM";f=f%12||12;const N=String(a.getMinutes()).padStart(2,"0"),g=String(a.getSeconds()).padStart(2,"0");return`${o} ${i} ${f}:${N}:${g} ${$}`}function C(n,a,o){if(n===0||a===0)return"transparent";const f=.1+Math.min(Math.abs(n)/a,1)*.35;return n>0?o?`rgba(34,197,94,${f})`:`rgba(22,163,74,${f})`:o?`rgba(239,68,68,${f})`:`rgba(220,38,38,${f})`}function O(n){return n>0?"text-emerald-400":n<0?"text-rose-400":"text-muted-foreground"}function ht(n,a,o){if(!n.timestamps?.length)return[];const i=n.columns.indexOf("oi"),f=n.columns.indexOf("ltp"),$=n.columns.indexOf("volume"),N=o?.length?new Set(o):null,g=Object.entries(a).filter(([,p])=>p.type==="CE"&&(!N||p.strike!=null&&N.has(p.strike))).map(([p])=>p),c=Object.entries(a).filter(([,p])=>p.type==="PE"&&(!N||p.strike!=null&&N.has(p.strike))).map(([p])=>p),l=Object.entries(a).find(([,p])=>p.type==="FUT")?.[0];let b=0,T=0,E=0;return n.timestamps.map((p,v)=>($>=0&&(b+=g.reduce((k,F)=>k+(n.symbol_data[F]?.[$]?.[v]??0),0),T+=c.reduce((k,F)=>k+(n.symbol_data[F]?.[$]?.[v]??0),0),l&&(E+=n.symbol_data[l]?.[$]?.[v]??0)),{timestamp:p,ce_oi:g.reduce((k,F)=>k+(n.symbol_data[F]?.[i]?.[v]??0),0),pe_oi:c.reduce((k,F)=>k+(n.symbol_data[F]?.[i]?.[v]??0),0),ce_volume:b,pe_volume:T,fut_ltp:l?n.symbol_data[l]?.[f]?.[v]??0:0,fut_oi:l?n.symbol_data[l]?.[i]?.[v]??0:0,fut_volume:E}))}function gt(n,a){if(!n.length)return[];const o=[];for(let g=0;g<n.length;g+=a){const c=n[g],l=Math.min(g+a-1,n.length-1),b=n[l];o.push({...b,timestamp:c.timestamp})}if(!o.length)return[];const i=n[0],f=i.ce_oi>0?Math.round(i.pe_oi/i.ce_oi*100)/100:0,$=i.pe_oi-i.ce_oi,N=[];for(let g=0;g<o.length;g++){const c=o[g],l=g>0?N[g-1]:null,b=c.pe_oi-c.ce_oi,T=c.ce_oi>0?Math.round(c.pe_oi/c.ce_oi*100)/100:0;N.push({timestamp:c.timestamp,ce_oi:c.ce_oi,pe_oi:c.pe_oi,pe_ce_oi:b,pcr:T,ce_volume:c.ce_volume,pe_volume:c.pe_volume,fut_ltp:c.fut_ltp,fut_oi:c.fut_oi,fut_volume:c.fut_volume,ce_oi_day_change:c.ce_oi-i.ce_oi,pe_oi_day_change:c.pe_oi-i.pe_oi,ce_volume_day_change:c.ce_volume,pe_volume_day_change:c.pe_volume,pe_ce_oi_day_change:b-$,pcr_day_change:Math.round((T-f)*100)/100,fut_ltp_day_change:c.fut_ltp-i.fut_ltp,fut_oi_day_change:c.fut_oi-i.fut_oi,fut_volume_day_change:c.fut_volume,ce_oi_change:l?c.ce_oi-l.ce_oi:c.ce_oi-i.ce_oi,pe_oi_change:l?c.pe_oi-l.pe_oi:c.pe_oi-i.pe_oi,ce_volume_change:l?c.ce_volume-l.ce_volume:c.ce_volume,pe_volume_change:l?c.pe_volume-l.pe_volume:c.pe_volume,pe_ce_oi_change:l?b-l.pe_ce_oi:b-$,pcr_change:l?Math.round((T-l.pcr)*100)/100:Math.round((T-f)*100)/100,fut_ltp_change:l?c.fut_ltp-l.fut_ltp:c.fut_ltp-i.fut_ltp,fut_oi_change:l?c.fut_oi-l.fut_oi:c.fut_oi-i.fut_oi,fut_volume_change:l?c.fut_volume-l.fut_volume:c.fut_volume})}return N}function j(n,a){return n.length?Math.max(...n.map(o=>Math.abs(o[a]))):0}const h="border-r-2 border-border",m="border-r border-border/50";function kt(){const{mode:n,appMode:a}=Je(),o=n==="dark"||a==="analyzer",[i,f]=d.useState("NFO"),[$,N]=d.useState(Ae.NFO),[g,c]=d.useState(!1),[l,b]=d.useState("NIFTY"),[T,E]=d.useState([]),[p,v]=d.useState(""),[k,F]=d.useState("3m"),[w,Re]=d.useState(new Date().toISOString().split("T")[0]),[A,Ve]=d.useState(3),[ie,Le]=d.useState(!1),[R,be]=d.useState("range"),[P,ve]=d.useState("auto"),[B,Se]=d.useState(null),[q,oe]=d.useState([]),[Ue,Pe]=d.useState(!1),[s,Be]=d.useState(it),[Ge,He]=d.useState(!1),[x,de]=d.useState(null),[M,G]=d.useState(null),[V,Ye]=d.useState(null),[L,Ce]=d.useState(null),[ue,$e]=d.useState(!1),W=d.useRef(0),I=d.useMemo(()=>x?.symbols?[...new Set(x.symbols.filter(r=>r.strike!=null).map(r=>r.strike))].sort((r,u)=>r-u):[],[x]);d.useEffect(()=>{x?.atm_strike!=null&&(Se(x.atm_strike),oe([x.atm_strike]))},[x?.atm_strike]);const y=d.useMemo(()=>{if(!I.length)return[];if(R==="custom")return q.sort((K,Q)=>K-Q);const t=P==="fixed"&&B!=null?B:x?.atm_strike??0,r=I.indexOf(t);if(r===-1)return I.slice(0,A*2+1);const u=Math.max(0,r-A),J=Math.min(I.length,r+A+1);return I.slice(u,J)},[I,R,P,B,A,q,x?.atm_strike]),me=d.useMemo(()=>y.length?{min:y[0],max:y[y.length-1]}:null,[y]);d.useEffect(()=>{const t=Ae[i]||[];N(t),b(t[0]||""),E([]),v(""),de(null),G(null);let r=!1;return(async()=>{try{const u=await ce.getUnderlyings(i);if(r)return;u.status==="success"&&u.underlyings.length>0&&(N(u.underlyings),u.underlyings.includes(t[0])||b(u.underlyings[0]))}catch{}})(),()=>{r=!0}},[i]),d.useEffect(()=>{if(!l)return;E([]),v(""),de(null),G(null);let t=!1;return(async()=>{try{const r=await ce.getExpiries(i,l);if(t)return;r.status==="success"&&r.expiries.length>0&&(E(r.expiries),v(r.expiries[0]))}catch{t||E([])}})(),()=>{t=!0}},[i,l]),d.useEffect(()=>{if(!p)return;G(null);let t=!1;return(async()=>{try{const r=ut(p),u=await ce.getChain({underlying:l,exchange:i,expiry_date:r,strike_count:25});if(t)return;u.status==="success"&&de(u)}catch{}})(),()=>{t=!0}},[p,l,i]);const ze=d.useCallback(async()=>{if(!x||!p)return;const t=++W.current;G(null),Ce(null),$e(!0);try{const r=x.symbols||[],u=y.length>0?new Set(y):null,K=[...u?r.filter(U=>U.strike==null||u.has(U.strike)):r];x.futures?.symbol&&x.futures?.exchange&&K.push({symbol:x.futures.symbol,exchange:x.futures.exchange,type:"FUT"});const Q={};for(const U of K)Q[U.symbol]={type:U.type??"CE",strike:U.strike??null};Ye(Q);const fe=await ce.getData({symbols:K,interval:"1m",start_date:w,end_date:w});if(W.current!==t)return;fe.status==="success"?(G(fe),Ce({exchange:i,underlying:l,expiry:p,date:w})):ke.error(fe.message||"Failed to fetch timeseries data")}catch{W.current===t&&ke.error("Failed to load data")}finally{W.current===t&&$e(!1)}},[x,p,y,w,i,l]),pe=d.useMemo(()=>{if(!V||!L||L.exchange!==i||L.underlying!==l||L.expiry!==p||L.date!==w)return!1;const t=new Set(Object.values(V).filter(r=>r.strike!=null).map(r=>r.strike));return y.every(r=>t.has(r))},[V,L,i,l,p,w,y]),H=d.useMemo(()=>{if(!M?.timestamps?.length||!V||!pe)return[];const t=ht(M,V,y.length>0?y:void 0);return gt(t,ct[k]||1)},[M,k,y,V,pe]),Y=d.useMemo(()=>H.length?[...H].sort((t,r)=>{const u=le(t.timestamp)?.getTime()??0,J=le(r.timestamp)?.getTime()??0;return ie?u-J:J-u}):[],[H,ie]),S=d.useMemo(()=>{const t=H;return{pe_oi:j(t,"pe_oi"),ce_oi:j(t,"ce_oi"),pe_volume:j(t,"pe_volume"),ce_volume:j(t,"ce_volume"),pe_ce_oi:j(t,"pe_ce_oi"),fut_oi:j(t,"fut_oi"),fut_volume:j(t,"fut_volume"),pe_oi_day:j(t,"pe_oi_day_change"),ce_oi_day:j(t,"ce_oi_day_change"),pe_volume_day:j(t,"pe_volume_day_change"),ce_volume_day:j(t,"ce_volume_day_change"),pe_ce_oi_day:j(t,"pe_ce_oi_day_change"),pcr_day:j(t,"pcr_day_change"),fut_oi_day:j(t,"fut_oi_day_change"),fut_volume_day:j(t,"fut_volume_day_change"),fut_ltp_day:j(t,"fut_ltp_day_change")}},[H]);function z(){let t=0;return s.total&&t++,s.dayChange&&t++,s.change&&t++,t}function X(){let t=0;return s.volume&&s.total&&t++,s.volume&&s.change&&t++,t}function xe(){let t=0;return s.total&&t++,s.dayChange&&t++,s.change&&t++,t}function he(){let t=0;return s.total&&t++,s.dayChange&&t++,s.change&&t++,t}function ge(){let t=1;return s.total&&t++,s.dayChange&&t++,s.change&&t++,t}function _e(){let t=0;return s.volume&&s.total&&t++,s.volume&&s.change&&t++,t}const Xe=z()>0||X()>0||xe()>0||he()>0||ge()>0||_e()>0||s.sentiment;return e.jsxs("div",{className:"py-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Trending OI"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(te,{value:i,onValueChange:f,children:[e.jsx(se,{className:"w-[80px]",children:e.jsx(ne,{placeholder:"Exchange"})}),e.jsx(ae,{children:at.map(t=>e.jsx(re,{value:t.value,children:t.label},t.value))})]}),e.jsxs(ye,{open:g,onOpenChange:c,children:[e.jsx(je,{asChild:!0,children:e.jsxs(ee,{variant:"outline",role:"combobox","aria-expanded":g,className:"w-[140px] justify-between",children:[l||"Underlying",e.jsx(Qe,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ne,{className:"w-48 p-0",align:"start",children:e.jsxs(Te,{children:[e.jsx(Ie,{placeholder:"Search..."}),e.jsxs(Fe,{children:[e.jsx(Oe,{children:"No underlying found"}),e.jsx(Me,{children:$.map(t=>e.jsxs(Ee,{value:t,onSelect:()=>{b(t),c(!1)},children:[e.jsx(we,{className:`mr-2 h-4 w-4 ${l===t?"opacity-100":"opacity-0"}`}),t]},t))})]})]})})]}),e.jsxs(te,{value:p,onValueChange:v,disabled:T.length===0,children:[e.jsx(se,{className:"w-[130px]",children:e.jsx(ne,{placeholder:"Expiry"})}),e.jsx(ae,{children:T.map(t=>e.jsx(re,{value:t,children:t},t))})]}),e.jsx("div",{className:"flex bg-muted rounded-md p-0.5",children:rt.map(t=>e.jsx("button",{onClick:()=>F(t),className:`px-2 py-1 text-xs rounded transition-colors ${k===t?"bg-primary text-primary-foreground":"hover:bg-muted-foreground/10"}`,children:t},t))}),e.jsx(We,{type:"date",value:w,onChange:t=>Re(t.target.value),className:"w-[130px] text-xs"}),e.jsxs(ye,{open:Ge,onOpenChange:He,children:[e.jsx(je,{asChild:!0,children:e.jsx(ee,{variant:"outline",size:"icon",children:e.jsx(Ze,{className:"h-4 w-4"})})}),e.jsxs(Ne,{className:"w-48 p-3",align:"end",children:[e.jsx("p",{className:"text-xs font-semibold mb-2",children:"Show Columns"}),[["total","Total"],["dayChange","Day Change"],["change","Change"],["volume","Volume"],["sentiment","Sentiment"]].map(([t,r])=>e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer text-sm",children:[e.jsx("input",{type:"checkbox",checked:s[t],onChange:()=>Be(u=>({...u,[t]:!u[t]})),className:"rounded"}),r]},t))]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex bg-muted rounded-md p-0.5",children:[e.jsx("button",{onClick:()=>be("range"),className:`px-3 py-1 text-xs rounded transition-colors ${R==="range"?"bg-primary text-primary-foreground":"hover:bg-muted-foreground/10"}`,children:"Range"}),e.jsx("button",{onClick:()=>be("custom"),className:`px-3 py-1 text-xs rounded transition-colors ${R==="custom"?"bg-primary text-primary-foreground":"hover:bg-muted-foreground/10"}`,children:"Custom"})]}),R==="range"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex bg-muted rounded-md p-0.5",children:[e.jsx("button",{onClick:()=>ve("auto"),className:`px-3 py-1 text-xs rounded transition-colors ${P==="auto"?"bg-primary text-primary-foreground":"hover:bg-muted-foreground/10"}`,children:"Auto ATM"}),e.jsx("button",{onClick:()=>ve("fixed"),className:`px-3 py-1 text-xs rounded transition-colors ${P==="fixed"?"bg-primary text-primary-foreground":"hover:bg-muted-foreground/10"}`,children:"Fixed"})]}),P==="fixed"&&I.length>0&&e.jsxs(te,{value:B!=null?String(B):"",onValueChange:t=>Se(Number(t)),children:[e.jsx(se,{className:"w-[110px]",children:e.jsx(ne,{placeholder:"Center"})}),e.jsx(ae,{children:I.map(t=>e.jsxs(re,{value:String(t),children:[t,t===x?.atm_strike?" (ATM)":""]},t))})]}),e.jsxs(te,{value:String(A),onValueChange:t=>Ve(Number(t)),children:[e.jsx(se,{className:"w-[70px]",children:e.jsx(ne,{placeholder:"Range"})}),e.jsx(ae,{children:lt.map(t=>e.jsxs(re,{value:String(t),children:["±",t]},t))})]})]}):e.jsxs("div",{className:"flex items-center gap-1 flex-wrap min-w-[200px]",children:[q.sort((t,r)=>t-r).map(t=>e.jsxs(D,{variant:"secondary",className:"text-xs px-2 py-0.5 gap-1",children:[t,t===x?.atm_strike?"*":"",e.jsx("button",{onClick:()=>oe(r=>r.filter(u=>u!==t)),className:"ml-0.5 hover:text-destructive","aria-label":`Remove strike ${t}`,children:e.jsx(et,{className:"h-3 w-3"})})]},t)),e.jsxs(ye,{open:Ue,onOpenChange:Pe,children:[e.jsx(je,{asChild:!0,children:e.jsx(ee,{variant:"outline",size:"sm",className:"h-7 text-xs px-2",disabled:I.length===0,children:"+ Strike"})}),e.jsx(Ne,{className:"w-48 p-0",align:"start",children:e.jsxs(Te,{children:[e.jsx(Ie,{placeholder:"Search strike..."}),e.jsxs(Fe,{children:[e.jsx(Oe,{children:"No strikes available"}),e.jsx(Me,{children:I.map(t=>e.jsxs(Ee,{value:String(t),onSelect:()=>{oe(r=>r.includes(t)?r.filter(u=>u!==t):[...r,t])},children:[e.jsx(we,{className:`mr-2 h-4 w-4 ${q.includes(t)?"opacity-100":"opacity-0"}`}),t,t===x?.atm_strike?" (ATM)":""]},t))})]})]})})]})]}),e.jsx(ee,{onClick:ze,disabled:ue||!p,className:"min-w-[80px]",children:ue?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"mr-1 h-4 w-4 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"mr-1 h-4 w-4"}),"Load"]})})]}),x&&x.status==="success"&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(D,{variant:"secondary",className:"text-sm px-3 py-1",children:["Spot: ",x.underlying_ltp?.toFixed(1)]}),e.jsxs(D,{variant:"secondary",className:"text-sm px-3 py-1",children:["ATM: ",x.atm_strike]}),e.jsxs(D,{variant:"secondary",className:"text-sm px-3 py-1",children:["Lot: ",x.lot_size]}),x.futures&&e.jsxs(D,{variant:"secondary",className:"text-sm px-3 py-1",children:["Futures: ",x.futures.symbol]}),e.jsxs(D,{variant:"secondary",className:"text-sm px-3 py-1",children:["Strikes: ",R==="custom"?`${y.length} selected`:`±${A}`,me&&` (${me.min}–${me.max})`,y.length>0&&` [${y.length} strikes]`]}),e.jsxs(D,{variant:"secondary",className:"text-sm px-3 py-1",children:["Rows: ",Y.length]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{}),Y.length>0&&M?.timestamps?.length&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Updated: ",xt(M.timestamps[M.timestamps.length-1]||"")]})]}),e.jsx(Ke,{children:e.jsx(qe,{className:"p-0 overflow-x-auto",children:ue&&!M?e.jsxs("div",{className:"flex items-center justify-center h-[500px] text-muted-foreground",children:[e.jsx(De,{className:"mr-2 h-5 w-5 animate-spin"})," Loading timeseries data..."]}):Y.length>0&&Xe?e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsxs("thead",{className:"sticky top-0 bg-background z-10",children:[e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{rowSpan:2,className:`px-3 py-2 text-center font-semibold ${h} cursor-pointer select-none hover:bg-muted/50`,onClick:()=>Le(t=>!t),children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Time",ie?e.jsx(st,{className:"h-3.5 w-3.5 text-muted-foreground"}):e.jsx(nt,{className:"h-3.5 w-3.5 text-muted-foreground"})]})}),z()>0&&e.jsx("th",{colSpan:z(),className:`px-2 py-1 text-center font-semibold ${h} text-rose-400`,children:"Put OI"}),X()>0&&e.jsx("th",{colSpan:X(),className:`px-2 py-1 text-center font-semibold ${h} text-rose-300`,children:"Put Vol"}),z()>0&&e.jsx("th",{colSpan:z(),className:`px-2 py-1 text-center font-semibold ${h} text-emerald-400`,children:"Call OI"}),X()>0&&e.jsx("th",{colSpan:X(),className:`px-2 py-1 text-center font-semibold ${h} text-emerald-300`,children:"Call Vol"}),xe()>0&&e.jsx("th",{colSpan:xe(),className:`px-2 py-1 text-center font-semibold ${h}`,children:"PE-CE OI"}),he()>0&&e.jsx("th",{colSpan:he(),className:`px-2 py-1 text-center font-semibold ${h}`,children:"PCR"}),ge()>0&&e.jsx("th",{colSpan:ge(),className:`px-2 py-1 text-center font-semibold ${h}`,children:"Futures OI"}),_e()>0&&e.jsx("th",{colSpan:_e(),className:`px-2 py-1 text-center font-semibold ${h}`,children:"Futures Vol"}),s.sentiment&&e.jsx("th",{rowSpan:2,className:"px-2 py-1 text-center font-semibold",children:"Sentiment"})]}),e.jsxs("tr",{className:"border-b border-border text-xs text-muted-foreground",children:[s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Total"}),s.dayChange&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Day Change"}),s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"Change"}),s.volume&&s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Total"}),s.volume&&s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"Change"}),s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Total"}),s.dayChange&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Day Change"}),s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"Change"}),s.volume&&s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Total"}),s.volume&&s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"Change"}),s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Total"}),s.dayChange&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Day Change"}),s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"Change"}),s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Total"}),s.dayChange&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Day Change"}),s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"Change"}),e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"LTP"}),s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"OI Total"}),s.dayChange&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Day Change"}),s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"OI Change"}),s.volume&&s.total&&e.jsx("th",{className:`px-2 py-1 text-center ${m}`,children:"Total"}),s.volume&&s.change&&e.jsx("th",{className:`px-2 py-1 text-center ${h}`,children:"Change"})]})]}),e.jsx("tbody",{children:Y.map((t,r)=>{const u=ot(t.fut_ltp_change,t.fut_oi_change);return e.jsxs("tr",{className:`border-b border-border/50 hover:bg-muted/30 ${r===0?"font-medium":""}`,children:[e.jsx("td",{className:`px-3 py-1.5 text-center whitespace-nowrap ${h}`,children:mt(t.timestamp)}),s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.pe_oi,S.pe_oi,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.pe_oi)})}),s.dayChange&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.pe_oi_day_change,S.pe_oi_day,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.pe_oi_day_change)})}),s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsx("span",{className:O(t.pe_oi_change),children:_(t.pe_oi_change)})}),s.volume&&s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.pe_volume,S.pe_volume,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.pe_volume)})}),s.volume&&s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsx("span",{className:O(t.pe_volume_change),children:_(t.pe_volume_change)})}),s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.ce_oi,S.ce_oi,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.ce_oi)})}),s.dayChange&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.ce_oi_day_change,S.ce_oi_day,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.ce_oi_day_change)})}),s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsx("span",{className:O(t.ce_oi_change),children:_(t.ce_oi_change)})}),s.volume&&s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.ce_volume,S.ce_volume,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.ce_volume)})}),s.volume&&s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsx("span",{className:O(t.ce_volume_change),children:_(t.ce_volume_change)})}),s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.pe_ce_oi,S.pe_ce_oi,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.pe_ce_oi)})}),s.dayChange&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.pe_ce_oi_day_change,S.pe_ce_oi_day,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.pe_ce_oi_day_change)})}),s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsx("span",{className:O(t.pe_ce_oi_change),children:_(t.pe_ce_oi_change)})}),s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,children:t.pcr.toFixed(2)}),s.dayChange&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.pcr_day_change,S.pcr_day,o)},children:e.jsxs("span",{className:"text-white font-medium",children:[t.pcr_day_change>0?"+":"",t.pcr_day_change.toFixed(2)]})}),s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsxs("span",{className:O(t.pcr_change),children:[t.pcr_change>0?"+":"",t.pcr_change.toFixed(2)]})}),e.jsx("td",{className:`px-2 py-1.5 text-center font-medium ${m}`,children:e.jsx("span",{className:r>0?O(t.fut_ltp-Y[r-1].fut_ltp):"",children:t.fut_ltp.toFixed(1)})}),s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.fut_oi,S.fut_oi,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.fut_oi)})}),s.dayChange&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.fut_oi_day_change,S.fut_oi_day,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.fut_oi_day_change)})}),s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsx("span",{className:O(t.fut_oi_change),children:_(t.fut_oi_change)})}),s.volume&&s.total&&e.jsx("td",{className:`px-2 py-1.5 text-center ${m}`,style:{backgroundColor:C(t.fut_volume,S.fut_volume,o)},children:e.jsx("span",{className:"text-white font-medium",children:_(t.fut_volume)})}),s.volume&&s.change&&e.jsx("td",{className:`px-2 py-1.5 text-center ${h}`,children:e.jsx("span",{className:O(t.fut_volume_change),children:_(t.fut_volume_change)})}),s.sentiment&&e.jsx("td",{className:"px-2 py-1 text-center",children:e.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${dt(u)}`,children:u})})]},t.timestamp)})})]}):e.jsx("div",{className:"flex items-center justify-center h-[500px] text-muted-foreground text-center px-6",children:M?pe?"No data available for the selected parameters":"Selection has changed (Underlying/Expiry/Date/Strikes). Click Load to refresh data.":"Select options and click Load to view Trending OI"})})})]})}export{kt as default};
