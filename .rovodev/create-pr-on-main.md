# Create PR Against Main Branch

Creates a pull request against the main branch with auto-generated title and description based on git commits.

## Important: Target Repository

Always create PRs on your fork/origin repo, not upstream.

Prefer auto-detecting the current repo:
```bash
# If you see: "No default remote repository has been set", run:
#   gh repo set-default gopinathshiva/openalgo
REPO="${REPO:-$(gh repo view --json nameWithOwner -q .nameWithOwner)}"
# then use: --repo "$REPO"
```

(You can override by setting `REPO` explicitly, e.g. `REPO=gopinathshiva/openalgo`.)

## Steps

1. **Check Current Branch**
   - If currently on main branch, create a new feature branch
   - Use a descriptive branch name based on the changes

2. **Stage Changes**
   - Run `git add .` to stage all changes
   - Or selectively stage files as needed

3. **Commit Changes**
   - Create a suitable commit message that describes the changes
   - Follow conventional commit format if applicable

4. **Push to Remote**
   - Run `git push` (or `git push -u origin <branch-name>` for new branches)

5. **Create Pull Request**
   - Use `gh pr create --repo "$REPO" --base main --title "<auto-generated-title>" --body "<auto-generated-description>"`
   - The title and description should be generated based on git commit messages
   - Alternatively, use `gh pr create --repo "$REPO" --base main --fill` to auto-generate from commits

6. **Share PR Link**
   - Output the generated PR URL
   - Provide the PR number and link for easy access

## Prerequisites

- `gh` CLI tool must be installed and authenticated
- Git repository must have a `main` branch
- User must have push access to the repository

## Example Command Sequence

```bash
# If on main, create new branch
git checkout -b feature/your-feature-name

# Stage and commit
git add .
git commit -m "feat: your commit message"

# Push changes
git push -u origin feature/your-feature-name

# Auto-detect repo (or set REPO explicitly)
REPO="${REPO:-$(gh repo view --json nameWithOwner -q .nameWithOwner)}"

# Create PR with auto-generated title and description (on your repo)
gh pr create --repo "$REPO" --base main --fill

# Or with custom title/description
gh pr create --repo "$REPO" --base main --title "Your PR Title" --body "PR description based on commits"
```

## Notes

- Prefer using `--repo "$REPO"` (auto-detected) to ensure PR is created on your repo, not upstream
- The PR will target the `main` branch
- Make sure to review the auto-generated title and description
- The PR link will be displayed after creation
